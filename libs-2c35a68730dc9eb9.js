/*! For license information please see libs-2c35a68730dc9eb9.js.LICENSE.txt */
"use strict";(("undefined"!=typeof self?self:this).webpackChunk_cb_app=("undefined"!=typeof self?self:this).webpackChunk_cb_app||[]).push([[13],{2405:(e,t,r)=>{r.d(t,{C:()=>s,a:()=>p,b:()=>c,e:()=>u,s:()=>l});var i=r(0),n=r(2);const o=["children"];function a(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const s=(0,i.createContext)({locale:"en",onError:console.error,spaceId:"",components:{}});function c(e){let t=e.children,r=a(e,o);return(0,n.jsx)(s.Provider,{value:r,children:t})}const d=e=>t=>{try{return t.filter((({fields:{file:t}})=>!e||e.includes(t.contentType))).map(u).filter((e=>!!e))}catch(e){return[]}},u=e=>{try{const t=e.fields,r=t.file,i=r.url,n=r.fileName,o=r.contentType,a=r.details,s=t.title,c=t.description;return{url:i.startsWith("//")?"https:"+i:i,title:s,fileName:n,contentType:o,description:c,details:a}}catch(e){return}},l=(d(["image/png","image/jpeg","image/svg+xml","image/gif"]),d(["video/mp4","video/webm"]),d(),(e,t)=>{try{return e?.sys?.contentType?.sys?.id}catch(e){t(e)}}),p=e=>e.fields},2404:(e,t,r)=>{r.d(t,{Cg:()=>C,Ho:()=>D,S9:()=>v,XA:()=>P,e9:()=>w,i4:()=>I,sq:()=>B,w4:()=>f});var i=r(2231),n=r(2405),o=r(0),a=r(2),s=r(1481);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l={"es-LA":"es-419","zh-TW":"zh-Hant-TW",pt:"pt-BR"};function p(e){return l[e]?l[e]:e}const f="default",m=1e4,y=3e3,g=3,_=1e3,h={};function b(e=f){return h[e]}function v(e,t){e?.length<1||e.forEach((e=>{!function(e,t,r=f,n){h[r]||(h[r]={client:(0,i.e)(d(d({},t),{},{retryOnError:n,timeout:n?m:y})),params:d(d({},t),{},{appId:e})})}(e.appId,e.options,e.clientKey,t)}))}function k(){return!!r.g&&r.g?.contentfulKillSwitchActive}async function w({id:e,onError:t,query:r,clientKey:i=f}){const n=d(d({},r),{},{locale:p(r?.locale||"en")}),o=b(i);if(!o)return t(new Error("Contentful client not initialized"),{type:"ENTRY",clientKey:i,id:e,query:n}),{type:"NOT_INITIALIZED",result:null};if(k())return{type:"KILL_SWITCHED",result:null};for(let r=0;r<g;r++)try{return{type:"SUCCESS",result:await o.client.getEntry(e,n)}}catch(r){if("NotFound"===r?.sys?.id)return{type:"NOT_FOUND",result:null};if(429===r.response?.status){const e=Number(r.response.headers["X-Contentful-RateLimit-Reset"]*_);if(Number.isInteger(e)){await new Promise((t=>setTimeout(t,e)));continue}await new Promise((e=>setTimeout(e,_)));continue}return t(r,d({type:"ENTRY",clientKey:i,id:e,query:n},o.params)),{type:"ERROR",result:null,error:r}}return{type:"ERROR",result:null,error:new Error("Maximum retries reached")}}async function C({query:e,onError:t,clientKey:r=f}){return await x({query:e,onError:t,clientKey:r,isPaginated:!1})}async function x({query:e,onError:t,isPaginated:r,clientKey:i=f}){const n=d(d({},e),{},{locale:p(e?.locale||"en")}),o=b(i);if(!o)return t(new Error("Contentful client not initialized"),{type:"ENTRIES",clientKey:i,isPaginated:r,query:n}),{type:"NOT_INITIALIZED",result:null};if(k())return{type:"KILL_SWITCHED",result:null};for(let e=0;e<g;e++)try{const e=await o.client.getEntries(n);if(e?.items?.length>0){const t=JSON.parse(e.stringifySafe());return{type:"SUCCESS",result:r?t:t.items}}return{type:"NOT_FOUND",result:null}}catch(e){if(429===e.response?.status){const t=Number(e.response.headers["X-Contentful-RateLimit-Reset"]*_);if(Number.isInteger(t)){await new Promise((e=>setTimeout(e,t)));continue}await new Promise((e=>setTimeout(e,_)));continue}return t(e,d({type:"ENTRIES",clientKey:i,query:n},o.params)),{type:"ERROR",result:null,error:e}}return{type:"ERROR",result:null,error:new Error("Maximum retries reached")}}const S=e=>e.length<2?e:e.replace(/\/$/,"");async function I(e,t,r){const i=await C({query:{content_type:"page",include:t?.include||6,locale:t.locale,"fields.slug":S(e)},clientKey:t.clientKey||f,onError:r});if("SUCCESS"===i?.type){const e=i?.result?.[0]?.fields;return e?{type:"SUCCESS",result:e}:{type:"NOT_FOUND",result:null}}return i}class E extends o.Component{constructor(...e){super(...e),this.state={hasError:!1}}componentDidCatch(e,t){this.props.onError(e,{isBoundaryError:!0,componentStack:t?.componentStack}),this.setState({hasError:!0})}render(){return this.state.hasError?null:this.props.children}}const T=E,j=(e,t,r,i)=>e?e.map(((e,o)=>{const s=(0,n.s)(e,t);if(!s)return null;const c=r[s];if("genericComponentSubNav"===s)return null;if(void 0===c)return t(new Error(`Missing component for ${s}`)),null;const u=(0,n.a)(e);return(0,a.jsx)(T,{onError:t,children:(0,a.jsx)(c,d(d({},u),{},{options:i}))},o)})):null,A=({content:e,additionalProps:t})=>{const r=(0,o.useContext)(n.C),i=(0,o.useMemo)((()=>d(d({},t),{},{renderNestedComponents:j})),[t]);return j(Array.isArray(e)?e:[e],r.onError,r.components,i)},P=(0,o.memo)(A);!function(e){const t=e?.ttl||3e5;let r,i=0}();const O=({content:e,renderOptions:t})=>(0,s.h)(e,t),D=(0,o.memo)(O),M={format:"fm",quality:"q",width:"w",height:"h",progressive:"fl",fit:"fit",focus:"f",radius:"r",backgroundColor:"bg"};function B(e,t){const r=[];Object.keys(t).forEach((e=>{if("progressive"===e)t[e]&&r.push("fl=progressive");else{const i=M[e];r.push(`${i}=${t[e]}`)}}));return`${e}?${r.join("&")}`}},1412:(e,t,r)=>{r.d(t,{ob:()=>n.o,uJ:()=>i.u,$T:()=>n.$});r(887),r(3675);var i=r(547),n=(r(1560),r(888),r(1562),r(889),r(1559));r(1561),r(540)},889:(e,t,r)=>{r.d(t,{S:()=>n});var i=r(0);function n({lastUpdateTime:e,lastHeartbeatTime:t}){return(0,i.useCallback)((({now:r,healthCheckIntervalTolerance:i})=>!(r-e>i&&r-t>i)),[e,t])}},1562:(e,t,r)=>{r.d(t,{E:()=>i.Ek,N:()=>i.NA});var i=r(540)},540:(e,t,r)=>{r.d(t,{NA:()=>f,Ek:()=>_});var i=r(0),n=r(7),o=r(1451);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],c=!0,d=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],c=!0,d=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}let f=function(e){return e.PRICE_CHART_UNAVAILABLE="rat_price_chart_component_unavailable",e.ORDER_BOOK_UNAVAILABLE="rat_order_book_component_unavailable",e.ORDER_FORM_UNAVAILABLE="rat_order_form_component_unavailable",e.ORDERS_TABLE_UNAVAILABLE="rat_orders_table_component_unavailable",e}({});const m={[f.PRICE_CHART_UNAVAILABLE]:{action:n.Us.measurement,componentType:n.re.chart},[f.ORDER_BOOK_UNAVAILABLE]:{action:n.Us.measurement,componentType:n.re.unknown},[f.ORDER_FORM_UNAVAILABLE]:{action:n.Us.measurement,componentType:n.re.unknown},[f.ORDERS_TABLE_UNAVAILABLE]:{action:n.Us.measurement,componentType:n.re.table}},y={};var g=function(e){return e.UNHEALTHY="unhealthy",e.HEALTHY="healthy",e.GRACE_PERIOD="grace_period",e}(g||{});const _=({interval:e,intervalTolerance:t,rules:r,coldStartLeniency:s,metricEventName:c})=>{const u=l((0,i.useState)(e??3e3),2),p=u[0],f=u[1],_=t??25e3,h=s??15e3,b=l((0,i.useState)(Date.now()),1)[0],v=(()=>{const e=a((0,i.useState)("visible"===document.visibilityState),2),t=e[0],r=e[1],n=(0,i.useCallback)((()=>{r(!0)}),[]),o=(0,i.useCallback)((()=>{r(!1)}),[]),s=(0,i.useCallback)((()=>{r("visible"===document.visibilityState)}),[]);return(0,i.useEffect)((()=>(window.addEventListener("online",n),window.addEventListener("offline",o),document.addEventListener("visibilitychange",s),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",o),document.removeEventListener("visibilitychange",s)})),[]),t})(),k=(0,i.useCallback)((()=>{const e=y[c];if(!v)return;if(e)return f(null),g.UNHEALTHY;const t=Date.now();return t-b<h?g.GRACE_PERIOD:(r.forEach((({callback:e,name:r,description:i})=>{e({now:t,healthCheckIntervalTolerance:_})||((0,n.Kz)(c,d(d({},m[c]),{},{ruleName:r,ruleDescription:i??"",healthyComponentLifetime:t-b})),y[c]=!0)})),y[c]?g.UNHEALTHY:g.HEALTHY)}),[b,h,_,v,c,r]);return(0,o.Z)(k,p),k}},887:(e,t,r)=>{r.d(t,{j:()=>o});var i=r(0);function n(e){return e}function o(...e){const t=(0,i.useRef)(!1),r=[];const o=e.map((e=>function(e){try{return e?.(n)}catch(e){if(!t.current&&e instanceof Promise)return void r.push(e);throw e}}(e)));if(r.length>0)throw Promise.all(r);return t.current=!0,o}},547:(e,t,r)=>{r.d(t,{N:()=>l,u:()=>p});const i={argumentDefinitions:[{kind:"RootArgument",name:"nativeCurrency"}],kind:"Fragment",metadata:null,name:"useCurrencyConverterFragment",selections:[{kind:"RequiredField",field:{alias:null,args:[{kind:"Variable",name:"baseCurrency",variableName:"nativeCurrency"}],concreteType:"CurrencyQuote",kind:"LinkedField",name:"exchangeRatesV3",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"quoteCurrency",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null}],storageKey:null},action:"THROW",path:"exchangeRatesV3"},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"UserProperties",kind:"LinkedField",name:"userProperties",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"nativeCurrency",storageKey:null},{alias:null,args:null,concreteType:"RegionFeatures",kind:"LinkedField",name:"regionFeatures",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"supportsFiatTransfers",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supportsCryptoToCryptoTransfers",storageKey:null}],storageKey:null}],storageKey:null},{alias:"assets",args:null,concreteType:"ViewerAssetConnection",kind:"LinkedField",name:"tradableAssets",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerAssetEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ViewerAsset",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"Asset",kind:"LinkedField",name:"asset",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"platformName",storageKey:null},{alias:null,args:[{kind:"Variable",name:"quoteCurrency",variableName:"nativeCurrency"}],concreteType:"CurrencyQuote",kind:"LinkedField",name:"latestQuoteV2",plural:!1,selections:[n],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null};var n;i.hash="e9177a720555cb3c69ef7a3e3f00ef02";var o=r(0),a=r(3),s=r(2307);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l({rates:e,nativeCurrency:t,input:r,to:i}){const n=(0,s.q)(r);if(!n)return 0;const o=n.value,a=n.currency,c=i??t,d=e[a],u=e[c];if(void 0===d||void 0===u)return 0;if(a===t)return o*u;if(0===d)return 0;if(c===t)return o/d;return o/d*u}function p({queryRef:e}){const t=(0,a.Jc)(i,e),r=t.viewer.userProperties?.nativeCurrency||"USD",n=(0,o.useMemo)((()=>d(d({},t.exchangeRatesV3.reduce(((e,t)=>(e[t.quoteCurrency]=parseFloat(t.price),e)),{})),{},{[r]:1})),[t.exchangeRatesV3,r]),s=t.viewer?.userProperties?.regionFeatures?.supportsFiatTransfers||t.viewer?.userProperties?.regionFeatures?.supportsCryptoToCryptoTransfers,c=(0,o.useMemo)((()=>{const e=(t.viewer?.assets?.edges||[]).map((e=>e.node||null));return s?e:[]}),[t.viewer?.assets?.edges,s]),u=(0,o.useMemo)((()=>c.reduce(((e,t)=>{const r=t?.asset.platformName,i=t?.asset.latestQuoteV2?.price;return r&&i&&(e[r]=1/parseFloat(i)),e}),{})),[c]),p=(0,o.useMemo)((()=>d(d({},n),u)),[u,n]);return(0,o.useCallback)(((e,t)=>l({rates:p,nativeCurrency:r,input:e,to:t})),[p,r])}},3675:(e,t,r)=>{r.d(t,{$:()=>i.$});var i=r(1559)},1559:(e,t,r)=>{r.d(t,{$:()=>u,o:()=>d});var i=r(0),n=r(9),o=r(2307);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function s(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c={},d="--",u=()=>{const e=(0,n.Z)().formatNumber;return(0,i.useCallback)((t=>{const r=(0,o.q)(t.amount);if(!r)return d;const i=r.value,n=r.currency;if(t.isFiat){const r=void 0===t.exponent?c:{minimumFractionDigits:t.exponent,maximumFractionDigits:t.maxDecimals},o=e(i,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({style:"currency",currency:n,notation:t.compact?"compact":"standard"},r));return t.invertSign?o.startsWith("−")?o.substring(1):`−${o}`:o}{const r=t.defaultToInteger,o=void 0===r||r,a=t.trimZeroes,s=void 0===a||a,c=t.withCurrency,d=void 0===c||c,u=t.invertSign,l=void 0!==u&&u,p=t.exponent??t.maxDecimals??8,f={style:"decimal",minimumFractionDigits:o&&Number.isInteger(i)?0:p,maximumFractionDigits:t.maxDecimals,notation:t.compact?"compact":"standard"};let m=e(i,f);return s&&(m=m.replace(/(\.\d*?[0-9])0+$/g,"$1")),l&&(m=m.startsWith("-")?m.substring(1):`−${m}`),d?`${m} ${"cbeth"===(n?.toLocaleLowerCase()||"")?"cbETH":n}`:`${m}`}}),[e])}},888:(e,t,r)=>{r.d(t,{d:()=>s});var i=r(0);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],c=!0,d=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}const a=({shouldSetTimeout:e,callback:t,timeout:r})=>{(0,i.useEffect)((()=>{if(e){const e=setTimeout(t,r);return()=>clearTimeout(e)}}),[e,t,r])},s=({canDisplay:e,delayTime:t,transitionTime:r,bypassDelay:o})=>{const s=n((0,i.useState)(e),2),c=s[0],d=s[1],u=(0,i.useCallback)((()=>d(!0)),[]),l=(0,i.useCallback)((()=>d(!1)),[]);return a({shouldSetTimeout:e&&!c,callback:u,timeout:t??10}),a({shouldSetTimeout:!e&&c,callback:l,timeout:r}),o?{canRender:c,isVisible:c}:{canRender:e||c,isVisible:e&&c}}},1451:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(0);function n(e,t){const r=(0,i.useRef)();(0,i.useEffect)((()=>{r.current=e}),[e]),(0,i.useEffect)((()=>{if(null!==t){const e=setInterval((function(){r.current&&r.current()}),t);return()=>clearInterval(e)}}),[t])}},3669:(e,t,r)=>{r.d(t,{Z:()=>c});var i=r(0),n=r(7),o=r(788);const a=6e4;function s(e=a){if(void 0===performance?.memory?.usedJSHeapSize)return;const t=performance.memory.usedJSHeapSize;return setTimeout((()=>{const e=(0,o.Y)();(0,n.HR)({metricName:"memory_usage",metricType:n.t0.histogram,value:performance.memory.usedJSHeapSize,tags:e}),(0,n.HR)({metricName:"memory_usage_growth",metricType:n.t0.histogram,value:performance.memory.usedJSHeapSize-t})}),e)}function c(e=a,t){(0,i.useEffect)((()=>{let r;return r=t?setTimeout((()=>{r=s(e)}),t):s(e),()=>{r&&clearTimeout(r)}}),[])}},4042:(e,t,r)=>{r.d(t,{T:()=>u});var i=r(0),n=r(7),o=r(788),a=r(1385);const s=1e3,c=1e3;function d(e,t=0){const r=performance.now()-e;if(t++,r>=s){const e=t*c/r,i=(0,o.Y)();(0,n.HR)({metricName:"perf_fps",metricType:n.t0.histogram,value:e,tags:i})}else requestAnimationFrame((()=>d(e,t)))}function u(e=6e4){(0,i.useEffect)((()=>{setTimeout((()=>{(0,a.Z)((()=>{d(performance.now(),0)}))}),e)}),[])}},3670:(e,t,r)=>{r.d(t,{q:()=>c});var i=r(0),n=r(7),o=r(788);const a="interactive",s="readystatechange",c=()=>{(0,i.useEffect)((()=>{let e;const t=()=>{document.readyState===a&&(e=(()=>{let e;try{e=new PerformanceObserver((function(e){const t=(0,o.Y)(),r=e.getEntries();for(let e=0;e<r.length;e++)(0,n.HR)({metricName:"perf_longtask_duration",metricType:n.t0.distribution,value:r[e].duration,tags:t})})),e.observe({entryTypes:["longtask"]})}catch(e){console.warn("Performance Observer not supported on this browser.",e)}return e})())};return document.readyState===a?t():document.addEventListener(s,t),()=>{e?.disconnect(),document.removeEventListener(s,t)}}),[])}},1560:(e,t,r)=>{r.d(t,{z:()=>i.z});var i=r(1561)},1561:(e,t,r)=>{r.d(t,{z:()=>n});var i=r(0);function n(e){const t=(0,i.useRef)();return(0,i.useEffect)((()=>{t.current=e}),[e]),t.current}},15:(e,t,r)=>{r.d(t,{NA:()=>b.NA,ob:()=>f.o,SV:()=>l,$p:()=>n.$p,HO:()=>k.H,Nh:()=>m.N,ad:()=>w.a,Xv:()=>n.Xv,Fy:()=>C.F,VJ:()=>C.V,Ys:()=>x.Y,cB:()=>n.cB,SB:()=>v.S,Ek:()=>b.Ek,j2:()=>p.j,uJ:()=>m.u,$T:()=>f.$,dB:()=>g.d,Wr:()=>h,zP:()=>y.z});var i=r(0),n=r(96),o=(r(485),r(2)),a=r(494);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u={};class l extends i.Component{constructor(...e){super(...e),this.state={error:null,errorMetadata:u},this.__alreadyInCaughtState=!1,this.onReset=()=>{this.__alreadyInCaughtState=!1,this.setState({error:null,errorMetadata:u})}}static getDerivedStateFromError(e){return{error:e,errorMetadata:{userErrorCode:(0,a.Q)(e)}}}componentDidCatch(e,t){const r=this.__alreadyInCaughtState;this.__alreadyInCaughtState=!0;const i=this.props,o=i.onCatch,s=i.skipErrorLogging,d=i.owner,u=i.context,l=i.boundaryName;o?.(e,c(c({},t),{},{alreadyInCaughtState:r})),s||(0,n.cB)(e,{skipAnalytics:r,componentStack:t?.componentStack,owner:d,context:u,isBoundaryError:!0,boundaryName:l});const p=(0,a.Q)(e);p&&!this.state.errorMetadata.userErrorCode&&this.setState({errorMetadata:{userErrorCode:p}})}render(){const e=this.state,t=e.error,r=e.errorMetadata,i=this.props,n=i.children,a=i.fallback;return t?t&&a?(0,o.jsx)(a,{error:t,errorMetadata:r,onReset:this.onReset}):null:n}}r(1412),r(156);var p=r(887),f=r(1559),m=r(547),y=r(1561),g=r(888);const _=["USD","EUR","GBP","CAD"];function h(){return _}var b=r(540),v=r(889),k=r(4016),w=r(876),C=r(376),x=(r(1091),r(1863));r(886)},876:(e,t,r)=>{r.d(t,{a:()=>s});var i=r(96),n=r(1524);const o="client-storage-keyval";let a;const s=()=>(a||(a=(0,n.openDB)("cb-client-storage",1,{upgrade(e){e.createObjectStore(o)}}).catch((()=>{}))),{async get(e){try{const t=await a;if(t)return t.get(o,e)}catch(e){return(0,i.cB)(e,{context:"getAsyncClientStorage-get",owner:"infra",severity:"debug"}),Promise.reject("Unable to read from IndexDB")}},async getMany(e){try{const t=await a;if(t)return Promise.all(e.map((e=>t.get(o,e))))}catch(e){return(0,i.cB)(e,{context:"getAsyncClientStorage-getMany",owner:"infra",severity:"debug"}),Promise.reject("Unable to read from IndexDB")}},async set(e,t){if(""===t||null==t)return Promise.reject("Invalid value");try{const r=await a;r&&await r.put(o,t,e)}catch(e){return(0,i.cB)(e,{context:"getAsyncClientStorage-set",owner:"infra",severity:"debug"}),Promise.reject("Unable to write to IndexDB")}},async delete(e){try{const t=await a;t&&await t.delete(o,e)}catch(e){return(0,i.cB)(e,{context:"getAsyncClientStorage-delete",owner:"infra",severity:"debug"}),Promise.reject("Unable to delete from IndexDB")}},async clearStore(){const e=await a;e&&await e.clear(o)},async getKeys(){const e=await a;if(e)return e.getAllKeys(o)}})},4016:(e,t,r)=>{function i(e){let t=!1;const r=new Promise((()=>{}));return{cancel:()=>{t=!0},promise:e.then((e=>t?r:e)).catch((e=>{if(t)return r;throw e}))}}r.d(t,{H:()=>i})},1089:(e,t,r)=>{r.d(t,{w:()=>i});const i={COINBASE_PUBLIC_AMPLITUDE_API_KEY:"132e62b5953ce8d568137d5887b6b7ab",COINBASE_PUBLIC_AMPLITUDE_REAL_TIME_API:"events-service.coinbase.com/amp",COINBASE_PUBLIC_AMPLITUDE_REAL_TIME_API_KEY:"5e21e8a10d7c1553bc75ce1ff6d49a3f",COINBASE_PUBLIC_DOMAIN:"https://www.coinbase.com",COINBASE_PUBLIC_ACCOUNTS_DOMAIN:"https://accounts.coinbase.com",COINBASE_PUBLIC_RECAPTCHA_PUBLIC_KEY:"6LejW1sUAAAAAGCrQbUbvyRUKOe2Y-0c4GDx8jfC",COINBASE_PUBLIC_RECAPTCHA_ENTERPRISE_PUBLIC_KEY:"6LfAM84ZAAAAAGLiQz5FBeADqq94dV48fMtiRqIj",COINBASE_PUBLIC_INVISIBLE_RECAPTCHA_KEY:"6LfAM84ZAAAAAGLiQz5FBeADqq94dV48fMtiRqIj",COINBASE_PUBLIC_VISIBLE_RECAPTCHA_KEY:"6Ldjhw8aAAAAAGtdebxvNR1Cp75sylYgaU1fKscX",COINBASE_PUBLIC_API_HOST:"https://www.coinbase.com/api",COINBASE_PUBLIC_GRAPHQL_HOST:"https://graphql.coinbase.com",COINBASE_PUBLIC_BUGSNAG_API_KEY:"afb3b2c84dbb04bf0f2f260003685211",COINBASE_PUBLIC_BUGSNAG_BOUNDARY_ERROR_ONLY_API_KEY:"06b65b47d403f88be9157775bb0f0747",COINBASE_PUBLIC_DEPLOYMENT_TARGET:"production",COINBASE_PUBLIC_GOOGLE_TAG_MANAGER_ID:"GTM-M3HVLBC",NODE_ENV:"production",BUILD_TARGET:"client",COINBASE_PUBLIC_I18N_BASE_URL:"https://translations.coinbase.com/42cad99e9/latest",COINBASE_PUBLIC_TOKENEX_PUBLIC_KEY:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA8gGPMwBRPuVyJReZGIkWH/+Bf5pnpDN1bSR2cLYLXVT8CaSnTw74qeboSnktgYCi1D9R3Bj2fYzTIwGGZb8KinLdxwbqZmHwrE9cFhCaHbG/E0PbqQGhXP2vbniZTT4M0i0Cbi7ES3Bw5zqNbIZZnX041QEpxLvIyWPKZCX+fBogNMhWfCF779aclChjHkwZMsufThVWE9xklWGxXiytx5aL4I5JPxq0I7cAkZGGs4aF/GxWwPaq7R3wPikJQ0YHnCMfcURzl2Hnw/inqyMy+JB6djTq2/BdzMAhWTh3cDWq9Xu+gEkb/QCd0n1yYIdKuDISlk/AfHdWe34IvzhVyQIDAQAB",DYNAMIC_ASSETS_HOST:"https://dynamic-assets.coinbase.com",COINBASE_PUBLIC_PRICE_WIDGET_HOST:"https://widget.coinbase.com",COINBASE_PUBLIC_PRICE_TABLE_WIDGET_HOST:"https://price-table-widget.coinbase.com",COINBASE_PUBLIC_SMART_CONTENT_CACHE_API:"https://o2dzby5941.execute-api.us-east-1.amazonaws.com/api/coinbase.smart_content_cache.SmartContent/GetContent",COINBASE_PUBLIC_SMART_CONTENT_CACHE_API_MARKET_CAP:"https://o2dzby5941.execute-api.us-east-1.amazonaws.com/api/coinbase.smart_content_cache.SmartContent/GetAssetsByMarketCap",COINBASE_PUBLIC_CONTENTFUL_SPACE:"q5ulk4bp65r7",COINBASE_PUBLIC_CONTENTFUL_ACCESS_TOKEN:"5nf2-I3cGYPUOck7PUgGlJUS7X6c8lzjBfm6xnYCT9c",COINBASE_PUBLIC_CONTENTFUL_ACCESS_TOKEN_PAID_MARKETING:"HAGyWG5ePJZ6CVLSNA0n12ZNUYH4UY5SYIPnTg7hwzU",COINBASE_PUBLIC_CONTENTFUL_ACCESS_TOKEN_LOGGED_OUT_V2:"AzZiaMpRz2-bGbNHr97E0T9EclmV99XQZ8NwSsY_3ho",COINBASE_PUBLIC_CONTENTFUL_ACCESS_TOKEN_PROD:"5nf2-I3cGYPUOck7PUgGlJUS7X6c8lzjBfm6xnYCT9c",COINBASE_PUBLIC_CONTENTFUL_ACCESS_TOKEN_PAID_MARKETING_PROD:"HAGyWG5ePJZ6CVLSNA0n12ZNUYH4UY5SYIPnTg7hwzU",COINBASE_PUBLIC_CONTENTFUL_ACCESS_TOKEN_LOGGED_OUT_V2_PROD:"AzZiaMpRz2-bGbNHr97E0T9EclmV99XQZ8NwSsY_3ho",COINBASE_PUBLIC_CONTENTFUL_HOST:"contentful.coinbase.com",COINBASE_PUBLIC_CONTENTFUL_PROD_HOST:"contentful.coinbase.com",COINBASE_PUBLIC_CONTENTFUL_PREVIEW_HOST:"contentful-dev.cbhq.net",COINBASE_PUBLIC_CONTENTFUL_API:"cdn.contentful.com",COINBASE_PUBLIC_USER_LEAP_ENV_ID:"JbJrhyp4Xe",COINBASE_PUBLIC_EARN_LAUNCH:"",COINBASE_PUBLIC_PRIME_RESOURCES_FORM_URL:"/api/v2/prime/resources/form",COINBASE_PUBLIC_CONTACT_FORM_CREATE_LEAD_URL:"/api/v2/coinbase.cx_api.api.v1.ContactService/CreateLead",COINBASE_PUBLIC_KILLSWITCH_API_HOST:"",COINBASE_EAA_SPACE_ID:"7ca8qfn907uv",COINBASE_EAA_CONTENT_DELIVERY_API_KEY:"R_uhbUwjoHShspvMaj5zB-LUYM2j3CWMESXtpLiiilI",COINBASE_EAA_CONTENT_PREVIEW_API_KEY:"wpkq3j4lzGLSB-7N4Vwpo0Lfm8iK0qL9lSRj5GxEWo0",COINBASE_EAA_CLIENT_KEY:"EAA",COINBASE_PUBLIC_RECAPTCHA_CLOUD_PUBLIC_KEY:"6LdPmx8eAAAAADV9ritua2tcr2cfhyJ55pJj51I0",COINBASE_PUBLIC_OAUTH_CLIENT_ID:"258660e1-9cfe-4202-9eda-d3beedb3e118",COINBASE_PUBLIC_LOGIN_DOMAIN:"https://login.coinbase.com",COINBASE_PUBLIC_UNSAFE_GRAPHQL_ENDPOINT:"",COINBASE_PUBLIC_UNSAFE_IAH_ENDPOINT:"",COINBASE_ID_NAVIGATION_BAR_PROJECT_ID:"2ZPgNhLdLmW6rbxN5CiAYU98pOd"}},916:(e,t,r)=>{r.d(t,{AY:()=>d,Xi:()=>c});var i=r(96),n=r(1089),o=r(138);const a="COINBASE_PUBLIC_",s=void 0!==o&&!1;let c=!1;const d=function(){if("undefined"==typeof window||s)return n.w.NODE_ENV="production",Object.keys({NODE_ENV:"production",NODE_DEBUG:void 0}).forEach((e=>{e.startsWith(a)&&(n.w[e]={NODE_ENV:"production",NODE_DEBUG:void 0}[e])})),n.w.BUILD_TARGET="server",c=!0,Promise.resolve();const e=document.querySelector("#environments_json");return e?function(e){const t=JSON.parse(e.innerHTML);return Object.keys(t).forEach((e=>{n.w[e]=t[e]})),c=!0,Promise.resolve()}(e):async function(){try{const e=await fetch("/environments.json",{credentials:"same-origin"}).then((e=>e.json()));Object.keys(e).forEach((t=>{n.w[t]=e[t]})),c=!0}catch(e){(0,i.cB)(e,{owner:"infra",context:"loadEnvironmentFromServer"}),c=!0}}()}()},886:(e,t,r)=>{r.d(t,{j:()=>d,l:()=>c});var i=r(1863),n=r(96),o=r(916),a=r(1089);const s=!1;function c(e){if(s)throw new Error("Environment variables cannot be accessed in web workers");if(!o.Xi){const t=new Error("Environment Variable accessed before initialization");if((0,i.Y)())throw t;(0,n.cB)(t,{owner:"infra",key:e,context:"app"})}return a.w[e]}function d(){if(s)throw new Error("Environment variables cannot be accessed in web workers");if(!o.Xi){const e=new Error("Environment Variable accessed before initialization");if((0,i.Y)())throw e;(0,n.cB)(e,{owner:"infra",context:"app"})}return a.w}},290:(e,t,r)=>{r.d(t,{AY:()=>n.AY,jx:()=>i.j,lS:()=>i.l});var i=r(886),n=r(916)},1864:(e,t,r)=>{r(376)},376:(e,t,r)=>{r.d(t,{F:()=>_,V:()=>g});var i=r(7),n=r(1505),o=r(1863),a=r(96);const s=/Minified React error #(418|419|421|422|423|425)/,c=e=>!!e&&(!!Object.prototype.hasOwnProperty.call(e,"message")&&("string"==typeof e.message&&!!s.test(e.message))),d=new Set,u=e=>{if("undefined"==typeof window)return!1;if(!c(e))return!1;return!!d.has(e.message)||(d.add(e.message),!1)};function l(e){return!!e&&(function(e){return"string"==typeof e?.message&&e.message.includes("Unauthenticated request")}(e)||function(e){return"string"==typeof e?.message&&(/Loading chunk .+ failed/.test(e.message)||/Loading CSS chunk .+ failed/.test(e.message))}(e)||function(e){if("string"!=typeof e.message)return!1;return!!e.message.includes("can't access dead object")}(e)||function(e){if("unhandled error - additionally no Error object caught"!==e.message)return!1;if(!Object.prototype.hasOwnProperty.call(e,"cause"))return!1;if("string"!=typeof e.cause)return!1;return e.cause.includes("Object Not Found Matching Id:")}(e)||function(e){if("string"!=typeof e.message)return!1;if("string"!=typeof e.stack)return!1;if(!e.stack.includes("unknown"))return!1;return e.message.includes("Cannot set properties of undefined (setting 'innerText')")}(e)||function(e){return"WebSocket connection failed for host: wss://relay.walletconnect.org"===e.message}(e)||function(e){if("string"!=typeof e.message)return!1;if("string"!=typeof e.stack)return!1;if("Failed to fetch"!==e.message)return!1;return e.stack.includes("doubleclick.net")}(e)||function(e){if("string"!=typeof e.message)return!1;if("string"!=typeof e.stack)return!1;if(!e.message.includes("evaluating 'Object.prototype.hasOwnProperty.call(o,\"telephone\")'"))return!1;return e.stack.includes("extractSchemaValuesFromJSONLD")}(e))}const p={blocking:{path:void 0,numEntries:void 0},nonBlocking:{path:void 0,numEntries:void 0}};function f(e){if("undefined"==typeof window)return!1;if(void 0===window?.history||void 0===window?.location)return!1;const t=window.location.pathname,r=window.history.length,i=p[e].path,n=p[e].numEntries;return t===i&&n===r||(p[e].path=t,p[e].numEntries=r,!1)}const m=!(0,o.Y)();let y;function g({apiKey:e,project:t,appVersion:r,releaseStage:o,beforeSend:s,isEnabled:d=!0}){const p=d&&m&&!!e;return y=(0,n.S1)({apiKey:e,environment:o,appVersion:r,appName:t,maxEvents:50,beforeSend:(e,r)=>!!p&&(!function(e,t){const r=Boolean(e.message&&(e.message.includes("Minified React error #418;")||e.message.includes("Minified React error #421;")||e.message.includes("Minified React error #422;")||e.message.includes("Minified React error #425;")));if(!r)return!1;return Math.random()<.9}(e)&&("marketing"===t&&function(e){if(!e)return!1;if("unhandled error - additionally no Error object caught"!==e.message)return!1;if(!Object.prototype.hasOwnProperty.call(e,"cause"))return!1;if(!Object.prototype.hasOwnProperty.call(e.cause,"isTrusted"))return!1;return!1===e.cause.isTrusted}(e)?((0,i.HR)({metricName:"error_from_untrusted_event",metricType:i.t0.count,value:1}),!1):!l(e)&&(!!(0,a.Uv)(e,r)&&(!u(e)&&(c(e)&&(r.severity="warning"),r.isUserVisible?r.isFirstBoundaryErrorInPage=!f("blocking"):"error"===r.severity&&(r.isFirstNonBlockingErrorInPage=!f("nonBlocking")),s?.(e,r),t&&(r.project=t),"undefined"!=typeof window&&window.FS?.getCurrentSessionURL&&(r.fullstorySessionUrl=window.FS.getCurrentSessionURL(!0)),!0))))),getUserContext:i.r1,useGlobalHandlers:!0,beforeSession:()=>!!p}),y}function _(){return y}},788:(e,t,r)=>{r.d(t,{Y:()=>n});const i=[25,50,100,250,500,1e3,2500];function n(){const e={};navigator.hardwareConcurrency&&(e.hardwareConcurrency=`${navigator.hardwareConcurrency}`);const t=navigator.connection?.rtt??-1;let r="";if(t>-1){for(const e of i)if(t<=e){r=`${e}`;break}""===r&&(r="2500+"),e.rttGroup=r}return e}},2307:(e,t,r)=>{function i(e){if(e)return"amount"in e?{value:Number(e.amount),currency:e.currency}:"value"in e?{value:Number(e.value),currency:e.currency}:void 0}r.d(t,{q:()=>i})},156:(e,t,r)=>{r.d(t,{HO:()=>i.H,ad:()=>n.a,Xv:()=>o.Xv,Fy:()=>a.F,cB:()=>o.cB});var i=r(4016),n=r(876),o=(r(1864),r(485),r(1863),r(96)),a=(r(290),r(376));r(1091),r(886)},1863:(e,t,r)=>{r.d(t,{Y:()=>n});var i=r(138);function n(){return"undefined"!=typeof window?!!window.__FUNCTIONAL_TEST__:void 0!==i&&"true"==={NODE_ENV:"production",NODE_DEBUG:void 0}.FUNCTIONAL_TEST}},96:(e,t,r)=>{r.d(t,{$p:()=>m,Uv:()=>h,Xv:()=>g,ZP:()=>b,cB:()=>b});var i=r(7),n=r(3),o=r(886),a=(r(1864),r(485),r(376)),s=r(1091),c=r(494);const d=["owner","context","severity","componentStack","isNetworkError","isBoundaryError","skipAnalytics","isHandled"];function u(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return!!e&&("RelayNetwork"===e?.name||(!!e?.message?.includes("Relay: Missing @required")||("NetworkError"===e.error?.name||(e instanceof n.F7||("ApiError"===e.error?.name||(e instanceof n.MS||("Failed to fetch"===e?.message||(!!e.apiError||(!!t?.apiError||(!(!Object.prototype.hasOwnProperty.call(e,"statusCode")||e.statusCode&&isNaN(parseInt(e.statusCode)))||!(!Object.prototype.hasOwnProperty.call(e,"code")||e.code&&isNaN(parseInt(e.code)))))))))))))}function y(e){return!!e&&Boolean(Object.prototype.hasOwnProperty.call(e,"statusCode")||Object.prototype.hasOwnProperty.call(e,"code"))}function g(e){if(!e)return new Error("getErrorInstance called without an error");if("string"==typeof e&&e.trim().length>0)return new Error(e.trim());if(e instanceof Error)return e;if("object"==typeof e&&null!==e){if("message"in e&&"string"==typeof e.message)return new Error(e.message);if("error"in e&&"object"==typeof e.error&&null!==e.error&&"message"in e.error&&"string"==typeof e.error.message)return new Error(e.error.message);if("alreadyReportedError"in e&&e.alreadyReportedError instanceof Error)return e.alreadyReportedError}return y(e)?new Error("Networking error"):new Error("getErrorInstance called with an unknown error")}const _=new Set(["invalid_token","authentication_error","identity_verification_required","expired_token"]);function h(e,t){if(!e)return!1;if(function(e,t={}){return!!e&&(e instanceof n.F7||!(!Object.prototype.hasOwnProperty.call(t,"statusCode")||"ECONNABORTED"!==t.statusCode)||!!y(e)&&(null===e.statusCode||null===e.status))}(e,t))return!1;if(t?.isNetworkError&&401===t?.statusCode)return!1;if(t?.isNetworkError&&403===t?.statusCode)return(0,i.HR)({metricName:"403_error",metricType:i.t0.count,value:1}),!1;if("object"==typeof e&&null!==e){if("error"in e&&"object"==typeof e.error&&null!==e.error&&"message"in e.error&&"string"==typeof e.error.message&&e.error.message.includes("Unauthenticated request"))return!1;if("id"in e&&"string"==typeof e.id)return!_.has(e?.id)}return!0}function b(e,t){let r=t.owner,l=t.context,f=t.severity,y=void 0===f?"error":f,_=(t.componentStack,t.isNetworkError),b=void 0!==_&&_,v=t.isBoundaryError,k=void 0!==v&&v,w=t.skipAnalytics,C=void 0!==w&&w,x=t.isHandled,S=void 0!==x&&x,I=u(t,d);const E=(0,a.F)();if(!E)return;const T=p(p(p({},function(e){return e?e instanceof n.F7?{}:e instanceof n.MS?{statusCode:e.meta.statusCode,requestId:e.meta.requestId,cfRay:e.meta.cfRay,response:e.responseJson?.errors?.[0]}:e?.apiError?{statusCode:e?.apiError.statusCode,requestId:e?.apiError.requestId,cfRay:e?.apiError.cfRay}:Boolean(Object.prototype.hasOwnProperty.call(e,"statusCode")||Object.prototype.hasOwnProperty.call(e,"code"))?{statusCode:e.statusCode||e.code,requestId:e.requestId,cfRay:e.cfRay}:e?p({},e):{}:{}}(e)),I),{},{userErrorCode:k?(0,s.Z)(e):(0,c.Q)(e),isBoundaryError:k,isNetworkError:b||m(e,I),owner:r});if(!h(e,T))return;"error"!==y||C||function(e){(0,i.HR)({metricName:"web_error_report",metricType:i.t0.count,value:1,tags:{is_network_error:e.isNetworkError,is_boundary_error:e.isBoundaryError,owner:e.owner}})}(T);const j=k,A=p(p({},T),{},{isNetworkRelated:T.isNetworkError,severity:y,isHandled:S,isUserVisible:j,context:l}),P=g(e);E.logError(P,A);const O=(0,o.l)("COINBASE_PUBLIC_BUGSNAG_BOUNDARY_ERROR_ONLY_API_KEY");j&&O&&E.logError(P,p(p({},A),{},{apiKey:O}))}},1385:(e,t,r)=>{function i(e){window.requestIdleCallback?window.requestIdleCallback(e):window.requestAnimationFrame(e)}r.d(t,{Z:()=>i})},1091:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(2305),n=r(3),o=r(494);const a="ERROR";function s(e){const t=(0,o.Q)(e);if(t)return t;let r;if((0,n.CW)(e)){const t=e?.queryError?.graphqlErrors?.find((e=>e.extensions?.errorMetadata?.userErrorCode))?.extensions?.errorMetadata?.userErrorCode;t!==a&&(r=t)}return r||(r=`W-${(0,i.Z)().split("-")[0].toUpperCase()}`),Object.assign(e,{userErrorCode:r}),r}},494:(e,t,r)=>{function i(e){return e&&"object"==typeof e&&"userErrorCode"in e&&"string"==typeof e.userErrorCode?e.userErrorCode:void 0}r.d(t,{Q:()=>i})},485:(e,t,r)=>{r.d(t,{Q:()=>i.Q});var i=r(494);r(1091)},2353:(e,t,r)=>{r.d(t,{By:()=>de,q1:()=>xt,tM:()=>Ct,xw:()=>mt,zt:()=>G});r(292);var i=r(0),n=r(144),o=r.n(n),a=r(2117),s=r(2),c=r(11),d=r(9),u=r(269),l=r(35),p=r(340),f=r(19),m=r(54),y=r(14),g=r(95),_=r(10),h=r(213),b=r(178),v=r(16),k=r(108),w=r(38);const C=["children","initialValues"],x=["theme"];function S(e,t){return D(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],c=!0,d=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw n}}return s}}(e,t)||P(e,t)||A()}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){return D(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||A()}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function D(e){if(Array.isArray(e))return e}function M(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const B="cm_eu_preferences",N="cm_default_preferences",R=["necessary","functional","performance","targeting"],U=[B,N],q=[{region:"DEFAULT",framework:"optOut"},{region:"EU",framework:"optIn"}],L=e=>{const t={};return Object.keys(e).forEach((r=>{try{t[r]=JSON.parse(e[r])}catch(i){t[r]=e[r]}})),t};let F,V=[];"undefined"!=typeof window&&(F=document.cookie,setInterval((()=>{F!==document.cookie&&(F=document.cookie,V.forEach((e=>e())))}),500));const H=e=>{const t=(0,i.useMemo)((()=>({getCurrentValue:()=>{return t=e,"undefined"==typeof window&&t?L(t):L(o().get()||{});var t},subscribe:e=>function(e){return V.push(e),()=>{V=V.filter((t=>t!==e))}}(e)})),[e]);return(0,a.useSubscription)(t)},W=(0,i.createContext)(null),z=()=>{const e=(0,i.useContext)(W);if(!e)throw new Error("Cookie manager not provided");return e};function G(e){let t=e.children,r=e.initialValues,i=M(e,C);return(0,s.jsx)(W.Provider,{value:i,children:(0,s.jsx)(ne,{initialValues:r,children:t})})}const Z=e=>{const t=q.find((t=>t.region===e));if(!t){const e=q.find((e=>"DEFAULT"===e.region));return!!e?.framework&&"optOut"===e.framework}return"optOut"===t.framework},Y=(e,t)=>{if(!Z(e)){return{region:e,consent:t.categories.map((e=>{if(e.required)return e.id})).filter((e=>!!e))}}return{region:e,consent:t.categories.map((e=>e.id)).filter((e=>"delete-if-seen"!==e))}};function K(){if("undefined"!=typeof window)return window.location.hostname}function $(){const e=K();if(!e)return;if("localhost"===e)return e;return`.${j(e.split(".")).slice(1).join(".")}`}const J=(e,t)=>{if(e.regex){return new RegExp(e.regex).test(t)}return e.id===t},Q=(e,t)=>t.categories.find((t=>t.trackers.find((t=>J(t,e))))),X=(e,t)=>{const r=Q(e,t);return r?.trackers.find((t=>J(t,e)))},ee=(e,t,r)=>{const i=Q(e,t);return!!U.includes(e)||!!i&&(!!i.required||r.consent.includes(i.id))},te=(e,t)=>2*e.length/1e3>t,re=(e,t)=>{if("undefined"!=typeof window){window.dataLayer||(window.dataLayer=[]);const r=[{consent:e.consent},{adConsent:t.value.toString()}];window.dataLayer.push(...r)}},ie=(0,i.createContext)([{}]);function ne({children:e,initialValues:t}){const r=z(),n=r.config,a=r.region,c=r.shadowMode,d=r.log,u=r.onPreferenceChange,l=(0,i.useCallback)((e=>{e.forEach((e=>{c||(o().remove(e,{domain:$(),path:"/"}),o().remove(e,{domain:K(),path:"/"})),d("Cookie does not have consent and will be removed",{cookie:e})}))}),[c,d]),p=H(t),f=ae(p,a,n),m=ce(p);return(0,i.useEffect)((()=>{re(f,m)}),[]),(0,i.useEffect)((()=>{const e=[];Object.keys(p).forEach((t=>{const r=X(t,n);U.includes(t)||r&&(ee(t,n,f)||"cookie"!==r.type)||e.push(t)})),l(e)}),[p]),(0,i.useEffect)((()=>{u&&u(f)}),[]),(0,s.jsx)(ie.Provider,{value:p,children:e})}const oe=({cookieName:e,trackingPreference:t,config:r,shadowMode:i,log:n,onError:a})=>(s,c)=>{if(null==s)return void o().remove(e,c);const d=ee(e,r,t);if(d||i){const t=JSON.stringify(s),r=c?.size??4;if(te(encodeURIComponent(t)+e,r))a(new Error(`${e} value exceeds ${r}KB`));else{const r=c?E({},c):void 0;r?.size&&delete r.size,o().set(e,t,r)}}d||n("Cookie does not have consent and will not be set",{cookie:e})},ae=(e,t,r)=>("EU"===t?e[B]:e[N])||Y(t,r),se={value:"true"},ce=e=>e.advertising_sharing_allowed||se,de=e=>{const t=(0,i.useContext)(ie),r=z(),n=r.config,o=r.region,a=r.log,s=r.shadowMode,c=r.onError,d=ae(t,o,n),u=oe({cookieName:e,trackingPreference:d,config:n,log:a,shadowMode:s,onError:c});return[(0,i.useContext)(ie)[e],u]};function ue(){try{const e=new URLSearchParams(window.location.search),t="true"===e.get("is_mobile_app"),r="true"===e.get("app_tracking_transparency_enabled");return Boolean(r||t)}catch(e){}return!1}const le=()=>{const e=z(),t=e.region,r=e.onError,i=S(de(B),1)[0],n=S(de(N),1)[0],o="EU"===t?i:n;if(o){if(o.region&&o.consent)return o;r(new Error("Malformed preferences"))}},pe=()=>{const e=le(),t=z(),r=t.region,i=t.config;return e||Y(r,i)},fe=(e,t,r,i)=>{const n={expires:365,domain:$(),path:"/"};e("EU"===r?B:N,t,n),i&&i(t)},me=()=>z().config.categories.filter((e=>e.required)).reduce(((e,t)=>[...e,t.id]),[]),ye=()=>{const e=z(),t=e.region,r=e.onPreferenceChange,n=e.onError,o=(()=>{const e=(0,i.useContext)(ie),t=z(),r=t.config,n=t.region,o=t.log,a=t.shadowMode,s=t.onError,c=ae(e,n,r);return(0,i.useCallback)(((e,t,i)=>{oe({cookieName:e,trackingPreference:c,config:r,log:o,shadowMode:a,onError:s})(t,i)}),[c,r,o,a,s])})(),a=me();return(0,i.useCallback)((e=>{const i=e;a.forEach((t=>{e.consent.includes(t)||(n(new Error(`Trying to remove category ${t} that is required`)),i.consent=[...e.consent,t])})),fe(o,i,t,r)}),[r,t,o,a,n])};const ge={colors:{primary:"#1652F0",positive:"#05B169",negative:"#DF5F67",warning:"#F4C622",background:"#FFFFFF",backgroundMuted:"#FAFBFC",onBackground:"#050F1A",onBackgroundMuted:"#708599",onPrimary:"#FFFFFF",overlay:"rgba(17,52,83,0.6)"},border:{border:"1px solid #D8D8D8",borderRadius:"4px"},fontSize:{sm:"14px",md:"16px"},fontWeight:{regular:"400",bold:"500"},size:{xs:"8px",sm:"16px",md:"24px",lg:"32px"},breakpoints:{phone:560,desktop:992,tablet:768},zIndex:{hidden:-1,normal:0,elevated:1,high:2,extraHigh:25,backdrop:999,overlay:1e3,top:1001}},_e=(e,t=100)=>{const r=S((0,i.useState)(!e),2),n=r[0],o=r[1];(0,i.useEffect)((()=>{const r=setTimeout((()=>o(e)),t);return()=>clearTimeout(r)}),[e]);return[n,(0,i.useCallback)((e=>{o(!1),e&&setTimeout(e,t)}),[t])]},he=(0,c.vU)({defaultBannerDescription:{id:"CookieManager.defaultBannerDescription",defaultMessage:"We use cookies and similar technologies on our websites to enhance and tailor your experience, analyze our traffic, and for security and marketing. You can choose not to allow some type of cookies by clicking <button>Manage Settings</button>. For more information see our <link>Cookie Policy</link>."},euBannerDescription:{id:"CookieManager.euBannerDescription",defaultMessage:'We use cookies and similar technologies on our websites to enhance and tailor your experience, analyze our traffic, and for security and marketing. Select "Accept All" to allow Coinbase and its trusted affiliates and partners to use cookies and similar technologies or click <button>Manage Settings</button> to individually select which cookies you allow. You can withdraw your consent at any time. For more information see our <link>Cookie Policy</link>.'},bannerSettingsCTA:{id:"CookieManager.bannerSettingsCTA",defaultMessage:"Manage settings"},bannerCloseCTA:{id:"CookieManager.bannerCloseCTA",defaultMessage:"Close"},bannerDismissCTA:{id:"CookieManager.bannerDismissCTA",defaultMessage:"Dismiss"},bannerAcceptCTA:{id:"CookieManager.bannerAcceptCTA",defaultMessage:"Accept all"},modalTitle:{id:"CookieManager.modalTitle",defaultMessage:"Cookie preferences"},modalDescription:{id:"CookieManager.modalDescription",defaultMessage:"When you visit our website, we may store cookies on your browser for your security and to help us better understand user behavior and inform us about which parts of our website you have visited. The information does not usually directly identify you, but it can give you a safe and more personalized web experience. Because we respect your right to privacy, you can choose not to allow some types of cookies. Blocking some types of cookies may impact your experience on the site. <link>Cookie Policy</link>"},manageCookies:{id:"CookieManager.manageCookies",defaultMessage:"Manage Cookies:"},necessaryCookies:{id:"CookieManager.necessaryCookies",defaultMessage:"Strictly Necessary Cookies"},necessaryCookiesDescription:{id:"CookieManager.necessaryCookiesDescription",defaultMessage:"These cookies are necessary for the website to function and cannot be switched off in our systems. They are usually only set in response to actions made by you which amount to a request for services, such as setting your privacy preferences, logging in or filling in forms. These also include cookies we may rely on for fraud prevention. You can set your browser to block or alert you about these cookies, but some parts of the site will not then work."},performanceCookies:{id:"CookieManager.performanceCookies",defaultMessage:"Performance Cookies"},performanceCookiesDescription:{id:"CookieManager.performanceCookiesDescription",defaultMessage:"These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site. They help us to know which pages are the most and least popular and see how visitors move around the site. All information these cookies collect is aggregated and therefore anonymous. If you do not allow these cookies we will not know when you have visited our site, and will not be able to monitor its performance."},functionalCookies:{id:"CookieManager.functionalCookies",defaultMessage:"Functional Cookies"},functionalCookiesDescription:{id:"CookieManager.functionalCookiesDescription",defaultMessage:"These cookies enable us to remember choices you have made in the past in order to provide enhanced functionality and personalisation (e.g. what language you prefer). If you do not allow these cookies then some or all of these services may not function properly."},targetingCookies:{id:"CookieManager.targetingCookies",defaultMessage:"Targeting Cookies"},targetingCookiesDescription:{id:"CookieManager.targetingCookiesDescription",defaultMessage:"These cookies may be set through our site by our advertising partners. They may be used by those companies to build a profile of your interests and show you relevant ads on other sites. They do not store directly personal information, but are based on uniquely identifying your browser and internet device. If you do not allow these cookies, you will experience less targeted advertising."},saveCTA:{id:"CookieManager.saveCTA",defaultMessage:"Save"}}),be={labelIds:{necessary:he.necessaryCookies,performance:he.performanceCookies,functional:he.functionalCookies,targeting:he.targetingCookies},contentIds:{necessary:he.necessaryCookiesDescription,performance:he.performanceCookiesDescription,functional:he.functionalCookiesDescription,targeting:he.targetingCookiesDescription}},ve={defaultMessages:E({defaultBannerDescription:he.defaultBannerDescription,bannerSettingsCTA:he.bannerSettingsCTA,bannerMainCTA:he.bannerAcceptCTA,bannerDismissCTA:he.bannerDismissCTA,modalTitle:he.modalTitle,modalDescription:he.modalDescription,manageCookies:he.manageCookies,saveCTA:he.saveCTA,bannerCloseCTA:he.bannerCloseCTA},be),euMessages:E({defaultBannerDescription:he.euBannerDescription,bannerSettingsCTA:he.bannerSettingsCTA,bannerMainCTA:he.bannerAcceptCTA,bannerDismissCTA:he.bannerDismissCTA,modalTitle:he.modalTitle,modalDescription:he.modalDescription,manageCookies:he.manageCookies,saveCTA:he.saveCTA,bannerCloseCTA:he.bannerCloseCTA},be)},ke=()=>"EU"===z().region?ve.euMessages:ve.defaultMessages;function we({onDismiss:e,onAccept:t,showPreferencesModal:r,hasDismissed:n}){const o=z().log,a=(0,p.useBreakpoints)().isPhone,c=S(_e(!n,1e3),2),u=c[0],_=c[1];(0,i.useEffect)((()=>{n||o("cookie_consent_footer_viewed")}),[]);const h=(0,i.useCallback)((()=>{o("cookie_consent_footer_dismissed"),_(e)}),[e,_,o]),b=(0,i.useCallback)((()=>{_(t)}),[t,_]),v=(0,d.Z)().formatMessage,k=ke();return n?null:(0,s.jsx)(f.Box,{position:"fixed",bottom:u?0:-300,zIndex:1e3,background:"backgroundAlternate",justifyContent:"center",spacing:2,width:"100%",dangerouslySetStyle:{transition:"bottom 1s"},children:(0,s.jsxs)(f.Box,{flexDirection:a?"column":"row",alignItems:"center",justifyContent:"space-between",children:[(0,s.jsx)(g.TextBody,{as:"p",spacingBottom:a?2:0,spacingEnd:a?0:2,children:v(k.defaultBannerDescription,{link:e=>[(0,s.jsx)(y.Link,{to:"https://www.coinbase.com/legal/cookie#:~:text=Targeting%20purposes,to%20you%20or%20your%20interests.",openInNewWindow:!0,referrerPolicy:"no-referrer",children:e??""})],button:e=>[(0,s.jsx)(y.Link,{variant:"body",underline:!0,onPress:r,children:e??""})]})}),(0,s.jsxs)(m.HStack,{gap:2,alignItems:"center",width:a?"100%":"auto",children:[(0,s.jsx)(l.Button,{onPress:h,compact:!0,variant:"secondary",block:a,children:v(k.bannerCloseCTA)}),(0,s.jsx)(l.Button,{onPress:b,compact:!0,block:a,children:v(k.bannerMainCTA)})]})]})})}const Ce=(0,i.memo)(we);function xe({children:e,color:t="light"}){return(0,s.jsx)(Se,{color:t,href:"https://www.coinbase.com/legal/cookie#:~:text=Targeting%20purposes,to%20you%20or%20your%20interests.",target:"_blank",rel:"noopener",children:e})}const Se=_.ZP.a.withConfig({displayName:"esm__Link",componentId:"sc-1rxtuo-0"})(["text-decoration:underline;color:",";&:visited{color:",";}"],(({theme:e,color:t})=>"foregroundMuted"===t?v.palette.foregroundMuted:"primary"===t?e.colors.primary:e.colors.onBackgroundMuted),(({theme:e,color:t})=>"foregroundMuted"===t?v.palette.foregroundMuted:"primary"===t?e.colors.primary:e.colors.onBackgroundMuted)),Ie=e=>[(0,s.jsx)(xe,{color:"foregroundMuted",children:e},"PrivacyLink")];function Ee({onDismiss:e,showPreferencesModal:t,hasDismissed:r}){const n=z().log;(0,i.useEffect)((()=>{r||n("cookie_consent_footer_viewed")}),[]);const o=(0,i.useCallback)((()=>{n("cookie_consent_footer_dismissed"),e?.()}),[e,n]),a=(0,d.Z)().formatMessage,c=ke();return r?null:(0,s.jsx)(Te,{children:(0,s.jsx)(b.ThemeProvider,{children:(0,s.jsxs)(f.Box,{alignItems:"center",justifyContent:"center",spacing:2,elevation:1,background:!0,children:[(0,s.jsx)(Ae,{children:a(c.defaultBannerDescription,{link:Ie,button:e=>[(0,s.jsx)(Pe,{onClick:t,"aria-haspopup":!0,children:e},"ManageCookieSettingsExpBtn")]})}),(0,s.jsxs)(je,{children:[(0,s.jsx)(h.IconButton,{name:"gear",onPress:t,variant:"primary",accessibilityLabel:a(c.bannerSettingsCTA),transparent:!0}),(0,s.jsx)(h.IconButton,{name:"close",onPress:o,variant:"primary",accessibilityLabel:a(c.bannerDismissCTA),transparent:!0})]})]})})})}const Te=_.ZP.div.withConfig({displayName:"esm__Wrapper1",componentId:"sc-1rxtuo-1"})(["",""],(({theme:e})=>(0,_.iv)(["position:sticky;bottom:0;z-index:",";"],e.zIndex.overlay))),je=_.ZP.div.withConfig({displayName:"esm__CTA",componentId:"sc-1rxtuo-2"})(["",""],(({theme:e})=>(0,_.iv)(["display:flex;align-items:center;@media (max-width:","px){position:absolute;right:",";bottom:",";transform:none;}"],e.breakpoints.tablet,v.spacing[2],v.spacing[.5]))),Ae=_.ZP.div.withConfig({displayName:"esm__DescriptionText",componentId:"sc-1rxtuo-3"})(["",""],(({theme:e})=>(0,_.iv)(["font-size:",";color:",";line-height:",";padding-left:",";padding-right:",";max-width:1000px;@media (max-width:","px){padding:0;padding-bottom:",";}"],e.fontSize.sm,v.palette.foregroundMuted,v.spacing[3],v.spacing[3],v.spacing[10],e.breakpoints.tablet,v.spacing[3]))),Pe=_.ZP.button.withConfig({displayName:"esm__ManageSettingsButton",componentId:"sc-1rxtuo-4"})(["background:transparent;border:none;white-space:nowrap;cursor:pointer;padding:0;text-decoration:underline;color:",";"],v.palette.foregroundMuted),Oe=(0,i.memo)(Ee),De=_.ZP.button.withConfig({displayName:"esm__Button",componentId:"sc-1rxtuo-5"})(["",""],(({theme:e,large:t})=>(0,_.iv)(["background-color:",";font-size:",";color:",";padding:",";border:",";border-color:",";border-radius:",";width:",";cursor:pointer;white-space:nowrap;"],e.colors.primary,e.fontSize.sm,e.colors.onPrimary,t?`${e.size.sm} ${e.size.md}`:`${e.size.xs} ${e.size.md}`,e.border.border,e.colors.primary,e.border.borderRadius,t?"100%":"fit-content"))),Me=_.ZP.div.withConfig({displayName:"esm__Spacer",componentId:"sc-1rxtuo-6"})(["",""],(({theme:e,size:t,vertical:r})=>r?`\n        width: ${e.size[t]};\n        height: 100%;\n        `:`\n        height: ${e.size[t]};\n        width: 100%;\n      `)),Be=_.ZP.span.withConfig({displayName:"esm__Text",componentId:"sc-1rxtuo-7"})(["font-size:",";color:",";font-weight:",";line-height:160%;"],(({theme:e})=>e.size.sm),(({theme:e})=>e.colors.onBackground),(({theme:e,bold:t})=>t?e.fontWeight.bold:e.fontWeight.regular));const Ne=(0,_.ZP)((function({className:e}){return(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[(0,s.jsx)("path",{d:"M8 0C3.59 0 0 3.59 0 8C0 12.41 3.59 16 8 16C12.41 16 16 12.41 16 8C16 3.59 12.41 0 8 0ZM8 15C4.14 15 1 11.86 1 8C1 4.14 4.14 1 8 1C11.86 1 15 4.14 15 8C15 11.86 11.86 15 8 15Z",fill:"#718598"}),(0,s.jsx)("path",{d:"M8.5 7.5H7.5V12H8.5V7.5Z",fill:"#718598"}),(0,s.jsx)("path",{d:"M8.5 4H7.5V6H8.5V4Z",fill:"#718598"})]})})).withConfig({displayName:"esm__InfoIcon",componentId:"sc-1rxtuo-8"})(["cursor:pointer;"]),Re=(0,i.forwardRef)((function({content:e},t){return(0,s.jsx)(Ue,{children:(0,s.jsxs)(qe,{ref:t,children:[(0,s.jsx)(Fe,{}),(0,s.jsx)(Le,{children:e})]})})})),Ue=_.ZP.div.withConfig({displayName:"esm__ToolTipContainer",componentId:"sc-1rxtuo-9"})(["position:relative;"]),qe=_.ZP.div.withConfig({displayName:"esm__Tip",componentId:"sc-1rxtuo-10"})(["position:absolute;bottom:","px;max-width:330px;min-height:90px;background-color:",";border-radius:",";border:1px solid ",";padding:12px;width:max-content;"],18,(({theme:e})=>e.colors.onBackground),(({theme:e})=>e.border.borderRadius),(({theme:e})=>e.colors.onBackground)),Le=_.ZP.span.withConfig({displayName:"esm__TooltipText",componentId:"sc-1rxtuo-11"})(["font-size:12px;line-height:14px;color:",";"],(({theme:e})=>e.colors.background)),Fe=_.ZP.div.withConfig({displayName:"esm__Arrow",componentId:"sc-1rxtuo-12"})(["position:absolute;bottom:-","px;left:calc(50% - ","px);width:0;height:0;border-left:","px solid transparent;border-right:","px solid transparent;border-top:","px solid ",";"],17,8,16,16,18,(({theme:e})=>e.colors.onBackground)),Ve=Re;function He({content:e}){const t=(()=>{const e=S((0,i.useState)(!1),2),t=e[0],r=e[1],n=(0,i.useRef)(null),o=S((0,i.useState)(),2),a=o[0],s=o[1];return(0,i.useEffect)((()=>{if(!n.current)return;if(a||!t)return;const e=n.current.getBoundingClientRect(),r={left:-e.width/2,top:0};window.innerWidth-e.right-r.left<0&&(r.left=Math.round(window.innerWidth-e.right)),e.left+r.left<0&&(r.left=Math.round(Math.abs(e.left))),window.innerHeight-e.bottom<0&&(r.top=Math.round(window.innerHeight-e.bottom)),e.top<0&&(r.top=Math.round(Math.abs(e.top))),s(r)}),[n,t]),{shouldRender:t,setShouldRender:r,tooltipRef:n,offset:a,isVisible:!(!t||!a)}})(),r=t.shouldRender,n=t.setShouldRender,o=t.offset,a=t.tooltipRef,c=t.isVisible;return(0,s.jsxs)(We,{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[r&&(0,s.jsx)(ze,{style:{left:o?.left??0,top:o?.top??0},visible:c,children:(0,s.jsx)(Ve,{content:e,ref:a})},"tooltip"),(0,s.jsx)(Ne,{})]})}const We=_.ZP.div.withConfig({displayName:"esm__Container2",componentId:"sc-1rxtuo-13"})(["&:after{content:'';display:block;position:absolute;width:","px;height:","px;bottom:","px;}"],16,18,18),ze=_.ZP.div.withConfig({displayName:"esm__Wrapper",componentId:"sc-1rxtuo-14"})(["position:relative;opacity:",";transition:opacity 100ms;"],(({visible:e})=>e?"1":"0")),Ge=(0,i.memo)(He);function Ze({name:e}){const t=(0,d.Z)().formatMessage,r=ke();if("delete-if-seen"===e)return null;const i=r.labelIds[e],n=r.contentIds[e];return i&&n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Be,{children:t(i)}),(0,s.jsx)(Me,{size:"sm",vertical:!0}),(0,s.jsx)(Ge,{content:t(n)}),(0,s.jsx)(Me,{size:"xs",vertical:!0})]}):null}const Ye=(0,i.memo)(Ze);const Ke=(0,_.ZP)((function(){return(0,s.jsx)("svg",{width:"14",height:"10",viewBox:"0 0 14 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M1 5.36364L4.75 9L13 1",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})).withConfig({displayName:"esm__CheckIcon",componentId:"sc-1rxtuo-15"})(["fill:",";cursor:pointer;"],(({theme:e})=>e.colors.onPrimary));function $e({onChange:e,disabled:t,checked:r,children:i}){return(0,s.jsxs)(Qe,{children:[(0,s.jsxs)(Xe,{disabled:t,checked:r,children:[r&&(0,s.jsx)(Ke,{}),(0,s.jsx)(Je,{type:"checkbox",checked:r,onClick:t?void 0:()=>{e(!r)},disabled:t})]}),(0,s.jsx)(Me,{size:"xs",vertical:!0}),i]})}const Je=_.ZP.input.withConfig({displayName:"esm__Input",componentId:"sc-1rxtuo-16"})(["position:absolute;opacity:0;",";width:100%;height:100%;margin:0;"],(({disabled:e})=>e?"":"cursor: pointer;")),Qe=_.ZP.div.withConfig({displayName:"esm__Container1",componentId:"sc-1rxtuo-17"})(["display:flex;flex-direction:row;align-items:center;"]),Xe=_.ZP.div.withConfig({displayName:"esm__Box",componentId:"sc-1rxtuo-18"})(["position:relative;display:flex;align-items:center;justify-content:center;background-color:",";",";",";border-radius:3px;border:",";width:",";height:",";"],(({theme:e,checked:t})=>t?e.colors.primary:e.colors.background),(({disabled:e})=>e&&"opacity: 50%;"),(({disabled:e})=>e?"":"cursor: pointer;"),(({theme:e})=>e.border.border),(({theme:e})=>e.size.md),(({theme:e})=>e.size.md)),et=(0,_.ZP)((({size:e="16",className:t,onClick:r})=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:e,height:e,className:t,onClick:r,children:(0,s.jsxs)("g",{children:[(0,s.jsx)("polygon",{points:"18.096 19.174 19.497 17.747 1.7 .286 .3 1.714"}),(0,s.jsx)("polygon",{points:"19.497 1.714 18.096 .286 .3 17.747 1.7 19.174"})]})}))).withConfig({displayName:"esm__CloseIcon",componentId:"sc-1rxtuo-19"})(["fill:",";cursor:pointer;transition:fill 0.15s ease;&:hover{fill:",";}"],(({inverted:e,theme:t})=>e?t.colors.background:t.colors.onBackgroundMuted),(({theme:e,inverted:t})=>t?e.colors.background:e.colors.onBackground));function tt(e){const t=e.children,r=e.close,n=e.title,o=e.isOpen,a=(0,i.useRef)(null),c=(0,i.useRef)(null);(0,i.useEffect)((()=>("undefined"!=typeof document&&(a.current=document.createElement("div"),document.body&&document.body.appendChild(a.current)),()=>{"undefined"!=typeof document&&document.body&&document.body.removeChild(a.current)})),[]);const d=S(_e(o),2),u=d[0],l=d[1],p=(0,i.useCallback)((()=>{l(r)}),[l,r]),f=(0,i.useCallback)((e=>{c.current?.contains(e.target)||p()}),[p]);return a.current&&o?k.createPortal((0,s.jsx)(rt,{onClick:f,visible:u,children:(0,s.jsxs)(st,{ref:c,children:[(0,s.jsx)(it,{close:p,title:n}),(0,s.jsx)(nt,{children:t})]})}),a.current):null}const rt=_.ZP.div.withConfig({displayName:"esm__Overlay",componentId:"sc-1rxtuo-20"})(["width:100%;height:100%;background-color:",";display:flex;justify-content:center;align-items:flex-start;overflow:scroll;position:fixed;top:0;left:0;opacity:",";transition:opacity ","ms;z-index:",";"],(({theme:e})=>e.colors.overlay),(({visible:e})=>e?"1":"0"),100,(({theme:e})=>e.zIndex.overlay));function it({title:e,close:t}){return(0,s.jsxs)(ot,{children:[e&&(0,s.jsx)(at,{"data-synthetic-id":"modal_cookies",children:e}),t&&(0,s.jsx)(et,{onClick:t})]})}const nt=_.ZP.div.withConfig({displayName:"esm__ModalBody",componentId:"sc-1rxtuo-21"})(["display:flex;padding:",";"],(({theme:e})=>`${e.size.lg} ${e.size.md}`)),ot=_.ZP.div.withConfig({displayName:"esm__Header",componentId:"sc-1rxtuo-22"})(["display:flex;position:relative;min-height:64px;padding:",";border-bottom:",";justify-content:space-between;align-items:center;box-sizing:border-box;"],(e=>e.theme.size.md),(e=>e.theme.border.border)),at=_.ZP.span.withConfig({displayName:"esm__Title",componentId:"sc-1rxtuo-23"})(["position:relative;font-size:18px;font-weight:500;color:",";"],(e=>e.theme.colors.onBackground)),st=_.ZP.div.withConfig({displayName:"esm__ModalContainer",componentId:"sc-1rxtuo-24"})(["height:auto;margin:100px 0 24px;min-width:480px;border:none;border-radius:",";background-color:",";box-shadow:0px 0px 4px rgba(0,0,0,0.1);overflow:visible;@media (max-width:","px){min-width:auto;position:fixed;left:0;right:0;top:0;bottom:0;margin:auto 0;border-radius:0;overflow:scroll;-webkit-overflow-scrolling:touch;}"],(({theme:e})=>e.border.borderRadius),(({theme:e})=>e.colors.background),(({theme:e})=>e.breakpoints.phone));let ct;const dt=()=>{const e=z(),t=e.onError,r=e.locale,n=(0,i.useRef)(),o=S((0,i.useState)(!!ct),2),a=o[0],s=o[1],c=S((0,i.useState)(ct||{}),2),d=c[0],u=c[1],l=(0,i.useCallback)((({newTranslations:e={},newLocale:t})=>{n.current=t,u(e),ct=e,s(!0)}),[u,s]),p=(0,i.useCallback)((()=>{u({}),ct=void 0,s(!1)}),[u,s]);return(0,i.useEffect)((()=>{let e=!0;const i=["en","en-US"].includes(r);return i||n.current===r?i&&l({newLocale:r}):(p(),async function(){try{const t=await fetch(`https://translations.coinbase.com/aab9bdc6d/latest/${r}/cookie-manager-messages.json`);if(!t.ok)throw new Error("Missing translations");{const i=await t.json(),n={};Object.keys(i).forEach((e=>{n[e]=i[e].defaultMessage})),e&&l({newTranslations:n,newLocale:r})}}catch(i){t(i),e&&l({newLocale:r})}}()),()=>{e=!1}}),[t,r]),[a,d]};function ut({children:e,theme:t}){const r=z().locale,i=S(dt(),2),n=i[0],o=i[1];return n?(0,s.jsx)(w.FeatureFlagProvider,{frontier:!0,children:(0,s.jsx)(u.Z,{messages:o||{},locale:r,children:(0,s.jsx)(_.f6,{theme:t,children:e})})}):null}function lt(e,t){switch(t.value){case!0:return e.consent.includes(t.name)?e:E(E({},e),{},{consent:[...e.consent,t.name]});case!1:return E(E({},e),{},{consent:e.consent.filter((e=>e!==t.name))});default:return e}}const pt=e=>[(0,s.jsx)(xe,{color:"primary",children:e},"CookieLink")];function ft({onClose:e,isOpen:t}){const r=z(),n=r.region,o=r.log;(0,i.useEffect)((()=>{t&&o("cookie_consent_manager_viewed")}),[t]);const a=(0,d.Z)().formatMessage,c=ke(),u=pe(),l=u.consent,p=S((0,i.useReducer)(lt,{consent:l,region:n}),2),f=p[0],m=p[1],y=me(),g=ye(),_=(0,i.useCallback)((e=>{const t={};return R.forEach((r=>{t[r]=e.consent.includes(r)?1:0})),t}),[]),h=(0,i.useCallback)((()=>{g(f),o("cookie_consent_manager_save_tapped",_(f)),e()}),[g,e,f,o,_]),b=(0,i.useCallback)((()=>{g(u),o("cookie_consent_manager_dismissed",_(u)),e()}),[g,u,e,o,_]);return(0,s.jsx)(tt,{close:b,isOpen:t,title:a(c.modalTitle),children:(0,s.jsxs)(ht,{children:[(0,s.jsx)(Be,{children:a(c.modalDescription,{link:pt})}),(0,s.jsx)(Me,{size:"md"}),(0,s.jsx)(Be,{bold:!0,children:a(c.manageCookies)}),(0,s.jsx)(Me,{size:"sm"}),(0,s.jsx)(gt,{children:R.map((e=>(0,s.jsx)(yt,{children:(0,s.jsx)($e,{disabled:y.includes(e),checked:f.consent.includes(e),onChange:t=>m({name:e,value:t}),children:(0,s.jsx)(Ye,{name:e})})},e)))}),(0,s.jsx)(Me,{size:"lg"}),(0,s.jsx)(_t,{children:(0,s.jsx)(De,{onClick:h,large:!0,children:a(c.saveCTA)})})]})})}function mt(e){let t=e.theme,r=M(e,x);return(0,s.jsx)(ut,{theme:t||ge,children:(0,s.jsx)(ft,E({},r))})}const yt=_.ZP.div.withConfig({displayName:"esm__CheckBoxContainer",componentId:"sc-1rxtuo-25"})(["width:50%;margin-bottom:",";@media (max-width:","px){width:100%;}"],(({theme:e})=>e.size.md),(({theme:e})=>e.breakpoints.phone)),gt=_.ZP.div.withConfig({displayName:"esm__CategoryContainer",componentId:"sc-1rxtuo-26"})(["display:flex;flex-wrap:wrap;"]),_t=_.ZP.div.withConfig({displayName:"esm__ButtonContainer",componentId:"sc-1rxtuo-27"})(["display:flex;justify-content:center;"]),ht=_.ZP.div.withConfig({displayName:"esm__Container",componentId:"sc-1rxtuo-28"})(["display:flex;flex-direction:column;max-width:560px;"]),bt=(0,i.memo)(ft),vt={expires:365,domain:$(),path:"/"},kt=()=>{const e=le(),t=(()=>{const e=z().region,t=S(de("is_mobile_app"),1)[0],r=(0,i.useMemo)((()=>ue()),[]),n=t||r||!!window.isWebView;return(0,i.useMemo)((()=>{if(n)return{region:e,consent:["necessary"]}}),[n,e])})(),r=e||t,n=S((0,i.useState)(!1),2),o=n[0],a=n[1],s=S((0,i.useState)(!!r),2),c=s[0],d=s[1],u=z(),l=u.region,p=u.config,f=Z(l),m=Y(l,p),y=ye(),g=S(de("advertising_sharing_allowed"),2)[1],_=(0,i.useCallback)((()=>{f&&!r&&y(m),d(!0)}),[m,f,y,r]),h=(0,i.useCallback)((()=>{const e=Y("DEFAULT",p);y({region:l,consent:e.consent}),d(!0)}),[p,y,l]),b=(0,i.useCallback)((()=>{d(!0),a(!1)}),[a,d]),v=(0,i.useCallback)((()=>{a(!0)}),[a]),k=Boolean(!e&&t);return(0,i.useEffect)((()=>{if(k&&t){!function(){try{(ue()||window.isWebView)&&(document.cookie="is_mobile_app=true; domain=.coinbase.com")}catch(e){}}();const e=!1,r=Date.now();g({value:e,updatedAt:r},vt),y(t)}}),[k]),{hasDismissed:c,handleBannerDismiss:_,handleAcceptAll:h,closeModal:b,isModalOpen:o,openModal:v}};function wt({theme:e,isExperimentalBanner:t}){const r=kt(),i=r.hasDismissed,n=r.handleBannerDismiss,o=r.handleAcceptAll,a=r.closeModal,c=r.openModal,d=r.isModalOpen;return(0,s.jsxs)(ut,{theme:e||ge,children:[(0,s.jsx)(bt,{onClose:a,isOpen:d}),t?(0,s.jsx)(Oe,{onDismiss:n,showPreferencesModal:c,hasDismissed:i}):(0,s.jsx)(Ce,{onDismiss:n,onAccept:o,showPreferencesModal:c,hasDismissed:i})]})}const Ct=(0,i.memo)(wt),xt={categories:[{id:"necessary",required:!0,trackers:[{id:"__cfduid",type:"cookie"},{id:"cb_dm",type:"cookie"},{id:"__cfruid",type:"cookie"},{id:"oauth-state-cookie",type:"cookie"},{id:"ip_country",type:"cookie"},{id:"_cfuvid",type:"cookie"},{id:"cds-ffs",type:"cookie"},{id:"cc_dashboard_session",type:"cookie"},{id:"cc_locale_flag",type:"cookie"},{id:"logged_in",type:"cookie"},{id:"cb-gssc_development",type:"cookie"},{id:"cb-gssc_staging",type:"cookie"},{id:"cb-gssc",type:"cookie"},{id:"_coinbase_session",type:"cookie"},{id:"advertising_sharing_allowed",type:"cookie"},{id:"__ssid",type:"cookie"},{id:"cf_ob_info",type:"cookie"},{id:"df2",type:"cookie"},{id:"df",type:"cookie"},{id:"ba",type:"cookie"},{id:"cf_use_ob",type:"cookie"},{id:"_coinbase_lax",type:"cookie"},{id:"_coinbase_strict",type:"cookie"},{id:"jwt",type:"cookie"},{id:"sft",type:"cookie"},{id:"japan_bespoke_content",type:"cookie"},{id:"utm",type:"cookie"},{id:"utm_raw",type:"cookie"},{id:"user_agent",type:"cookie"},{id:"__cf_bm",type:"cookie"},{id:"CB-CLIENT",type:"cookie"},{id:"cb_test_cookie",type:"cookie"},{id:"is_mobile_app",type:"cookie"}]},{id:"performance",trackers:[{id:"cb-rfm",type:"cookie"},{id:"ajs_anonymous_id",type:"cookie"},{id:"__tld__",type:"cookie"},{id:"ajs%3Acookies",type:"cookie"},{id:"ajs%3Atest",type:"cookie"},{id:"ajs_group_id",type:"cookie"},{id:"coinbase_device_id",type:"cookie"},{id:"amplitude_device_id",type:"cookie"},{id:"_gat",type:"cookie"},{id:"_gac_UA-regex",type:"cookie",regex:"_gac_UA-[0-9]+-[0-9]+"},{id:"_ga_regex",type:"cookie",regex:"_ga_[a-zA-Z0-9]{10}"},{id:"_gid",type:"cookie"},{id:"_ga",type:"cookie"},{id:"JSESSIONID",type:"cookie"},{id:"cf_chl_rc_i",type:"cookie"},{id:"dtcookie",type:"cookie"},{id:"perf_dv5",type:"cookie"},{id:"rl_anonymous_id",type:"cookie"},{id:"rl_user_id",type:"cookie"},{id:"rl_group_id",type:"cookie"},{id:"AMCV_regex",type:"cookie",regex:"AMCV_(?:[0-9A-Z]+)@AdobeOrg"},{id:"LPVID",type:"cookie"},{id:"__profilin",type:"cookie"},{id:"amp_regex",type:"cookie",regex:"amp_[0-9a-z]{6}"},{id:"LPSID-regex",type:"cookie",regex:"LPSID-[0-9]+"},{id:"_hp2_id.regex",type:"cookie",regex:"_hp2_id.[0-9]+"},{id:"__utma",type:"cookie"},{id:"x-login-id",type:"cookie"},{id:"x-uuid",type:"cookie"}]},{id:"functional",trackers:[{id:"_parsely_visitor",type:"cookie"},{id:"advanced_color_theme",type:"cookie"},{id:"hide_advanced_mode_nux",type:"cookie"},{id:"futures_hide_first_trade_onboarding_spotlight",type:"cookie"},{id:"futures_hide_after_first_trade_spotlight",type:"cookie"},{id:"has_seen_perpetual_margin_health_banner_regex",type:"cookie",regex:"has_seen_perpetual_margin_health_banner_(.*)"},{id:"has_seen_advanced_mode_tooltip",type:"cookie"},{id:"hide_usdc_banner",type:"cookie"},{id:"has_seen_order_form_nux_tooltip",type:"cookie"},{id:"has_seen_advanced_fees_pricing_banner",type:"cookie"},{id:"has_seen_zero_fee_incentive_banner",type:"cookie"},{id:"has_submitted_prime_resources_interest_form",type:"cookie"},{id:"has_submitted_leadgen_form",type:"cookie"},{id:"price_chart_resolution",type:"cookie"},{id:"optimizelyEndUserId",type:"cookie"},{id:"coinbase_locale",type:"cookie"},{id:"cb_logged_out_locale",type:"cookie"},{id:"coinbase_currency",type:"cookie"},{id:"hide_country_banner",type:"cookie"},{id:"hide_cookies_message",type:"cookie"},{id:"hide_android_banner",type:"cookie"},{id:"plaid_oauth_data",type:"cookie"},{id:"bytes_signup_modal_viewed",type:"cookie"},{id:"cached_locale",type:"cookie"},{id:"rlm_asset_page_view_count",type:"cookie"},{id:"rlm_dismissed",type:"cookie"},{id:"has_seen_fee_upgrade_banner",type:"cookie"},{id:"cb-sut",type:"cookie"}]},{id:"targeting",trackers:[{id:"gclid",type:"cookie"},{id:"_uetvid",type:"cookie"},{id:"_uetsid",type:"cookie"},{id:"MUID",type:"cookie"},{id:"fbclid",type:"cookie"},{id:"_gat_gtag_",type:"cookie"},{id:"_gat_gtag_UA_-regex",type:"cookie",regex:"_gat_gtag_UA_[0-9]+_[0-9]+"},{id:"_gcl_au",type:"cookie"},{id:"_fbc",type:"cookie"},{id:"_fbp",type:"cookie"},{id:"wd",type:"cookie"},{id:"dpr",type:"cookie"},{id:"act",type:"cookie"},{id:"c_user",type:"cookie"},{id:"presence",type:"cookie"},{id:"sb",type:"cookie"},{id:"xs",type:"cookie"},{id:"spin",type:"cookie"},{id:"datr",type:"cookie"},{id:"fr",type:"cookie"},{id:"YSC",type:"cookie"},{id:"VISITOR_INFO1_LIVE",type:"cookie"},{id:"amplitude_id-regex",type:"cookie",regex:"amplitude_id(?:_[a-f0-9]{32}|undefined)(?:.*)"},{id:"ATN",type:"cookie"},{id:"NID",type:"cookie"},{id:"IDE",type:"cookie"},{id:"GPS",type:"cookie"},{id:"AA003",type:"cookie"},{id:"_gat_UA-regex",type:"cookie",regex:"_gat_UA-([0-9]{8})-([0-9]{2})"},{id:"mp_regex",type:"cookie",regex:"mp_[a-f0-9]{32}_mixpanel"},{id:"gcl",type:"cookie"},{id:"msclkid",type:"cookie"},{id:"ptclid",type:"cookie"},{id:"ttclid",type:"cookie"},{id:"_gcl_aw",type:"cookie"},{id:"iterableTemplateId",type:"cookie"},{id:"iterableMessageId",type:"cookie"},{id:"iterableEndUserId",type:"cookie"},{id:"iterableEmailCampaignId",type:"cookie"},{id:"_gac_gb_regex",type:"cookie",regex:"_gac_gb_[0-9A-Z-]+"}]},{id:"delete-if-seen",trackers:[{id:"cloudflare-challenge-regex",type:"cookie",regex:"^(cf_chl_prog$)|(cf_cc_...$)|(cf_chl_cc_...$)|(cf_chl_seq_...$)"}]}],geolocationRules:[{region:"DEFAULT",framework:"optOut"},{region:"EU",framework:"optIn"}]}},53:(e,t,r)=>{r.d(t,{Am:()=>w,EM:()=>v,Np:()=>h,jf:()=>k,pN:()=>b});var i=r(0),n=r(33),o=r(2);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],c=!0,d=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l=(0,i.createContext)((e=>Promise.reject(new Error("Form dispatch context not found.\n\nBe sure to render <MyForm.Provider /> in a separate component above any component that uses\nform hooks")))),p=()=>Promise.reject(new Error("Form submit context not found.\n\nBe sure to render <MyForm.Provider /> in a separate component above any component that uses\nform hooks")),f=(0,i.createContext)(p);function m(e){return null!=e}function y(e,t){return t.flatMap((t=>t(e))).filter(m)}const g=e=>(t,r)=>{try{const i="read"===r.type?t:e(t,r.originalAction);return r.resolve(i),i}catch(e){throw r.reject(e),e}};function _(e){return function(t){const r={values:{}};for(const i in t){const n=t[i];r.values[i]={value:n,isDirty:!1,isFocused:!1,errors:[]},e&&i in e&&(r.values[i].errors=y(n,e[i]))}return r}}function h({initialValues:e,validators:t}){const r=function(e={},t){return function(r,i){let o;switch(i.type){case"error":return d(d({},r),{},{values:d(d({},r.values),{},{[i.meta.name]:d(d({},r.values[i.meta.name]),{},{errors:[...r.values[i.meta.name].errors||[],...i.payload]})})});case"formError":o=d(d({},r),{},{values:d({},r.values)});for(const e in i.payload)o.values[e]=d(d({},o.values[e]),{},{errors:[...o.values[e]?.errors||[],...i.payload[e]]});return o;case"change":{const t=i.meta.name in e?y(i.payload,e[i.meta.name]):[];return d(d({},r),{},{values:d(d({},r.values),{},{[i.meta.name]:d(d({},r.values[i.meta.name]),{},{value:i.payload,isDirty:!0,errors:t})})})}case"focus":return d(d({},r),{},{values:d(d({},r.values),{},{[i.meta.name]:d(d({},r.values[i.meta.name]),{},{isFocused:!0})})});case"blur":return d(d({},r),{},{values:d(d({},r.values),{},{[i.meta.name]:d(d({},r.values[i.meta.name]),{},{isFocused:!1})})});case"reset":{if(!i.payload)return _(e)(t);const o=(0,n.pickBy)(e,((e,t)=>(i.payload||[]).includes(t))),a=(0,n.pickBy)(t,((e,t)=>(i.payload||[]).includes(t))),s=_(o)(a);return d(d({},r),{},{values:d(d({},r.values),s.values)})}default:return r}}}(t,e),s=_(t),c=(0,i.createContext)(s(e).values);return{context:c,Provider:function({initialValues:t=e,onSubmit:n,children:d}){const u=function(e,t,r){const n=(0,i.useRef)(g(e));(0,i.useLayoutEffect)((()=>{n.current=g(e)}),[e]);const o=a((0,i.useReducer)(n.current,t,r),2),s=o[0],c=o[1];return[s,(0,i.useCallback)((e=>new Promise(((t,r)=>{c({type:"mutate",originalAction:e,resolve:t,reject:r})}))),[]),(0,i.useCallback)((()=>new Promise(((e,t)=>{c({type:"read",resolve:e,reject:t})}))),[])]}(r,t,s),p=a(u,3),m=p[0],y=p[1],_=p[2],h=(0,i.useCallback)((async e=>{const t=function(e){const t={};for(const r in e.values)t[r]=e.values[r].value;return t}(await _());return n(t,{onError:e=>{y({type:"formError",payload:e})},onChange:e=>{for(const t in e)y({type:"change",payload:e[t],meta:{name:t}})}},e)}),[n,y,_]);return(0,o.jsx)(l.Provider,{value:y,children:(0,o.jsx)(f.Provider,{value:h,children:(0,o.jsx)(c.Provider,{value:m.values,children:d})})})}}}function b(e,t){const r=(0,i.useContext)(e.context),n={};for(const e of t)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e].errors);return n}function v(e){const t=(0,i.useContext)(l);return(0,i.useCallback)((e=>{t({type:"reset",payload:e})}),[t])}function k(e){const t=(0,i.useContext)(e.context),r=(0,i.useContext)(l),o={},a=(0,i.useCallback)((0,n.memoize)((e=>t=>r({type:"change",payload:t,meta:{name:e}}))),[r]),s=(0,i.useCallback)((0,n.memoize)((e=>t=>r({type:"error",payload:t,meta:{name:e}}))),[r]),c=(0,i.useCallback)((0,n.memoize)((e=>()=>r({type:"focus",meta:{name:e}}))),[r]),u=(0,i.useCallback)((0,n.memoize)((e=>()=>r({type:"blur",meta:{name:e}}))),[r]);for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=d(d({},t[e]),{},{name:e,onChange:a(e),onErrors:s(e),onFormFocus:c(e),onFormBlur:u(e)}));return o}function w(e){const t=(0,i.useContext)(e.context),r=(0,i.useContext)(f);let n=!0;for(const e in t)if(t[e].errors.length>0){n=!1;break}return[r,n]}},1396:(e,t,r)=>{r.d(t,{O:()=>c,g:()=>p});var i=r(462),n=r(16);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c="onfido-mount";function d(e){return`rgb(${e.join(",")})`}const u={borderRadiusButton:"56px",borderStyleSurfaceModal:"0px",fontFamilyBody:n.fontFamily.text,fontFamilyTitle:n.fontFamily.display,fontFamilySubtitle:n.fontFamily.text,fontWeightBody:400,fontSizeBody:"16px",fontSizeSubtitle:"16px",fontSizeTitle:"40px",colorBackgroundSurfaceModal:"transparent",colorBackgroundIcon:"transparent",colorBorderLinkUnderline:"transparent",colorBackgroundLinkActive:"transparent",colorBackgroundLinkHover:"transparent",colorBackgroundDocTypeButton:"transparent"},l={light:{gray0:d(i.light.gray0),gray5:d(i.light.gray5),gray10:d(i.light.gray10),gray20:d(i.light.gray20),gray100:d(i.light.gray100),gray70:d(i.light.gray70),blue60:d(i.light.blue60),blue70:d(i.light.blue70)},dark:{gray0:d(i.dark.gray0),gray5:d(i.dark.gray5),gray10:d(i.dark.gray10),gray20:d(i.dark.gray20),gray100:d(i.dark.gray100),gray70:d(i.dark.gray70),blue60:d(i.dark.blue60),blue70:d(i.dark.blue70)}};function p(e){const t=e?"dark":"light",r=a(a({},u),{},{colorContentBody:l[t].gray100,colorContentTitle:l[t].gray100,colorContentSubtitle:l[t].gray100,colorContentButtonPrimaryText:l[t].gray0,colorBackgroundButtonPrimary:l[t].blue60,colorBackgroundButtonPrimaryHover:l[t].blue60,colorBackgroundButtonPrimaryActive:l[t].blue60,colorContentButtonSecondaryText:l[t].gray100,colorBackgroundButtonSecondary:l[t].gray20,colorBackgroundButtonSecondaryHover:l[t].gray10,colorBackgroundButtonSecondaryActive:l[t].gray10,colorContentLinkTextHover:l[t].blue60,colorBorderDocTypeButton:l[t].gray5,colorBackgroundDocTypeButtonHover:l[t].gray10,colorBackgroundDocTypeButtonActive:l[t].gray10,colorContentDocTypeButton:l[t].gray100,colorIcon:l[t].blue60,colorInputOutline:l[t].blue70,colorContentInfoPill:l[t].gray0,colorBackgroundInfoPill:l[t].blue60});return e?a(a({},r),{},{colorBackgroundButtonIconActive:l.dark.gray70,colorBackgroundButtonIconHover:l.dark.gray70}):r}},2302:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ut});var i=r(0),n=r(10),o=r(340),a=r(19),s=r(7),c=r(9),d=r(11),u=r(35),l=r(4),p=r(211),f=r(784),m=r(2412),y=r(54),g=r(2),_=r(95),h=r(98),b=r(225),v=r.n(b),k=r(3632),w=r.n(k),C="undefined"==typeof document||!document||!document.createElement||"multiple"in document.createElement("input");function x(e){var t=[];if(e.dataTransfer){var r=e.dataTransfer;r.files&&r.files.length?t=r.files:r.items&&r.items.length&&(t=r.items)}else e.target&&e.target.files&&(t=e.target.files);return Array.prototype.slice.call(t)}function S(e,t){return"application/x-moz-file"===e.type||w()(e,t)}function I(e){e.preventDefault()}const E={borderStyle:"solid",borderColor:"#c66",backgroundColor:"#eee"},T={opacity:.5},j={borderStyle:"solid",borderColor:"#6c6",backgroundColor:"#eee"},A={width:200,height:200,borderWidth:2,borderColor:"#666",borderStyle:"dashed",borderRadius:5};var P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},O=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function D(e,t){var r={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}var M=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return i.renderChildren=function(e,t,r,n){return"function"==typeof e?e(P({},i.state,{isDragActive:t,isDragAccept:r,isDragReject:n})):e},i.composeHandlers=i.composeHandlers.bind(i),i.onClick=i.onClick.bind(i),i.onDocumentDrop=i.onDocumentDrop.bind(i),i.onDragEnter=i.onDragEnter.bind(i),i.onDragLeave=i.onDragLeave.bind(i),i.onDragOver=i.onDragOver.bind(i),i.onDragStart=i.onDragStart.bind(i),i.onDrop=i.onDrop.bind(i),i.onFileDialogCancel=i.onFileDialogCancel.bind(i),i.onInputElementClick=i.onInputElementClick.bind(i),i.setRef=i.setRef.bind(i),i.setRefs=i.setRefs.bind(i),i.isFileDialogActive=!1,i.state={draggedFiles:[],acceptedFiles:[],rejectedFiles:[]},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),O(t,[{key:"componentDidMount",value:function(){var e=this.props.preventDropOnDocument;this.dragTargets=[],e&&(document.addEventListener("dragover",I,!1),document.addEventListener("drop",this.onDocumentDrop,!1)),this.fileInputEl.addEventListener("click",this.onInputElementClick,!1),document.body.onfocus=this.onFileDialogCancel}},{key:"componentWillUnmount",value:function(){this.props.preventDropOnDocument&&(document.removeEventListener("dragover",I),document.removeEventListener("drop",this.onDocumentDrop)),null!=this.fileInputEl&&this.fileInputEl.removeEventListener("click",this.onInputElementClick,!1),null!=document&&(document.body.onfocus=null)}},{key:"composeHandlers",value:function(e){return this.props.disabled?null:e}},{key:"onDocumentDrop",value:function(e){this.node&&this.node.contains(e.target)||(e.preventDefault(),this.dragTargets=[])}},{key:"onDragStart",value:function(e){this.props.onDragStart&&this.props.onDragStart.call(this,e)}},{key:"onDragEnter",value:function(e){e.preventDefault(),-1===this.dragTargets.indexOf(e.target)&&this.dragTargets.push(e.target),this.setState({isDragActive:!0,draggedFiles:x(e)}),this.props.onDragEnter&&this.props.onDragEnter.call(this,e)}},{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation();try{e.dataTransfer.dropEffect=this.isFileDialogActive?"none":"copy"}catch(e){}return this.props.onDragOver&&this.props.onDragOver.call(this,e),!1}},{key:"onDragLeave",value:function(e){var t=this;e.preventDefault(),this.dragTargets=this.dragTargets.filter((function(r){return r!==e.target&&t.node.contains(r)})),this.dragTargets.length>0||(this.setState({isDragActive:!1,draggedFiles:[]}),this.props.onDragLeave&&this.props.onDragLeave.call(this,e))}},{key:"onDrop",value:function(e){var t=this,r=this.props,i=r.onDrop,n=r.onDropAccepted,o=r.onDropRejected,a=r.multiple,s=r.disablePreview,c=r.accept,d=x(e),u=[],l=[];e.preventDefault(),this.dragTargets=[],this.isFileDialogActive=!1,d.forEach((function(e){if(!s)try{e.preview=window.URL.createObjectURL(e)}catch(e){0}S(e,c)&&function(e,t,r){return e.size<=t&&e.size>=r}(e,t.props.maxSize,t.props.minSize)?u.push(e):l.push(e)})),a||l.push.apply(l,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(u.splice(1))),i&&i.call(this,u,l,e),l.length>0&&o&&o.call(this,l,e),u.length>0&&n&&n.call(this,u,e),this.draggedFiles=null,this.setState({isDragActive:!1,draggedFiles:[],acceptedFiles:u,rejectedFiles:l})}},{key:"onClick",value:function(e){var t=this.props,r=t.onClick;t.disableClick||(e.stopPropagation(),r&&r.call(this,e),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?this.open():setTimeout(this.open.bind(this),0))}},{key:"onInputElementClick",value:function(e){e.stopPropagation(),this.props.inputProps&&this.props.inputProps.onClick&&this.props.inputProps.onClick()}},{key:"onFileDialogCancel",value:function(){var e=this,t=this.props.onFileDialogCancel;this.isFileDialogActive&&setTimeout((function(){null!=e.fileInputEl&&(e.fileInputEl.files.length||(e.isFileDialogActive=!1));"function"==typeof t&&t()}),300)}},{key:"setRef",value:function(e){this.node=e}},{key:"setRefs",value:function(e){this.fileInputEl=e}},{key:"open",value:function(){this.isFileDialogActive=!0,this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var e=this.props,t=e.accept,r=e.acceptClassName,n=e.activeClassName,o=e.children,a=e.disabled,s=e.disabledClassName,c=e.inputProps,d=e.multiple,u=e.name,l=e.rejectClassName,p=D(e,["accept","acceptClassName","activeClassName","children","disabled","disabledClassName","inputProps","multiple","name","rejectClassName"]),f=p.acceptStyle,m=p.activeStyle,y=p.className,g=void 0===y?"":y,_=p.disabledStyle,h=p.rejectStyle,b=p.style,v=D(p,["acceptStyle","activeStyle","className","disabledStyle","rejectStyle","style"]),k=this.state,w=k.isDragActive,x=k.draggedFiles,I=x.length,O=d||I<=1,M=I>0&&function(e,t){return e.every((function(e){return S(e,t)}))}(x,this.props.accept),B=I>0&&(!M||!O),N=!(g||b||m||f||h||_);w&&n&&(g+=" "+n),M&&r&&(g+=" "+r),B&&l&&(g+=" "+l),a&&s&&(g+=" "+s),N&&(m=j,f=(b=A).active,h=E,_=T);var R=P({},b);m&&w&&(R=P({},b,m)),f&&M&&(R=P({},R,f)),h&&B&&(R=P({},R,h)),_&&a&&(R=P({},b,_));var U={accept:t,disabled:a,type:"file",style:{display:"none"},multiple:C&&d,ref:this.setRefs,onChange:this.onDrop,autoComplete:"off"};u&&u.length&&(U.name=u);v.acceptedFiles,v.preventDropOnDocument,v.disablePreview,v.disableClick,v.onDropAccepted,v.onDropRejected,v.onFileDialogCancel,v.maxSize,v.minSize;var q=D(v,["acceptedFiles","preventDropOnDocument","disablePreview","disableClick","onDropAccepted","onDropRejected","onFileDialogCancel","maxSize","minSize"]);return i.createElement("div",P({className:g,style:R},q,{onClick:this.composeHandlers(this.onClick),onDragStart:this.composeHandlers(this.onDragStart),onDragEnter:this.composeHandlers(this.onDragEnter),onDragOver:this.composeHandlers(this.onDragOver),onDragLeave:this.composeHandlers(this.onDragLeave),onDrop:this.composeHandlers(this.onDrop),ref:this.setRef,"aria-disabled":a}),this.renderChildren(o,w,M,B),i.createElement("input",P({},c,U)))}}]),t}(i.Component);const B=M;M.propTypes={accept:v().string,children:v().oneOfType([v().node,v().func]),disableClick:v().bool,disabled:v().bool,disablePreview:v().bool,preventDropOnDocument:v().bool,inputProps:v().object,multiple:v().bool,name:v().string,maxSize:v().number,minSize:v().number,className:v().string,activeClassName:v().string,acceptClassName:v().string,rejectClassName:v().string,disabledClassName:v().string,style:v().object,activeStyle:v().object,acceptStyle:v().object,rejectStyle:v().object,disabledStyle:v().object,onClick:v().func,onDrop:v().func,onDropAccepted:v().func,onDropRejected:v().func,onDragStart:v().func,onDragEnter:v().func,onDragOver:v().func,onDragLeave:v().func,onFileDialogCancel:v().func},M.defaultProps={preventDropOnDocument:!0,disabled:!1,disablePreview:!1,disableClick:!1,multiple:!0,maxSize:1/0,minSize:0};var N=r(487),R=r(14),U=(r(3697),r(33)),q=r.n(U),L=(r(8),r(82)),F=r(52),V=r(61),H=r(1331),W=r(1322);r(292),r(1321);const z=["countryCode","forceFacematchType","noBorder","transparentBackground","onRetry","skipSuccessViewAndDo","isKycFallback","skipPendingViewAndDo","track","applicationContext","client","onContinue","onApiError","loader","noMinWidth","noMaxWidth","failureViewTitle","onPendingResponse"];function G(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],c=!0,d=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}const Q=(e,t)=>{if(!e)return"";const r=e.name;return"string"==typeof r&&r in f.m?t(f.m[r]):e.message};function X({error:e,hideRetryButton:t,onRetry:r,title:i}){(0,m.u)("verify_document_viewed_failure",{action:s.Us.render,componentType:s.re.page,error:e?e.name:"No reason given"});const n=(0,c.Z)().formatMessage;return(0,g.jsx)(F.VStack,{justifyContent:"space-evenly",testID:"id-capture-failure-view",children:(0,g.jsx)(m.d,{title:i||n(f.m.titleFailureView),subtitle:n(f.m.subtitleFailureView),errorMessages:(0,g.jsx)("div",{children:Q(e,n)}),actions:t?null:(0,g.jsx)(L.Button,{onPress:r,block:!0,children:n(f.m.tryAgainFailureView)}),actionsSubtitle:n(f.m.stillHavingIssues,{troubleShootingTipsLink:(0,g.jsx)(R.Link,{to:"https://support.coinbase.com/customer/en/portal/articles/1220621-identity-verification",openInNewWindow:!0,children:n(f.m.troubleShootingTipsLinkFailureView)})})})})}const ee=(0,i.memo)(X),te=(0,d.vU)({accessDeniedTitle:{id:"CameraFailureView.accessDeniedTitle",defaultMessage:"Camera access denied"},accessDeniedSubtitle:{id:"CameraFailureView.accessDeniedSubtitle",defaultMessage:"Camera access is neccessary to continue. Please allow camera access in your browser settings and try again."},cameraNotFoundTitle:{id:"CameraFailureView.cameraNotFoundTitle",defaultMessage:"Camera not available"},cameraNotFoundSubtitle:{id:"CameraFailureView.cameraNotFoundSubtitle",defaultMessage:"We could not detect a camera on your device. Please try again on a device with camera access."},cameraErrorTitle:{id:"CameraFailureView.cameraErrorTitle",defaultMessage:"Camera error"},cameraErrorSubtitle:{id:"CameraFailureView.cameraErrorSubtitle",defaultMessage:"Camera access is neccessary to continue. Please make sure you have an active camera and try again."},cameraNotFoundTipsMessage:{id:"CameraUnavailableView.cameraNotFoundTipsMessage",defaultMessage:"You will need a camera to verify your identity. A few tips before you try again:"},connectWebcam:{id:"CameraUnavailableView.connectWebcam",defaultMessage:"Connect a webcam to your device"},cameraWorking:{id:"CameraUnavailableView.cameraWorking",defaultMessage:"Ensure the camera on your device is in working order"},restartBrowser:{id:"CameraUnavailableView.restartBrowser",defaultMessage:"Restart your browser or device"},tryAgain:{id:"CameraFailureView.tryAgain",defaultMessage:"Try again"},needHelp:{id:"CameraFailureView.needHelp",defaultMessage:"Need help?"}});function re({errorName:e,onRetry:t}){(0,m.u)("verify_document_viewed_failure_camera",{action:s.Us.render,componentType:s.re.page,error:e});const r=(0,c.Z)(),n=r.formatMessage,o=r.locale,a=(0,i.useMemo)((()=>{switch(e){case"NotAllowedError":return{title:n(te.accessDeniedTitle),subtitle:n(te.accessDeniedSubtitle)};case"NotFoundError":return{title:n(te.cameraNotFoundTitle),subtitle:n(te.cameraNotFoundSubtitle),content:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(_.TextBody,{as:"p",children:n(te.cameraNotFoundTipsMessage)}),(0,g.jsxs)("ul",{children:[(0,g.jsx)("li",{children:(0,g.jsx)(_.TextBody,{as:"p",children:n(te.connectWebcam)})}),(0,g.jsx)("li",{children:(0,g.jsx)(_.TextBody,{as:"p",children:n(te.cameraWorking)})}),(0,g.jsx)("li",{children:(0,g.jsx)(_.TextBody,{as:"p",children:n(te.restartBrowser)})})]})]})};default:return{title:n(te.cameraErrorTitle),subtitle:n(te.cameraErrorSubtitle)}}}),[e,n]),d=a.title,u=a.subtitle,p=a.content;return(0,g.jsx)(f.C,{title:d,subtitle:u,image:(0,g.jsx)(V.HeroSquare,{testID:"camera-hero-square",name:"camera",dimension:"200x200"}),children:(0,g.jsxs)(l.VStack,{gap:2,children:[p,(0,g.jsx)(L.Button,{onPress:t,block:!0,children:n(te.tryAgain)}),(0,g.jsx)(L.Button,{variant:"secondary",to:o.startsWith("en")?"https://help.coinbase.com/en/coinbase/getting-started/verify-my-account/how-to-enable-a-webcam":"https://help.coinbase.com/contact-us",block:!0,testID:"need-help-button",target:"_blank",rel:"noopener noreferrer",children:n(te.needHelp)})]})})}const ie=e=>e||0===e?e.toString().replace(/[^#a-z0-9%()., _-]/gi,""):"";function ne({webcam:e,aspectRatio:t,flipped:r,blur:n}){return(0,i.useEffect)((()=>(e.attach("videoId","canvasId"),()=>{e.unattach()})),[]),(0,g.jsxs)(y.HStack,{alignItems:"center",justifyContent:"center",width:"100%",height:"100%",children:[(0,g.jsx)(oe,{aspectRatio:t,id:"videoId",blur:n,flipped:r,autoPlay:!0,muted:!0,playsinline:!0}),(0,g.jsx)(ae,{id:"canvasId"})]})}const oe=n.ZP.video.withConfig({displayName:"bundle-337bdc49__Video",componentId:"h2yrr0-0"})(["aspect-ratio:",";width:100%;",";",";"],(({aspectRatio:e})=>ie(e)),(e=>e.blur?"filter: blur(10px);":""),(e=>e.flipped?"transform: scaleX(-1);":"")),ae=n.ZP.canvas.withConfig({displayName:"bundle-337bdc49__Canvas",componentId:"h2yrr0-1"})(["display:none;"]),se=(0,i.memo)(ne);const ce={face:function(){return(0,g.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"160",height:"170","data-name":"Layer 1",viewBox:"0 0 160 170",children:[(0,g.jsx)("path",{fill:"#153363",d:"M38.31 151.34c19.28-41.11-4.79-67.88 2.81-101.41 6.64-29.3 45.24-31.14 57.2-19.32 3.52-1.61 35-4.33 18.26 62.85-9.6 38.62.23 57.88.23 57.88z"}),(0,g.jsx)("path",{fill:"#315ce8",d:"M80 115c-58.19 0-70.78 55-70.78 55h141.56S138.19 115 80 115z"}),(0,g.jsx)("path",{fill:"#fff",d:"M105.78 119.15A76.63 76.63 0 0080 115a76.63 76.63 0 00-25.78 4.2c3.34 5.83 14 22.62 25.78 22.62s22.44-16.82 25.78-22.67z"}),(0,g.jsx)("path",{fill:"#153363",d:"M80 115h-.13v2.63H80c51.72 0 62.92 52.42 62.92 52.42h7.86S138.19 115 80 115z",opacity:"0.5"}),(0,g.jsx)("path",{fill:"#a9d4fd",d:"M92.1 96H67.9l-7.53 21.26s9.19 18 19.63 18 19.63-18 19.63-18z"}),(0,g.jsx)("path",{fill:"#315ce8",d:"M98.13 119.94c1-1.6 1.5-2.66 1.5-2.66L92.1 96h-2.44z",opacity:"0.3"}),(0,g.jsx)("path",{fill:"#315ce8",d:"M63.82 107.54c5 4 10.7 6.32 16.1 6.32s11.2-2.38 16.23-6.42L92.1 96H67.9z",opacity:"0.3"}),(0,g.jsx)("ellipse",{cx:"79.92",cy:"75.19",fill:"#a9d4fd",rx:"30.47",ry:"35.86"}),(0,g.jsx)("path",{fill:"#153363",d:"M47.19 75.41c4.13-26 36.05-11.19 51.13-27.33 0 0 1.31 8.19 11.26 18.86 5.72-4.26 2.74-39-32.95-39-43.17-.01-29.44 47.47-29.44 47.47z"}),(0,g.jsx)("ellipse",{cx:"109.58",cy:"74.57",fill:"#a9d4fd",rx:"4.82",ry:"7.63"}),(0,g.jsx)("ellipse",{cx:"50.26",cy:"74.57",fill:"#a9d4fd",rx:"4.82",ry:"7.63"})]})}};function de(){const e=fe.face;e.displayName="GuideIcon";const t=(0,c.Z)().formatMessage;return(0,g.jsxs)(l.Box,{flexDirection:"column",alignItems:"center",children:[(0,g.jsx)(h.TextLabel2,{as:"p",color:"foregroundMuted",children:(0,g.jsxs)("em",{children:[" ",t(f.m.example)]})}),(0,g.jsx)(l.Box,{spacingBottom:1,children:(0,g.jsx)(l.Box,{flexShrink:0,children:(0,g.jsx)(pe,{children:(0,g.jsx)(e,{})})})}),(0,g.jsxs)(ue,{"data-testid":"capture-hints-face",children:[(0,g.jsx)(le,{children:(0,g.jsx)(_.TextBody,{as:"p",color:"foregroundMuted",children:t(f.m.cutOffHint,{frame:(0,g.jsx)(_.TextBody,{as:"span",children:(0,g.jsx)("b",{children:t(f.m.frame)})})})})}),(0,g.jsx)(le,{children:(0,g.jsx)(_.TextBody,{as:"span",children:(0,g.jsx)("b",{children:t(f.m.lightingHint)})})})]})]})}const ue=n.ZP.ul.withConfig({displayName:"bundle-337bdc49__List",componentId:"h2yrr0-2"})(["list-style:square;padding-inline-start:18px;"]),le=n.ZP.li.withConfig({displayName:"bundle-337bdc49__StyledListItem",componentId:"h2yrr0-3"})(["padding-bottom:6px;"]),pe=n.ZP.div.withConfig({displayName:"bundle-337bdc49__GuideIconsContainer",componentId:"h2yrr0-4"})(["width:240px;height:153px;svg{width:100%;height:100%;}"]),fe={face:(me=ce.face,(0,n.ZP)(me).withConfig({displayName:"bundle-337bdc49__styleIcon",componentId:"h2yrr0-5"})(["width:240px;height:153px;"]))};var me;function ye(){return(0,g.jsxs)(Ie,{children:[(0,g.jsx)(Ee,{}),(0,g.jsxs)(l.Box,{flexDirection:"column",flexGrow:1,children:[(0,g.jsx)(Te,{}),(0,g.jsx)(je,{}),(0,g.jsx)(Te,{})]}),(0,g.jsx)(Ee,{})]})}function ge(e){const t=e.webcam,r=e.webcamActive,n=e.preview,a=e.previewImage,d=e.continueCapture,p=e.isSubmitting,y=e.onCapture,_=e.retryCapture,h=e.timer,b=(0,f.u)(),v=b.compact,k=b.loader,w=(0,m.e)(),C=(0,i.useRef)(null),x=$((0,i.useState)(!1),2),S=x[0],I=x[1],E=(0,o.useBreakpoints)().isPhone,T=(0,c.Z)().formatMessage,j=r&&!n,A=!r;(0,i.useEffect)((()=>(document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)})),[]),(0,i.useEffect)((()=>{E||v||j&&C.current?.clientWidth&&C.current?.clientWidth<640?I(!0):I(!1)}),[E,j]);const P=(0,i.useCallback)((()=>{w("verify_document_face_tapped_take_photo",{action:s.Us.click,componentType:s.re.button}),y()}),[y,w]),O=(0,i.useCallback)((e=>{32===e.keyCode&&P()}),[P]),D=(0,i.useCallback)((()=>{w("verify_document_face_retake_tapped_retake",{action:s.Us.click,componentType:s.re.button}),_()}),[_,w]),M=(0,i.useMemo)((()=>T(h?f.m.holdStillCapture:f.m.faceCapture)),[T,h]);return(0,g.jsxs)(l.Box,{justifyContent:"center",alignItems:"center",flexDirection:S?"column":"row",width:"100%",ref:C,children:[A&&k,(0,g.jsxs)(l.Box,{flexDirection:S?"column":"row",alignContent:"center",display:A?"none":void 0,children:[(0,g.jsx)(_e,{compact:v,children:(0,g.jsx)(de,{})}),(0,g.jsxs)(we,{inactive:A,compact:v,children:[!n&&(0,g.jsx)(l.Box,{alignItems:"center",justifyContent:"center",height:"100%",children:(0,g.jsx)(he,{compact:v,children:(0,g.jsxs)(be,{children:[(0,g.jsx)(se,{webcam:t,blur:!1,flipped:!n}),j&&(0,g.jsx)(Ce,{children:(0,g.jsx)(ye,{})})]})})}),j&&(0,g.jsxs)(Ce,{children:[(0,g.jsx)(Ae,{compact:v,children:(0,g.jsx)(Se,{children:M})}),(0,g.jsx)(Pe,{compact:v,children:(0,g.jsx)(Se,{children:h?(0,g.jsx)(Oe,{children:h}):(0,g.jsx)(u.Button,{compact:!0,onPress:P,testID:"idv-take-photo-button",children:T(f.m.takePhoto)})})})]}),n&&(0,g.jsxs)(l.Box,{flexDirection:"row",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",children:[a&&(0,g.jsx)(Me,{src:a,alt:"Preview"}),a?(0,g.jsxs)(Ce,{children:[(0,g.jsx)(he,{children:(0,g.jsx)(be,{children:(0,g.jsx)(ye,{})})}),(0,g.jsx)(Pe,{children:(0,g.jsx)(Se,{children:(0,g.jsxs)(l.Box,{children:[(0,g.jsx)(l.Box,{spacingHorizontal:1,children:(0,g.jsx)(u.Button,{compact:!0,onPress:D,disabled:p,children:T(f.m.retake)})}),(0,g.jsx)(l.Box,{spacingHorizontal:1,children:(0,g.jsx)(u.Button,{compact:!0,onPress:d,testID:"idv-next-photo-button",disabled:p,children:T(f.m.continue)})})]})})})]}):(0,g.jsx)(Ce,{children:(0,g.jsx)(De,{children:(0,g.jsx)(Se,{children:T(f.m.processing)})})})]}),A&&(0,g.jsx)(xe,{children:T(f.m.enableWebcamCapture)})]})]})]})}const _e=n.ZP.div.withConfig({displayName:"bundle-337bdc49__ExampleGuideBox",componentId:"h2yrr0-6"})(["margin-right:0;padding:",";@media (min-width:","px){margin-right:",";}"],(e=>e.compact?"12px":"0"),p.deviceBreakpoints.tablet,(e=>e.compact?"0":"70px")),he=n.ZP.div.withConfig({displayName:"bundle-337bdc49__AspectRatioWrapper",componentId:"h2yrr0-7"})(["position:relative;width:100%;height:100%;@media (min-width:","px){height:",";}&:before{display:block;content:'';width:100%;padding-top:75%;}"],p.deviceBreakpoints.tablet,(e=>e.compact?"100%":"initial")),be=n.ZP.div.withConfig({displayName:"bundle-337bdc49__WebcamInnerWrapper",componentId:"h2yrr0-8"})(["position:absolute;top:0;left:0;bottom:0;right:0;overflow:hidden;"]),ve="320px",ke="320px",we=n.ZP.div.withConfig({displayName:"bundle-337bdc49__Container1",componentId:"h2yrr0-9"})(["position:relative;width:",";height:",";@media (min-width:","px){width:",";height:",";}background:#000;",";"],ve,ke,p.deviceBreakpoints.tablet,(e=>e.compact?ve:"640px"),(e=>e.compact?ke:"480px"),(e=>e.inactive&&(0,n.iv)(["font-weight:",";color:rgba(255,255,255,0.75);background-color:",";svg{opacity:0.7;}"],(({theme:e})=>e.fontWeight.medium),(e=>e.theme.color.black50)))),Ce=n.ZP.div.withConfig({displayName:"bundle-337bdc49__Content",componentId:"h2yrr0-10"})(["display:flex;align-items:center;justify-content:center;flex-direction:row;flex:1 1 auto;position:absolute;top:0;right:0;bottom:0;left:0;"]),xe=n.ZP.div.withConfig({displayName:"bundle-337bdc49__AllowAccess",componentId:"h2yrr0-11"})(["display:flex;align-items:center;justify-content:center;position:absolute;flex-direction:row;top:0;right:0;bottom:0;left:0;height:170px;"]),Se=n.ZP.div.withConfig({displayName:"bundle-337bdc49__Positioner",componentId:"h2yrr0-12"})(["margin:0 auto;> button:not(:only-child):not(:last-child){margin-right:15px;}@media (min-width:","px){> button:not(:only-child):not(:last-child){margin-tight:30px;}}"],p.deviceBreakpoints.tablet),Ie=n.ZP.div.withConfig({displayName:"bundle-337bdc49__MaskContainer",componentId:"h2yrr0-13"})(["display:flex;width:100%;height:100%;"]),Ee=n.ZP.div.withConfig({displayName:"bundle-337bdc49__VerticalMask",componentId:"h2yrr0-14"})(["display:flex;width:10.16%;background-color:",";"],(e=>e.theme.color.black50)),Te=n.ZP.div.withConfig({displayName:"bundle-337bdc49__HorizontalMask",componentId:"h2yrr0-15"})(["display:flex;height:14.58%;background-color:",";"],(e=>e.theme.color.black50)),je=n.ZP.div.withConfig({displayName:"bundle-337bdc49__Outline",componentId:"h2yrr0-16"})(["display:flex;border:1px solid rgba(255,255,255,0.25);flex:1;"]),Ae=n.ZP.div.withConfig({displayName:"bundle-337bdc49__Title",componentId:"h2yrr0-17"})(["display:flex;max-width:300px;position:absolute;top:4px;text-align:center;font-size:15px;font-weight:",";color:",";@media (min-width:","px){top:",";max-width:initial;}"],(({theme:e})=>e.fontWeight.medium),(({theme:e})=>e.color.white),p.deviceBreakpoints.tablet,(e=>e.compact?"4px":"30px")),Pe=n.ZP.div.withConfig({displayName:"bundle-337bdc49__ActionBar",componentId:"h2yrr0-18"})(["display:flex;position:absolute;right:0;bottom:4px;left:0;font-size:24px;@media (min-width:","px){bottom:",";}"],p.deviceBreakpoints.tablet,(e=>e.compact?"4px":"15px")),Oe=n.ZP.div.withConfig({displayName:"bundle-337bdc49__Action",componentId:"h2yrr0-19"})(["display:flex;align-items:center;justify-content:center;width:42px;height:42px;margin-right:20px;border-radius:50%;border:1px solid rgba(255,255,255,0.75);color:rgba(255,255,255,0.75);"]),De=n.ZP.div.withConfig({displayName:"bundle-337bdc49__Processing",componentId:"h2yrr0-20"})(["display:flex;position:absolute;bottom:30px;font-size:15px;font-weight:",";color:",";"],(({theme:e})=>e.fontWeight.medium),(({theme:e})=>e.color.white)),Me=n.ZP.img.withConfig({displayName:"bundle-337bdc49__PreviewImage",componentId:"h2yrr0-21"})(["width:100%;"]),Be=(0,i.memo)(ge),Ne=e=>e.preventDefault();function Re({hasFacematchType:e,idType:t,imageCaptureView:r,isSubmitting:n,backImageRequired:o,frontImage:a,backImage:d,onGoBack:p,onUpload:y,showFrontBlurryMessage:_,applicationContext:h,allowContinue:b,allowSubmit:v,onSubmit:k,onRenderWebcam:w}){(0,m.u)("verify_document_file_upload_viewed",{action:s.Us.render,componentType:s.re.page});const C=$((0,i.useState)("frontBack"),2),x=C[0],S=C[1],I=$((0,i.useState)(!1),2),E=I[0],T=I[1],j=(0,c.Z)().formatMessage,A=(0,m.e)();(0,i.useEffect)((()=>(window.addEventListener("dragover",Ne,!1),window.addEventListener("drop",Ne,!1),()=>{window.removeEventListener("dragover",Ne,!1),window.removeEventListener("drop",Ne,!1)})),[]);const P=(0,i.useCallback)((()=>{S("facematch"),w?.()}),[w]),O=(0,i.useCallback)((()=>{P(),e&&A("verify_document_facematch_viewed",{action:s.Us.render,componentType:s.re.page})}),[e,P,A]),D=(0,i.useMemo)((()=>{if(r&&n)return"";switch(x){case"frontBack":return"account_recovery"===h?j(f.m.frontBackAccountRecoveryTitle,{idType:j(f.m[t])}):j(f.m.frontBackTitle);case"facematch":return e?j(f.m.faceTitle):"";default:return""}}),[h,e,j,t,r,n,x]),M=(0,i.useMemo)((()=>{if(r&&n)return"";switch(x){case"frontBack":return"account_recovery"===h?"":j(f.m.frontBackSubtitle,{idType:j(f.m[t]).toLowerCase()});case"facematch":return e?j(f.m.faceSubtitle):"";default:return""}}),[h,e,j,t,r,n,x]),B=(0,i.useCallback)((()=>{A("verify_document_file_upload_tapped_upload",{action:s.Us.render,componentType:s.re.page}),k()}),[k,A]),N=(0,i.useMemo)((()=>"frontBack"===x?e?(0,g.jsx)(l.VStack,{spacingBottom:2,width:"100%",children:(0,g.jsx)(u.Button,{onPress:O,disabled:!b,testID:"idv-image-upload-cta",block:!0,children:j(f.m.continueAction)})}):(0,g.jsx)(l.VStack,{spacingBottom:2,width:"100%",children:(0,g.jsx)(u.Button,{onPress:B,disabled:!v||n,loading:n,testID:"idv-image-upload-cta",block:!0,children:j(f.m.uploadAction)})}):null),[b,v,e,j,n,O,B,x]),U=(0,i.useCallback)((e=>{const t={front:f.m.blurryImageWarningFront,only:f.m.blurryImageWarningOneSided};if(e)return t[e]}),[]),q=(0,i.useCallback)((e=>{const t=e.backImageRequired;return e.showFrontBlurryMessage?t?"front":"only":null}),[]),L=q({showFrontBlurryMessage:_,backImageRequired:o}),F=U(L);_&&A("blurry_message_shown",{action:s.Us.render,componentType:s.re.text,context:"uploads",side:L});const V=(0,i.useCallback)(((e,t)=>{T(!1),y(e,t).catch((e=>{A("verify_document_upload_rejected_unknown_file_type",{action:s.Us.render,componentType:s.re.text}),T(!0)}))}),[y,A]);return(0,g.jsx)(l.VStack,{width:"100%",children:(0,g.jsx)(f.C,{title:D,subtitle:M,actions:N,onGoBack:n?void 0:p,children:"frontBack"===x?(0,g.jsxs)(l.VStack,{children:[(0,g.jsxs)(l.HStack,{justifyContent:"center",children:[(0,g.jsx)(Ue,{side:"front",onUpload:V,onDropRejected:()=>{T(!0)},file:a,showLabel:"passport"!==t,showWarning:_}),o&&(0,g.jsx)(Ue,{side:"back",onUpload:V,onDropRejected:()=>{T(!0)},file:d})]}),F&&(0,g.jsxs)(i.Fragment,{children:[(0,g.jsx)(l.VStack,{spacingVertical:2,spacingHorizontal:8,children:(0,g.jsx)(l.Box,{justifyContent:"center",background:"negative",borderRadius:"roundedSmall",spacing:1,bordered:!0,children:(0,g.jsx)(R.TextLabel2,{as:"p",color:"secondary",children:j(F)})})}),(0,g.jsx)(l.VStack,{children:(0,g.jsx)(R.TextLabel2,{as:"p",color:"foregroundMuted",children:j(f.m.blurryImageWarningText)})})]}),E?(0,g.jsx)(R.TextLabel2,{as:"p",color:"negative",spacingVertical:1,children:j(f.m.rejectionReason)}):null,(0,g.jsx)(l.VStack,{spacingVertical:2,children:(0,g.jsx)(R.TextLabel2,{as:"p",children:j(f.m.instructions)})})]}):(0,g.jsx)(l.Box,{width:"100%",children:r})})})}const Ue=(0,i.memo)((({side:e,onUpload:t,file:r,showLabel:i=!0,showWarning:n,onDropRejected:a})=>{const d=(0,c.Z)().formatMessage,u=(0,m.e)(),p=Fe[e],y=(0,o.useBreakpoints)(),_=y.isPhone,h=y.isPhoneLarge;return(0,g.jsxs)(l.VStack,{spacingHorizontal:2,children:[(0,g.jsx)(qe,{onDrop:r=>{"back"===e?u("verify_document_file_upload_tapped_back",{componentType:s.re.card,action:s.Us.select}):"front"===e&&u("verify_document_file_upload_tapped_front",{componentType:s.re.card,action:s.Us.select}),r.length>0&&t(e,r[0])},multiple:!1,minSize:5e3,maxSize:15e6,accept:"image/jpeg,image/png",color:n?"warning":"coinbaseLight",onDropRejected:a,"data-testid":`image-upload-drop-${e}`,children:r?(0,g.jsx)(Le,{src:r.preview,alt:"Preview"}):(0,g.jsxs)(l.VStack,{alignContent:"center",alignItems:"center",children:[(0,g.jsx)(l.VStack,{children:(0,g.jsx)(p,{})}),(0,g.jsx)(R.TextLabel2,{as:"p",color:"foregroundMuted",align:"center",spacingTop:1,spacingHorizontal:2,children:_||h?d(f.m.accountRecoveryDropzone,{side:e}):d(f.m.dropzone)})]})}),i&&(0,g.jsx)(R.TextLabel2,{as:"p",align:"center",children:d(f.m[e])})]})}));Ue.displayName="DropImage";const qe=(0,n.ZP)(B).attrs((e=>({activeClassName:"active",color:e.theme.color[e.color]||e.theme.color.textAccent}))).withConfig({displayName:"bundle-337bdc49__StyledDropzone",componentId:"h2yrr0-22"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;width:140px;min-height:140px;border:1px dashed ",";cursor:pointer;margin-bottom:10px;&.active{border:1px solid ",";box-shadow:0 0 2px ",";transition:border-color 0.5s linear,box-shadow 0.5s;}"],(({theme:e,color:t})=>e.color[t]),(({theme:e})=>e.color.positive),(({theme:e})=>e.color.boxShadow)),Le=n.ZP.img.withConfig({displayName:"bundle-337bdc49__Preview",componentId:"h2yrr0-23"})(["max-width:100%;max-height:100%;"]),Fe={front:()=>(0,g.jsx)(N.Pictogram,{name:"identityCard"}),back:()=>(0,g.jsx)(N.Pictogram,{name:"identityCard"})},Ve=(0,i.memo)(Re),He=(0,d.vU)({title:{id:"PollingFailureView.title",defaultMessage:"Verification still in progress"},subtitle:{id:"PollingFailureView.subtitle",defaultMessage:"Verification normally takes a few minutes but may take longer in some cases."},checkStatus:{id:"PollingFailureView.checkStatus",defaultMessage:"Check status"},needHelp:{id:"PollingFailureView.needHelp",defaultMessage:"Need help?"}});function We(){(0,m.u)("verify_document_viewed_failure_polling",{action:s.Us.render,componentType:s.re.page});const e=(0,c.Z)().formatMessage;return(0,g.jsx)(f.C,{title:e(He.title),subtitle:e(He.subtitle),image:(0,g.jsx)(V.HeroSquare,{testID:"processing-hero-square",name:"processing",dimension:"200x200"}),children:(0,g.jsxs)(l.VStack,{gap:2,children:[(0,g.jsx)(L.Button,{onPress:()=>window.location.reload(),block:!0,children:e(He.checkStatus)}),(0,g.jsx)(L.Button,{variant:"secondary",to:"https://help.coinbase.com/contact-us",block:!0,testID:"need-help-button",target:"_blank",children:e(He.needHelp)})]})})}const ze=(0,d.vU)({title:{id:"UploadProgressView.title",defaultMessage:"Uploading images"},subtitle:{id:"UploadProgressView.subtitle",defaultMessage:"This shouldn’t take long"}});function Ge(){(0,m.u)("verify_document_upload_progress_viewed",{action:s.Us.render,componentType:s.re.page});const e=(0,c.Z)().formatMessage;return(0,g.jsxs)(F.VStack,{flexGrow:1,alignItems:"center",justifyContent:"center",height:"100%",width:"100%",children:[(0,g.jsxs)(F.VStack,{alignItems:"center",children:[(0,g.jsx)(W.TextDisplay3,{as:"h1",align:"center",spacingBottom:1,children:e(ze.title)}),(0,g.jsx)(_.TextBody,{as:"p",align:"center",color:"foregroundMuted",children:e(ze.subtitle)})]}),(0,g.jsx)(H.LottieStatusAnimation,{status:"loading",height:240,testID:"loading-animation"})]})}const Ze=(e,t,r)=>{const i=((e,t,r)=>{const i=new Uint8ClampedArray(e.length/4);let n=0,o=0;for(let a=0;a<r;a++)for(let r=0;r<t;r++){const t=.299*e[o]+.587*e[o+1]+.114*e[o+2];i[n++]=t,o+=4}return i})(e.data,e.width,e.height),n=((e,t,r,i)=>{const n=Math.round(Math.sqrt(i.length)),o=Math.floor(n/2),a=new Float32Array(t*r);for(let s=0;s<r;s++)for(let c=0;c<t;c++){const d=s,u=c,l=s*t+c;let p=0;for(let s=0;s<n;s++){for(let a=0;a<n;a++){const c=Math.min(r-1,Math.max(0,d+s-o))*t+Math.min(t-1,Math.max(0,u+a-o)),l=i[s*n+a];p+=e[c]*l}a[l]=p}}return a})(i,e.width,e.height,[0,1,0,1,-4,1,0,1,0]),o=function(e,t){const r=[];e.sort();for(let i=0;i<t.length;i++){const n=parseInt(t[i]*(e.length-1)/100,10);r.push(e[n])}return r}(n,[0,20,40,60,80,100]),a=(e=>{const t=e.reduce(((e,t)=>e+t))/e.length,r=e.map((e=>Math.pow(e-t,2))).reduce(((e,t)=>e+t))/e.length;return{mean:t,variance:r,std:Math.sqrt(r)}})(n),s=a.mean,c=a.std,d=a.variance,u=function(e){const t=[.52212686,-496936896e-14,-246943824e-19,1.00000771,1,.998165138,.00175438596,0,-453629947e-14,-.00864553314,-.00920201294,-.0851599168],r=[.0713160985,355718077e-13,1.26534093e-9,385350515e-14,.000154822728,.000917431193,.00175438596,.000223914017,453629947e-14,.000120076849,.000143781452,.416606184];return e.map(((e,i)=>e*r[i]+t[i]))}([s,c,d,...o,r,t,r/t]),l=function(e){const t=[-5.90492194,-243.546621,394.601212,-207.437112,25.8128237,187.373979,96.5640019,57.3582572,-121.378124,-1.98053908,-1.84080502,-.261269689];let r=-1.51348298;for(let i=0;i<e.length;i++)r+=t[i]*e[i];return 1/(1+Math.pow(Math.E,-r))}(u);return{variance:d,blurry:l}};class Ye{constructor(e){this.getImageData=e=>{const t=document.createElement("canvas"),r=q().get(e,"tagName"),i="IMG"===r;if("VIDEO"===r)t.width=e.videoWidth||e.clientWidth,t.height=e.videoHeight||e.clientHeight,this.leaveBreadcrumb("ClearCam.snap.photoInterval",{hasVideo:!!e,width:t.width,height:t.height});else{if(!i){const t=r||typeof e;return this.onError?.(new Error(`blurryDetector.getImageData: Unidentified image source. Expected a video or image element, received: ${t}`)),{}}t.width=e.width,t.height=e.height}const n=t.getContext("2d");n?.drawImage(e,0,0,t.width,t.height);const o=document.createElement("canvas");o.width=256,o.height=256;const a=o.getContext("2d");if(!a)throw new Error("unable to create 2d context");a.imageSmoothingQuality="high",a.drawImage(t,0,0,o.width,o.height);return{canvas:t,resizedImgData:a.getImageData(0,0,o.width,o.height)}},this.getImageFromUrl=e=>new Promise(((t,r)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=e=>{r(e)},i.src=e})),this.calculateBlurry=(e,t,r,i)=>new Promise((n=>{const o=Ze(t,r,i);n({variance:o.variance,blurry:o.blurry,position:e})})),this.calculateBlurryFromImageUrl=async e=>{const t=await this.getImageFromUrl(e),r=this.getImageData(t),i=r.resizedImgData,n=r.canvas.width,o=r.canvas.height,a=await this.calculateBlurry(0,i,n,o);return{variance:a.variance,blurry:a.blurry}},Object.assign(this,e)}}const Ke={video:{width:{ideal:1280,max:1920},height:{ideal:720,max:1080}},audio:!1};const $e=class{constructor(e){this.reset(),this.blurryDetector=new Ye(e),this.leaveBreadcrumb=e.leaveBreadcrumb}reset(){this.canvases=[],this.eventCallback=null,clearTimeout(this.blurTimer),clearInterval(this.photoInterval),clearInterval(this.pollerInterval)}attach(e,t){this.video=document.getElementById(e),this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.video.setAttribute("playsinline","true"),this.video.setAttribute("webkit-playsinline","true");const r=(e,t)=>{this.canvas.width=parseInt(e,10),this.canvas.height=parseInt(t,10),this.leaveBreadcrumb("ClearCam.attach.setCanvasSize",{hasVideo:!!this.video,width:e,height:t})};r(this.video.clientWidth,this.video.clientHeight),this.video.onloadedmetadata=()=>{r(this.video.videoWidth,this.video.videoHeight)};let i=!1;const n=e=>{i||(0,s.Kz)("verify_document_webcam_permission",{action:s.Us.measurement,componentType:s.re.content_script}),this.stream=e,this.eventCallback&&this.eventCallback();try{this.video.srcObject=e}catch(t){window.URL?this.video.src=window.URL.createObjectURL(e):void 0!==this.video.mozSrcObject?this.video.mozSrcObject=e:this.video.src=e}};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.enumerateDevices().then((e=>{const t=e.find((e=>"videoinput"===e.kind));i=""!==t?.label})).finally((()=>{navigator.mediaDevices.getUserMedia(Ke).then(n).catch((e=>{(0,s.Kz)("verify_document_webcam_error",{action:s.Us.measurement,componentType:s.re.content_script,error:e.message}),this.setError(e.name)}))})):this.setError("webcamNotSupported")}unattach(){this.stream&&(this.stream.stop?this.stream.stop():(this.stream.getAudioTracks().forEach((e=>{e.stop()})),this.stream.getVideoTracks().forEach((e=>{e.stop()}))),this.reset())}onReady(e){this.eventCallback=e}async snap(e,t,r){const i=new Array(e).fill(null).map(((e,r)=>this.getSnapPromise(this.video,t*r))),n=await Promise.all(i),o=new Array(e).fill(null),a=new Array(e).fill(null),s=new Array(e).fill(null),c=n.map(((e,t)=>{const r=e.resizedImgData,i=e.canvas,n=e.canvas.width,a=e.canvas.height;return o[t]=i,this.blurryDetector.calculateBlurry(t,r,n,a)}));(await Promise.all(c)).forEach((e=>{const t=e.variance,r=e.blurry,i=e.position;a[i]=t,s[i]=r}));const d=s.filter((e=>e)),u=0===this.varianceOfVariances(a),l=this.leastBlurry(s);r(o[l].toDataURL("image/jpeg",1),u,o.length,s[l],d)}getSnapPromise(e,t){return new Promise((r=>{setTimeout((()=>{r(this.blurryDetector.getImageData(e))}),t)}))}varianceOfVariances(e){const t=e.reduce(((e,t)=>e+t))/e.length;return e.map((e=>Math.pow(e-t,2))).reduce(((e,t)=>e+t))/e.length}leastBlurry(e){let t=-1,r=1/0;return e.forEach(((e,i)=>{e<r&&(r=e,t=i)})),t}},Je=e=>{const t=(0,i.useRef)(e);return(0,i.useMemo)((()=>t.current()),[t])};function Qe(){const e=(0,i.useRef)(),t=(0,i.useCallback)((()=>{clearTimeout(e.current),e.current=void 0}),[]),r=(0,i.useCallback)(((r,i)=>{t(),e.current=window.setTimeout(r,i)}),[t]);return(0,i.useEffect)((()=>()=>t()),[]),(0,i.useMemo)((()=>({startTimeout:r,stopTimeout:t})),[r,t])}const Xe=["idType","imageUpload","pendingVerification","fallingBack","success","failure","failureCamera","failurePolling","failureSubmit","loading","submitting"],et=[{country:{code:"AD",name:"AD"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"AE",name:"AE"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"AF",name:"AF"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"AG",name:"AG"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"AI",name:"AI"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"AL",name:"AL"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"AM",name:"AM"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"AO",name:"AO"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"AR",name:"AR"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"AT",name:"AT"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"AU",name:"AU"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"AZ",name:"AZ"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"BA",name:"BA"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"BB",name:"BB"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"BD",name:"BD"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"BE",name:"BE"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"BF",name:"BF"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"BG",name:"BG"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"BH",name:"BH"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"BI",name:"BI"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"BJ",name:"BJ"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"BM",name:"BM"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"BN",name:"BN"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"BO",name:"BO"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"BR",name:"BR"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"BS",name:"BS"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"BT",name:"BT"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"BW",name:"BW"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"BY",name:"BY"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"BZ",name:"BZ"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"CA",name:"CA"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"CD",name:"CD"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"CG",name:"CG"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"CH",name:"CH"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"CI",name:"CI"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"CL",name:"CL"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"CM",name:"CM"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"CN",name:"CN"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"CO",name:"CO"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"CR",name:"CR"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"CU",name:"CU"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"CV",name:"CV"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"CY",name:"CY"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"CZ",name:"CZ"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"DE",name:"DE"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"DJ",name:"DJ"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"DK",name:"DK"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"DM",name:"DM"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"DO",name:"DO"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"DZ",name:"DZ"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"EC",name:"EC"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"EE",name:"EE"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"EG",name:"EG"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"ES",name:"ES"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"ET",name:"ET"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"FI",name:"FI"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"FJ",name:"FJ"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"FM",name:"FM"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"FO",name:"FO"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"FR",name:"FR"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"GA",name:"GA"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"GB",name:"GB"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"GD",name:"GD"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"GE",name:"GE"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"GG",name:"GG"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"GH",name:"GH"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"GI",name:"GI"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"GM",name:"GM"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"GN",name:"GN"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"GQ",name:"GQ"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"GR",name:"GR"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"GT",name:"GT"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"GU",name:"GU"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"GW",name:"GW"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"GY",name:"GY"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"HK",name:"HK"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"HN",name:"HN"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"HR",name:"HR"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"HT",name:"HT"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"HU",name:"HU"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"ID",name:"ID"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"IE",name:"IE"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"IL",name:"IL"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"IM",name:"IM"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"IN",name:"IN"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"IQ",name:"IQ"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"IS",name:"IS"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"IT",name:"IT"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"JE",name:"JE"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"JM",name:"JM"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"JO",name:"JO"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"JP",name:"JP"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"KE",name:"KE"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"KG",name:"KG"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"KH",name:"KH"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"KM",name:"KM"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"KN",name:"KN"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"KR",name:"KR"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"KW",name:"KW"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"KY",name:"KY"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"KZ",name:"KZ"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"LA",name:"LA"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"LB",name:"LB"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"LC",name:"LC"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"LI",name:"LI"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"LK",name:"LK"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"LR",name:"LR"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"LS",name:"LS"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"LT",name:"LT"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"LU",name:"LU"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"LV",name:"LV"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"LY",name:"LY"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"MA",name:"MA"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"MC",name:"MC"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"MD",name:"MD"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"ME",name:"ME"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"MG",name:"MG"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"MH",name:"MH"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"MK",name:"MK"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"ML",name:"ML"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"MM",name:"MM"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"MN",name:"MN"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"MO",name:"MO"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"MR",name:"MR"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"MS",name:"MS"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"MT",name:"MT"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"MU",name:"MU"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"MV",name:"MV"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"MW",name:"MW"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"MX",name:"MX"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"MY",name:"MY"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"MZ",name:"MZ"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"NA",name:"NA"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"NE",name:"NE"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"NG",name:"NG"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"NI",name:"NI"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"NL",name:"NL"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"NO",name:"NO"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"NP",name:"NP"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"NZ",name:"NZ"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"OM",name:"OM"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"PA",name:"PA"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"PE",name:"PE"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"PG",name:"PG"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"PH",name:"PH"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"PK",name:"PK"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"PL",name:"PL"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"PR",name:"PR"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"PS",name:"PS"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"PT",name:"PT"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"PW",name:"PW"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"PY",name:"PY"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"QA",name:"QA"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"RO",name:"RO"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"RS",name:"RS"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"RU",name:"RU"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"RW",name:"RW"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"SA",name:"SA"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"SC",name:"SC"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"SE",name:"SE"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"SG",name:"SG"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"SI",name:"SI"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"SK",name:"SK"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"SL",name:"SL"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"SM",name:"SM"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"SN",name:"SN"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"SR",name:"SR"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"SS",name:"SS"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"ST",name:"ST"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"SV",name:"SV"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"SZ",name:"SZ"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"TC",name:"TC"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"TD",name:"TD"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"TG",name:"TG"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"TH",name:"TH"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"TJ",name:"TJ"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"TL",name:"TL"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"TM",name:"TM"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"TN",name:"TN"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"TO",name:"TO"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"TR",name:"TR"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"TT",name:"TT"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"TW",name:"TW"},supported_id_types:[{type:"id_card",backside_image_required:!0}]},{country:{code:"TZ",name:"TZ"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"UA",name:"UA"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"UG",name:"UG"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"US",name:"US"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"UY",name:"UY"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"UZ",name:"UZ"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"VC",name:"VC"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"VE",name:"VE"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"VG",name:"VG"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"VI",name:"VI"},supported_id_types:[{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"VN",name:"VN"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0}]},{country:{code:"VU",name:"VU"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"XK",name:"XK"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"YE",name:"YE"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"ZA",name:"ZA"},supported_id_types:[{type:"id_card",backside_image_required:!0},{type:"drivers_licence",backside_image_required:!0},{type:"passport",backside_image_required:!1}]},{country:{code:"ZM",name:"ZM"},supported_id_types:[{type:"passport",backside_image_required:!1}]},{country:{code:"ZW",name:"ZW"},supported_id_types:[{type:"passport",backside_image_required:!1}]}];function tt(e,t){const r=e.replace(/[^A-Za-z0-9\+\/]/g,""),i=r.length,n=t?Math.ceil((3*i+1>>2)/t)*t:3*i+1>>2,o=new Uint8Array(n);let a,s,c=0,d=0;for(let e=0;e<i;e++)if(s=3&e,c|=((u=r.charCodeAt(e))>64&&u<91?u-65:u>96&&u<123?u-71:u>47&&u<58?u+4:43===u?62:47===u?63:0)<<18-6*s,3===s||i-e==1){for(a=0;a<3&&d<n;a++,d++)o[d]=c>>>(16>>>a&24)&255;c=0}var u;return o}function rt(e){(0,s.Kz)("verify_document_video_input_error",{componentType:s.re.content_script,action:s.Us.measurement,error:e})}const it={shouldRetry:(e,t)=>(0,m.i)(e)&&"generic-error"===e.apiClientErrorId&&t<3};function nt(e){return(0,m.w)(it)(e)}function ot(e,t){let r;if("face_image"!==e)r=[e,t];else{0;const i=t.match(/^data:image\/(\w+)/)[1],n=i.replace(/e/,""),o=t.replace(/^data:image\/\w+;base64,/,"");r=[e,new Blob([tt(o)],{type:`image/${i}`}),`${e}.${n}`]}return r}function at(e){const t=Je((()=>Y(Y({},e),{},{countryCode:e.countryCode.toUpperCase(),isKycFallback:e.isKycFallback||!1,applicationContext:e.applicationContext||null,legalNameChange:!!e.legalNameChange,hasFacematchType:!!e.hasFacematchType,allowCountryChange:!!e.allowCountryChange,blurryDetector:new Ye({leaveBreadcrumb:(t,r)=>e.track(t,r),onError:e.onApiError})}))),r=t.client,n=t.track,o=t.onVerified,a=t.webcam,c=t.onApiError,d=t.onPendingResponse,u=t.isKycFallback,l=t.blurryDetector,p=t.skipPendingViewAndDo,y=t.skipSuccessViewAndDo,g=t.pendingVerificationId,_=t.countryCode,h=t.applicationContext,b=t.legalNameChange,v=t.hasFacematchType,k=t.allowCountryChange,w=t.onSuccessPendingChoice,C=function(){const e=(0,i.useRef)(),t=(0,i.useCallback)((()=>{clearInterval(e.current),e.current=void 0}),[]),r=(0,i.useCallback)(((r,i)=>{t(),e.current=window.setInterval(r,i)}),[t]),n=(0,i.useCallback)((()=>!!e.current),[]);return(0,i.useEffect)((()=>()=>t()),[]),(0,i.useMemo)((()=>({startInterval:r,stopInterval:t,isIntervalRunning:n})),[r,t,n])}(),x=C.startInterval,S=C.stopInterval,I=C.isIntervalRunning,E=Qe(),T=E.startTimeout,j=E.stopTimeout,A=Qe().startTimeout,P=$((0,i.useState)("loading"),2),O=P[0],D=P[1],M=$((0,i.useState)((0,m.c)(et)),2),B=M[0],N=M[1],R=$((0,i.useState)("drivers_licence"),2),U=R[0],L=R[1],F=$((0,i.useState)(void 0),2),V=F[0],H=F[1],W=$((0,i.useState)(!1),2),z=W[0],G=W[1],Z=$((0,i.useState)(""),2),K=Z[0],J=Z[1],Q=$((0,i.useState)(""),2),X=Q[0],ee=Q[1],te=$((0,i.useState)(""),2),re=te[0],ie=te[1],ne=$((0,i.useState)(!1),2),oe=ne[0],ae=ne[1],se=$((0,i.useState)(),2),ce=se[0],de=se[1],ue=$((0,i.useState)(void 0),2),le=ue[0],pe=ue[1],fe=$((0,i.useState)(""),2),me=fe[0],ye=fe[1],ge=$((0,i.useState)(!1),2),_e=ge[0],he=ge[1],be=$((0,i.useState)(!1),2),ve=be[0],ke=be[1],we=$((0,i.useState)(0),2),Ce=we[0],xe=we[1],Se=$((0,i.useState)(0),2),Ie=Se[0],Ee=Se[1],Te=$((0,i.useState)(!1),2),je=Te[0],Ae=Te[1],Pe=$((0,i.useState)(0),2),Oe=Pe[0],De=Pe[1],Me=$((0,i.useState)(0),2),Be=Me[0],Ne=Me[1],Re=$((0,i.useState)([]),2),Ue=Re[0],qe=Re[1],Le=$((0,i.useState)(!1),2),Fe=Le[0],Ve=Le[1],He=$((0,i.useState)("regular"),2),We=He[0],ze=He[1],Ge=(0,i.useMemo)((()=>{let e;if(B){const t=q().find(B,(e=>e.country.code===_));t?.supportedIdTypes&&(e=t.supportedIdTypes.slice().reverse())}return e}),[_,B]),Ze=v,Ke=Ze?"face_match":"api_netverify",$e=(0,i.useMemo)((()=>{if(!U||!Ge)return!1;const e=Ge.find((e=>e.type===U));return!!e?.backsideImageRequired}),[U,Ge]),tt=(0,i.useMemo)((()=>{if(ce?.failureReason){const e=ce.failureCode||le?.name||"jumioFailure";return ce?.failureDescription?.hint?{name:e,message:ce.failureReason+" ("+ce.failureDescription.hint+")"}:{name:e,message:ce.failureReason}}return le}),[le,ce]),it=$e?!(!K||!X):!!K,at=!(!K||$e&&!X||Ze&&!re),st=oe?re:void 0,ct=ce?.failureCode,dt=(0,i.useCallback)((e=>{if(!Xe.includes(e))throw new Error("Unknown step");ze("regular"),D(e)}),[]),ut=(0,i.useCallback)(((e,t)=>{let r=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t));n(e,Y({action:s.Us.measurement,componentType:s.re.content_script},r))}),[n]),lt=(0,i.useCallback)((e=>{L(e),ut("verify_document_tapped_document_type",{document_type:e}),n("idv_start_id_selected",{document_type:e,action:s.Us.click,componentType:s.re.button}),dt("imageUpload")}),[dt,ut,n]),pt=(0,i.useCallback)((()=>{if("imageUpload"!==O)throw new Error("switch statements should be exhaustive");ie("")}),[O]),ft=(0,i.useCallback)((()=>{ae(!0)}),[]),mt=(0,i.useCallback)((()=>{ae(!1)}),[]),yt=(0,i.useCallback)((()=>{mt(),pt()}),[pt,mt]),gt=(0,i.useCallback)((()=>{a.reset(),a.unattach(),S(),j(),H(void 0),mt(),J(""),ee(""),ie(""),xe(0)}),[j,S,mt,a]),_t=(0,i.useCallback)(((e,t,r,i,n)=>{ie(e),Ae(t),De(r),Ne(i),qe(n),t&&ke(t)}),[]),ht=(0,i.useCallback)(((e=250)=>{he(!0),setTimeout((()=>{he(!1)}),e)}),[]),bt=(0,i.useCallback)((()=>{if(I())return;let e=3;H(e),x((()=>{e--,0===e?(S(),H(void 0),ht(650),ft()):H(e)}),1e3);T((()=>{a.snap(5,500,((e,t,r,i,n)=>{a.unattach(),_t(e,t,r,i,n)}))}),500)}),[ht,ft,_t,I,x,T,S,a]),vt=(0,i.useCallback)((async()=>{const e="two-factor-web"===h?"account_recovery":h,t=e?`application_context=${e}`:"";try{const e=await nt((()=>r.get(`/v2/jumio-profiles/supported-documents/${_}?${t}`)))();0,N([e.data])}catch(e){f.e.supportedDocs(e)}}),[h,r,_]),kt=(0,i.useCallback)((async(e,t)=>{const r=q().get(t,"preview"),i=(await l.calculateBlurryFromImageUrl(r)).blurry;"front"===e?(J(t),xe(i)):"back"===e?(ee(t),Ee(i)):"face"===e&&(ie(t),Ne(i))}),[l]),wt=(0,i.useCallback)((async e=>{let t;try{t=await nt((()=>r.get(`/v2/jumio-profiles/${e}`)))()}catch(t){f.e.idvProfilePoll(t,!e),dt("failurePolling")}if(t){de(t.data);const e=t.data.id,r=t.data.status;"completed"===r?(o?.(),y?y():dt("success")):"success_pending_choice"===r?w?w(t.data):window.location.href="/verifications/documents/change_country":"failed"===r?dt("failure"):"falling_back"===r?dt("fallingBack"):A((()=>wt(e)),1e4)}}),[r,dt,o,y,A,w]),Ct=(0,i.useCallback)((async()=>{(0,s.KQ)("submit_idv");const e=new FormData;b&&e.append("legal_name_changed","true"),k&&e.append("allow_country_change","true"),e.append("country_code",_),e.append("id_type",U),e.append("capture_method","file"),e.append("webcam_spoof_detected",String(ve)),e.append("front_webcam_spoof",String(!1)),e.append("front_num_snaps",String(0)),e.append("front_variance",String(Ce)),e.append("front_snap_blurry_scores",JSON.stringify([])),e.append("back_webcam_spoof",String(!1)),e.append("back_num_snaps",String(0)),e.append("back_variance",String(Ie)),e.append("back_snap_blurry_scores",JSON.stringify([])),e.append("face_webcam_spoof",String(je)),e.append("face_num_snaps",String(Oe)),e.append("face_variance",String(Be)),e.append("face_snap_blurry_scores",JSON.stringify(Ue)),e.append("creation_type",Ke);const t=ot("front_image",K);if(e.append(...t),$e){const t=ot("back_image",X);e.append(...t)}if(Ze){const t=ot("face_image",re);e.append(...t)}e.append("is_kyc_fallback",String(u)),n("verify_document_upload_attempt",{action:s.Us.click,componentType:s.re.button});const i=nt((()=>r.post("/v2/jumio-profiles",e)));let o;try{o=await i(),(0,s.KQ)("idv_submitted"),ut("verify_document_uploaded_success",{status:o.data.status})}catch(e){pe({name:"submitImagesError",message:e.message}),f.e.idvSubmit(e,{context:"onboarding",statusCode:(0,m.i)(e)?e.statusCode:void 0,rawResponse:(0,m.i)(e)?String(e.response):void 0}),dt("failureSubmit")}o&&(de(o.data),d&&d(o.data),p?p():(dt("pendingVerification"),wt(o.data.id)))}),[k,Ie,X,$e,dt,r,_,Ke,Be,re,Oe,Ue,je,Ze,Ce,K,u,b,ut,d,wt,U,p,n,ve]),xt=(0,i.useCallback)((()=>{G(!0)}),[]),St=(0,i.useCallback)((()=>{a.onReady((()=>xt()))}),[xt,a]),It=(0,i.useCallback)((async()=>{try{Ve(!0),dt("submitting"),await Ct()}catch(e){c(e)}finally{Ve(!1)}}),[dt,c,Ct]),Et=It,Tt=(0,i.useCallback)((async()=>{try{if(v&&!await async function(){return navigator.mediaDevices?.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((e=>0!==e.filter((e=>"videoinput"===e.kind)).length||(rt("no_video_inputs_available"),!1))).catch((e=>(rt(e.message),!1))):(rt("media_devices_api_not_supported"),Promise.resolve(!0))}())return ye("NotFoundError"),void dt("failureCamera");await vt(),dt("idType")}catch(e){pe(e),dt("failure")}}),[dt,vt,v]),jt=(0,i.useCallback)((e=>{e?p?p():(D("pendingVerification"),wt(e)):Tt()}),[wt,p,Tt]),At=(0,i.useCallback)((()=>{pe(void 0),ye(""),dt("loading"),jt(null),gt()}),[dt,jt,gt]);return(0,i.useEffect)((()=>{jt(g)}),[]),(0,i.useMemo)((()=>({step:O,timer:V,handleContinueCapture:Et,reinitializeStore:At,webcamActive:z,preview:oe,previewImage:st,snap:bt,resetWebcamCapture:yt,isSubmitting:Fe,failureCode:ct,changeStep:dt,errorMessage:tt,frontBlurryScore:Ce,backImageData:X,hasFacematchType:v,selectedIdType:U,backsideImageRequired:$e,facematchRequired:Ze,frontImageData:K,allowFacematchContinue:it,allowFileUpload:at,uploadImage:kt,setViewWidth:ze,markWebcamActiveOnReady:St,selectIdType:lt,resetWebcamAndImageData:gt,supportedIdTypes:Ge,flashVisible:_e,cameraErrorName:me,error:le,viewWidth:We,onImageUploadSubmit:It,setError:pe,freeze:ft,unfreeze:mt,faceImageData:re})),[O,V,Et,At,z,oe,st,bt,yt,Fe,ct,dt,tt,Ce,X,v,U,$e,Ze,K,it,at,kt,ze,St,lt,gt,Ge,_e,me,le,We,It,pe,ft,mt,re])}const st=(e,t)=>!!e&&(e>=.6&&"front"===t);function ct(){const e=(0,f.u)(),t=e.countryCode,r=e.forceFacematchType,n=e.noBorder,c=e.transparentBackground,d=e.onRetry,u=e.skipSuccessViewAndDo,l=e.isKycFallback,p=void 0!==l&&l,y=e.skipPendingViewAndDo,_=e.track,h=e.applicationContext,b=e.client,v=e.onContinue,k=e.onApiError,w=e.loader,C=e.noMinWidth,x=e.noMaxWidth,S=e.failureViewTitle,I=e.onPendingResponse,E=G(e,z),T=(0,o.useBreakpoints)().isPhone,j=Je((()=>new $e({leaveBreadcrumb:(e,t)=>_(e,t),onError:k}))),A=at(Y(Y({webcam:j},E),{},{isKycFallback:p,hasFacematchType:"face"===r,applicationContext:h,client:b??(0,m.g)({environment:E.environment,locale:E.locale,baseUrl:E.apiBaseUrl}),track:_,onApiError:k,countryCode:t,onPendingResponse:I,skipPendingViewAndDo:y,skipSuccessViewAndDo:u})),P=A.step,O=A.timer,D=A.handleContinueCapture,M=A.reinitializeStore,B=A.webcamActive,N=A.preview,R=A.previewImage,U=A.snap,q=A.resetWebcamCapture,L=A.isSubmitting,F=A.failureCode,V=A.changeStep,H=A.errorMessage,W=A.frontBlurryScore,Z=A.backImageData,K=A.hasFacematchType,$=A.selectedIdType,J=A.backsideImageRequired,Q=A.facematchRequired,X=A.frontImageData,te=A.allowFacematchContinue,ie=A.allowFileUpload,ne=A.uploadImage,oe=A.setViewWidth,ae=A.markWebcamActiveOnReady,se=A.selectIdType,ce=A.resetWebcamAndImageData,de=A.supportedIdTypes,ue=A.flashVisible,le=A.cameraErrorName,pe=A.error,fe=A.viewWidth,me=A.onImageUploadSubmit;(0,i.useEffect)((()=>{_("verify_document_viewed",{action:s.Us.render,componentType:s.re.page})}),[]);const ye=(0,i.useCallback)((()=>{d?.(F),M()}),[F,d,M]),ge=(0,i.useCallback)((()=>{V("idType")}),[V]),_e=(0,i.useCallback)((()=>{const e=S?S(F):void 0;return(0,g.jsx)(ee,{error:H,onRetry:ye,title:e})}),[H,ye,S,F]),he=(0,i.useCallback)((()=>{v?.()}),[v]),be=(0,i.useCallback)((()=>(0,g.jsx)(m.b,{onContinue:he})),[he]),ve=(0,i.useCallback)((()=>(0,g.jsx)(f.C,{maintainHeight:!0,children:(0,g.jsx)(a.Box,{flexGrow:1,alignItems:"center",justifyContent:"center",minWidth:150,minHeight:150,height:"100%",children:w})})),[w]),ke=(0,i.useCallback)((()=>st(W,"front")),[W]),we=(0,i.useCallback)((()=>(0,g.jsx)(Be,{webcam:j,webcamActive:B,preview:N,previewImage:R,onCapture:U,timer:O,continueCapture:D,retryCapture:q,isSubmitting:L})),[D,L,N,R,q,U,O,j,B]),Ce=(0,i.useCallback)((()=>(0,g.jsx)(Ve,{imageCaptureView:K?we():null,idType:$,backImageRequired:J,hasFacematchType:Q,frontImage:X,backImage:Z,showFrontBlurryMessage:ke(),allowContinue:te,allowSubmit:ie,onUpload:ne,onSubmit:me,onGoBack:()=>{ce(),ge()},isSubmitting:L,onRenderWebcam:()=>{oe("wide"),ae()}})),[K,we,$,J,Q,X,Z,ke,te,ie,ne,me,L,ce,ge,oe,ae]),xe=(0,i.useCallback)((e=>{se(e.type)}),[se]),Se=(0,i.useMemo)((function(){let e=(0,g.jsx)(g.Fragment,{});switch(P){case"loading":e=ve();break;case"submitting":e=(0,g.jsx)(Ge,{});break;case"idType":e=(0,g.jsx)(m.a,{country:t,onSelectId:xe,supportedDocTypes:de});break;case"imageUpload":e=Ce();break;case"pendingVerification":e=(0,g.jsx)(f.V,{logger:_});break;case"fallingBack":e=(0,g.jsx)(f.V,{fallback:!0,logger:_});break;case"success":e=be();break;case"failure":e=_e();break;case"failureCamera":e=(0,g.jsx)(re,{errorName:le,onRetry:ye});break;case"failurePolling":e=(0,g.jsx)(We,{});break;case"failureSubmit":e=(0,g.jsx)(m.S,{error:pe,onRetry:ye});break;default:{const t=P;f.e.idCaptureLogAnomaly(new Error(`Unhandled step ${t}`)),e=(0,g.jsxs)("div",{children:["Unhandled step: ",(0,g.jsx)("code",{children:t})]})}}return e}),[ye,_e,Ce,ve,pe,P,be,_,t,xe,de,le]);return(0,g.jsx)(lt,{flash:ue,noBorder:n,isPhone:T,noMinWidth:C,noMaxWidth:x,viewWidth:fe,transparentBackground:c,children:Se})}const dt=(0,i.memo)(ct);function ut(e){return(0,g.jsx)(m.I,Y(Y({},e),{},{children:(0,g.jsx)(dt,{})}))}const lt=n.ZP.div.withConfig({displayName:"bundle-337bdc49__Container",componentId:"h2yrr0-24"})(["display:flex;align-items:flex-start;align-self:stretch;flex-direction:column;position:relative;justify-content:center;",";width:100%;max-width:",";background-color:",";overflow:hidden;padding-top:0;font-family:",";font-weight:",";-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;transition:filter 0.1s ease-in-out;"," "," ",""],(({isPhone:e,noMinWidth:t})=>e||t?"":"min-width: 512px"),(({viewWidth:e,noMaxWidth:t})=>t?"":"wide"===e?"1024px":"512px"),(({theme:e,transparentBackground:t})=>t?e.color.transparent:e.color.background),(({theme:e})=>e.fontFamily.regular),(({theme:e})=>e.fontWeight.regular),(({flash:e})=>e?"filter: opacity(0);":""),(({noBorder:e,theme:t,isPhone:r})=>r||e?"":`${t.border.border};`),(({isPhone:e})=>e?"align-self: stretch;":""))},2412:(e,t,r)=>{r.d(t,{I:()=>$e,S:()=>et,V:()=>U,a:()=>nt,b:()=>st,c:()=>Ve,d:()=>N,e:()=>M,g:()=>Ye,i:()=>Je,u:()=>B,w:()=>Qe});var i=r(0),n=r(10),o=r(2),a=r(784),s=r(264),c=r(1321),d=r(33),u=r(7),l=r(269),p=r(11),f=r(9),m=r(16),y=r(181),g=r(781),_=r(82),h=r(495),b=r(52),v=r(35),k=r(341),w=r(55),C=r(19),x=r(14),S=r(61);const I=["message"],E=["children"];function T(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],c=!0,d=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function M(){const e=(0,a.u)().track;return(0,i.useCallback)(e,[e])}function B(...e){const t=M();(0,i.useEffect)((()=>{t(...e)}),[])}function N({title:e,subtitle:t,errorMessages:r,actions:i,actionsSubtitle:n}){return(0,o.jsx)(a.C,{title:e,subtitle:t,actions:i,actionsSubtitle:n,testID:"id-capture-verification-error",children:r&&(0,o.jsx)(R,{children:r})})}const R=n.ZP.div.withConfig({displayName:"bundle-4421b30f__Container",componentId:"sc-1dxkmbj-0"})(["width:100%;margin:0px 0px 20px;padding:20px;font-weight:",";text-align:center;color:",";border-radius:8px;background-color:",";"],(({theme:e})=>e.fontWeight.medium),(({theme:e})=>e.color.text),(({theme:e})=>e.color.accessoryBackground)),U=(0,i.memo)(N),q=e=>e.toLowerCase().split(/[_-]+/)[0]||"en",L=["es-AR","es-CL","es-CO","es-CR","es-EC","es-mx","es-NI","es-PA","es-PE","es-US","es-VE"],F=e=>L.some((t=>t.toLowerCase()===e.toLowerCase()))?"es-LA":"es"===e?"es-ES":"pt"===e?"pt-BR":e,V=e=>{const t=F(e);return["es-ES","es-LA","pt-BR"].includes(t)?t:q(e)};let H;const W=e=>{const t=(0,i.useRef)(),r=O((0,i.useState)(!!H),2),n=r[0],o=r[1],a=O((0,i.useState)(H||{}),2),s=a[0],c=a[1],d=(0,i.useRef)(),u=(0,i.useMemo)((()=>F(e)),[e]),l=(0,i.useCallback)((e=>{c(e),H=e,o(!0)}),[c,o]),p=(0,i.useCallback)((()=>{c({}),H=void 0,o(!1)}),[c,o]);return(0,i.useEffect)((()=>{d.current=!0;const e=["en","en-US"].includes(u);e||t.current===u?e&&l({}):(p(),async function(){try{const e=await fetch(`https://translations.coinbase.com/aab9bdc6d/latest/${u}/id-capture-messages.json`);if(!e.ok)throw new Error("Missing translations");{const t=await e.json(),r={};Object.keys(t).forEach((e=>{r[e]=t[e].defaultMessage})),d.current&&l(r)}}catch(e){d.current&&l({})}}()),t.current=u}),[u,l,p]),(0,i.useEffect)((()=>()=>{d.current=!1}),[]),[n,s]},z=e=>(0,y.paletteValueToCssVar)(e),G=z(["gray100",.3]),Z=z(["gray100",.5]),Y=z("gray100"),K=z(["gray100",1e-4]),$=m.palette.primary,J=z("blue70"),Q=z("blue80"),X=m.palette.primaryWash,ee=z(["blue80",.03]),te=z("blue5"),re=z("blue10"),ie=z("blue20");z("blue40");const ne=z("gray10"),oe=m.palette.positive,ae=z("green50"),se=z("green10"),ce=z(["gray80",.02]),de=z("gray15"),ue=z(["gray80",.33]),le=z("gray40");z("gray50");const pe=z("gray5"),fe=z("gray60"),me=z("gray90"),ye=z("gray10"),ge=z("gray60"),_e=m.palette.primaryWash,he=m.palette.negative,be=m.palette.negative,ve=m.palette.negativeForeground,ke=z("gray0"),we=z(["gray0",.25]),Ce=z(["gray0",.4]),xe=z(["gray0",.6]),Se=z(["gray0",.7]),Ie=z(["gray0",1e-4]),Ee=z("yellow30"),Te=m.palette.line,je={black50:Z,linkBlue:$,vibrantBlue:"#0152c3",lightSkyBlue:"#B0CAFF",positiveGreen:oe,positiveGreenHover:ae,superLightGrey:"#f5f6f8",lightGrey:"#f7f8fa",midLightGrey:pe,superLightBlueGrey:X,whiteBlueGrey:ne,lightBlueGrey:"#90a1b8",midGrey:"#9da6b1",middleDarkBlueGrey:"#5f7285",midDarkBlueGrey:"#4e5c68",darkBlueGrey:"#202a36",oceanBlue:"#0f3256",oceanBlueGrey:"#113355",deepOceanBlue:"#002f6b",darkOceanBlue:"#043169",midOceanBlue:"#0b3466"},Ae={hidden:-1,normal:0,elevated:1,high:2,extraHigh:25,backdrop:999,overlay:1e3,top:1001},Pe={tiny:"2px",small:"4px",medium:"8px",large:"16px",huge:"24px",enormous:"32px"},Oe='-apple-system,\nBlinkMacSystemFont,\n"Segoe UI",\n"Roboto",\n"Oxygen",\n"Ubuntu",\n"Cantarell",\n"Fira Sans",\n"Droid Sans",\n"Helvetica Neue",\nsans-serif',De={fontFamily:`'CoinbaseSans', ${Oe}`,sans:`'CoinbaseSans', ${Oe}`,text:`'CoinbaseText', ${Oe}`,display:`'CoinbaseDisplay', ${Oe}`},Me={regular:De.fontFamily,sans:De.sans,text:De.text,display:De.display,monospace:{fontFamily:'\n  "Monaco",\n  monospace;'}.fontFamily},Be={background:ke,backgroundHover:ce,backgroundSelected:ce,backgroundActive:_e,backgroundPill:X,backgroundAccent:$,backgroundAlt:ke,backgroundHoverAlt:pe,backgroundAccentAlt:G,backgroundWash:ee,text:Y,textLight:fe,textLightAlt:le,textAccent:$,textAccentHover:J,textAccentActive:Q,border:Te,borderHover:ye,borderAccent:$,borderAccentHover:Q,buttonFill:$,buttonFillHover:J,buttonFillActive:Q,buttonOutline:pe,buttonOutlineHover:$,buttonOutlineActive:$,positive:oe,positiveHover:ae,positiveLight:se,negative:he,negativeForeground:ve,warning:Ee,iconBackground:pe,iconFill:$,iconBackgroundAccent:$,iconFillAccent:ke,iconLight:fe,iconWarning:be,iconGreyDark:ge,iconGreyDarkAlt:de,iconBlue:ie,iconBlueBorder:te,placeholder:le,disabled:ce,boxShadow:ce,maskDark:"rgba(50, 53, 61, 0.33)",maskLight:Se,maskBlue:"rgba(26,54,80,0.7)",accessoryActive:$,accessoryInactive:ue,accessoryBackground:ce,twitter:"#499FEC",facebook:"#415894",white:ke,white25:we,white40:Ce,white60:xe,grey90:me,blue10:re,black0:K,white0:Ie,transparent:"transparent",slate:fe,slateDark:Y,cornFlowerBlue:$,catalinaBlue:$,heather:pe,midnightBlue:$,black:Y},Ne={border:`1px solid ${Te}`,noRadius:"0px",subtleRadius:"2px",borderRadius:`${Pe.small}`,mediumBorderRadius:`${Pe.medium}`,largeBorderRadius:`${Pe.large}`,radius:`${Pe.small}`,insetRadius:"3px"},Re={default:`0 4px 12px 0 ${Be.boxShadow}`,hover:`0 2px 5px ${z(["gray100",.08])}`,deep:`0 4px 16px ${z(["blue100",.05])}`,light:`0px 8px 16px ${z(["gray5",.5])}`},Ue={typeVariant:!1,airdrop:{color:{grey5:"#F5F7F8",grey10:"#E7EBEE",grey30:"#B8C2CC",grey50:"#8899AA",grey60:z("gray60"),grey70:"#587088",grey80:"#113355",background:"#F5F7F8"},spacing:{tiny:"6px",small:"12px",medium:"24px",large:"36px",xl:"48px",xxl:"96px"},pageBackgroundWidth:1440,pageContentPadding:24,borderRadius:"7.68px",fontFamily:'CoinbaseSans-Medium,CoinbaseSans,\'Avenir Next\',-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;'},size:Pe,fontSize:{tinier:"10px",tiny:"12px",small:"14px",medium:"16px",large:"18px",huge:"24px",super:"32px",mega:"48px"},fontWeight:{ultraLight:400,thin:400,light:400,regular:400,medium:400,demiBold:500,bold:500,heavy:500},fontFamily:Me,color:A(A({},je),Be),border:Ne,boxShadow:Re,layout:{width:1180,padding:24},breakpoints:{giant:1170,desktop:992,tablet:1040,phone:768,phone_small:560},zIndex:Ae,_snapshotDisplayName:"defaultTheme"};function qe({children:e,locale:t}){const r=O(W(t),2),i=r[0],a=r[1];return i?(0,o.jsx)(l.Z,{messages:a||{},locale:t,children:(0,o.jsx)(n.f6,{theme:Ue,children:e})}):null}const Le=(e,t)=>{if(Array.isArray(e))return e.map((e=>Le(e,t)));if((0,d.isPlainObject)(e)){const r={};return Object.keys(e).forEach((i=>{r[t(i)]=Le(e[i],t)})),r}return e},Fe=Le,Ve=e=>e?Fe(e,(e=>(0,d.camelCase)(e))):e,He=["es-LA","pt-PT","de","en","es","fr","ja","it","nl","pl","pt","ru","th","tr"];const We=()=>(c.Z.get("coinbase_locale")||(()=>{let e;if(e=navigator.languages&&navigator.languages.length>0?navigator.languages[0]:navigator.language||navigator.userLanguage,e&&!He.includes(e)){const r=V(e);return t=r,He.includes(t)?r:null}return e;var t})()||"en").toLowerCase();class ze{static constructQueryString(e){const t=(0,d.omitBy)(e,(e=>null==e));return(0,d.map)(t,((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&")}constructor(e){this.baseUrl=void 0,this.userLocale=void 0,this.fetch=(e,t,r,i)=>{let n,o,a;if("GET"===t){const t=r?ze.constructQueryString(r):"";o=`${e}${e.includes("?")?"&":"?"}${t}`}else"POST"===t&&(r instanceof FormData?n=r:(n=JSON.stringify(r),a="application/json"));const s=new Headers(A(A({Accept:"application/json","Accept-Language":this.userLocale||We(),"CB-VERSION":"2018-06-18","CB-CLIENT":"CoinbaseWeb"},i),(0,u.zy)()));a&&s.set("Content-Type",a),this.deviceFingerprint&&s.set("CB-FP",this.deviceFingerprint),this.newStyleDeviceFingerprint&&s.set("CB-FP2",this.newStyleDeviceFingerprint);let c=null,d=null,l=null;return new Promise(((r,i)=>{fetch(this.baseUrl+(o||e),{method:t,body:n,headers:s,redirect:"follow",credentials:"include"}).then((e=>{if(204===e.status)return r(null);d=Ge(e.headers,"x-request-id"),l=Ge(e.headers,"cf-ray");const t={requestId:d,cfRay:l},i=e.json();return c=e.status,e.status>=200&&e.status<300?i.then((e=>r(A({headers:t},Ve(e))))):i.then((e=>{throw e}))})).catch((e=>{let t;if(e?.errors){const r=e.errors[0],i=r.message,n=T(r,I);t=A({message:i,response:e,statusCode:c,requestId:d,cfRay:l},n)}else t={message:"Something went wrong, please try again.",response:e,requestId:d,cfRay:l,statusCode:c};["expired_token","invalid_token"].includes(e?.errors?.[0].id)&&(localStorage.clear(),window.location.reload()),i(Ve(t))}))}))},this.post=(e,t,r={})=>this.fetch(e,"POST",t,r),this.get=(e,t,r={})=>this.fetch(e,"GET",t,r),this.userLocale=e.locale,this.baseUrl=e.baseUrl}get deviceFingerprint(){return c.Z.get("df")}get newStyleDeviceFingerprint(){return c.Z.get("df2")}}function Ge(e=new Headers({}),t){const r=e.get(t)??"";return Array.isArray(r)?r[0]||"":r}const Ze={development:"https://coinbase-dev.cbhq.net/api",staging:"https://coinbase-dev.cbhq.net/api",production:"https://www.coinbase.com/api"},Ye=e=>new ze(A(A({},e),{},{baseUrl:e.baseUrl||Ze[e.environment]||Ze.development}));function Ke(e){let t=e.children,r=T(e,E);const n=r.applicationContext,c=r.onfido,d=r.track,u=(0,i.useCallback)(((e,t)=>{d(e,A(A({},t),{},{is_unified_idv:!0,request_source:n||"none",is_onfido_flow:c}))}),[d,n,c]),l=(0,i.useMemo)((()=>A(A({},r),{},{track:u,client:r.client??Ye({environment:r.environment,locale:r.locale,baseUrl:r.apiBaseUrl}),loader:r.loader??(0,o.jsx)(s.Spinner,{color:"primary",size:5})})),[r,u]);return(0,o.jsx)(qe,{locale:r.locale,children:(0,o.jsx)(a.I.Provider,{value:l,children:t})})}const $e=(0,i.memo)(Ke);function Je(e){return"object"==typeof e&&null!==e&&"apiClientErrorId"in e&&"message"in e&&"response"in e&&"requestId"in e&&"cfRay"in e&&"statusCode"in e}const Qe=({shouldRetry:e})=>t=>{let r=0;return async function i(){let n;try{n=await t()}catch(t){if(await e(t,r))return new Promise((e=>{setTimeout((()=>{r+=1,e(i())}),2**r*1e3)}));throw t}return n}},Xe=(0,p.vU)({title:{id:"SubmitFailureView.title",defaultMessage:"Image upload failed"},bannerContent:{id:"SubmitFailureView.bannerContent",defaultMessage:"You can try again or contact support if the issue persists."},tryAgain:{id:"SubmitFailureView.tryAgain",defaultMessage:"Try again"},needHelp:{id:"SubmitFailureView.needHelp",defaultMessage:"Need help?"}});function et({error:e,onRetry:t}){B("verify_document_viewed_failure_submit",{action:u.Us.render,componentType:u.re.page});const r=(0,f.Z)().formatMessage;return(0,o.jsx)(a.C,{title:r(Xe.title),image:(0,o.jsx)(h.HeroSquare,{name:"idIssue",dimension:"200x200"}),children:(0,o.jsxs)(b.VStack,{gap:4,children:["string"==typeof e?.message?(0,o.jsx)(g.j,{title:e.message,variant:"warning",startIcon:"error",children:r(Xe.bannerContent)}):null,(0,o.jsxs)(b.VStack,{gap:2,children:[(0,o.jsx)(_.Button,{onPress:t,block:!0,children:r(Xe.tryAgain)}),(0,o.jsx)(_.Button,{variant:"secondary",to:"https://help.coinbase.com/contact-us",block:!0,testID:"need-help-button",target:"_blank",children:r(Xe.needHelp)})]})]})})}const tt=(0,p.vU)({title:{id:"SelectIdType.title",defaultMessage:"Select your ID type"},driverLicense:{id:"SelectIdType.driverLicense",defaultMessage:"Driver’s license"},idCard:{id:"SelectIdType.idCard",defaultMessage:"Identity card"},idCardUS:{id:"SelectIdType.idCardUS",defaultMessage:"Government-issued ID"},passport:{id:"SelectIdType.passport",defaultMessage:"Passport"},driverLicenseHK:{id:"SelectIdType.driverLicenseHK",defaultMessage:"Driver’s license (Hong Kong only)"},idCardHK:{id:"SelectIdType.idCardHK",defaultMessage:"Identity card (Hong Kong only)"},passportHK:{id:"SelectIdType.passportHK",defaultMessage:"Passport (Hong Kong only)"},usDriverLicenseDescription:{id:"SelectIdType.usDriverLicenseDescription",defaultMessage:"Valid driver’s license or permit"},usIdCardDescription:{id:"SelectIdType.usIdCardDescription",defaultMessage:"Permanent Resident Card or State ID"},frontAndBack:{id:"SelectIdType.frontAndBack",defaultMessage:"Front and back"},photoPage:{id:"SelectIdType.photoPage",defaultMessage:"Photo page"},noIDsCtaLabel:{id:"SelectIdType.noIDsCtaLabel",defaultMessage:"I don’t have any of these IDs"},privacyConsent:{id:"SelectIdType.privacyConsent",defaultMessage:"By selecting your ID type on this screen, you agree to our (and our service providers') collection, use, and storage of your biometric information for identity verification.  Learn more in Section 7 of our {privacyPolicyLink}."},spanishNationalIdInfo:{id:"SelectIdType.spanishNationalIdInfo",defaultMessage:"If you have Spanish nationality you should use your Spanish national ID"},privacyPolicyLink:{id:"SelectIdType.privacyPolicyLink",defaultMessage:"Privacy Policy"}});function rt({idType:e,onSelectId:t,isInUS:r,isInHK:n}){const a=(0,f.Z)().formatMessage,s=(0,i.useMemo)((()=>{switch(e.type){case"drivers_licence":return a(n?tt.driverLicenseHK:tt.driverLicense);case"id_card":return a(r?tt.idCardUS:n?tt.idCardHK:tt.idCard);case"passport":return a(n?tt.passportHK:tt.passport)}}),[e.type,a,r,n]),c=(0,i.useMemo)((()=>{if(r)switch(e.type){case"drivers_licence":return tt.usDriverLicenseDescription;case"id_card":return tt.usIdCardDescription}return e.backsideImageRequired?tt.frontAndBack:tt.photoPage}),[e,r]);return(0,o.jsx)(C.Box,{bordered:!0,borderRadius:"rounded",testID:`id-capture-id-type-${e.type}`,children:(0,o.jsx)(k.ListCell,{title:s,description:a(c),accessory:"arrow",onPress:()=>t(e),media:(0,o.jsx)(w.Icon,{name:"identityCard",size:"s"}),borderRadius:"rounded",innerSpacing:{spacingHorizontal:3,spacingVertical:1}})})}function it({country:e,onSelectId:t,supportedDocTypes:r}){const i=(0,f.Z)().formatMessage;return B("verify_document_select_document_type_viewed",{action:u.Us.render,componentType:u.re.page}),(0,o.jsxs)(b.VStack,{gap:4,width:"100%",children:[(0,o.jsxs)(b.VStack,{gap:1,children:[(0,o.jsx)(x.TextDisplay3,{as:"h1",children:i(tt.title)}),"ES"===e&&(0,o.jsx)(x.TextBody,{as:"p",color:"foregroundMuted",children:i(tt.spanishNationalIdInfo)})]}),(0,o.jsx)(b.VStack,{gap:2,children:r.map((r=>(0,o.jsx)(rt,{idType:r,onSelectId:t,isInUS:"US"===e,isInHK:"HK"===e},`id-capture-id-type-${r.type}`)))}),(0,o.jsx)(C.Box,{spacing:2,bordered:!0,borderRadius:"rounded",children:(0,o.jsx)(x.TextBody,{as:"p",testID:"selectIdType-privacyLink",color:"foregroundMuted",children:i(tt.privacyConsent,{privacyPolicyLink:(0,o.jsx)(x.Link,{href:"https://www.coinbase.com/legal/privacy",target:"_blank",rel:"noopener noreferrer",openInNewWindow:!0,children:i(tt.privacyPolicyLink)},"privacy-link")})})}),(0,o.jsx)(v.Button,{block:!0,variant:"secondary",to:"https://help.coinbase.com/en/coinbase/managing-my-account/verify-my-identity/what-type-of-photo-id-can-i-provide",target:"_blank",children:i(tt.noIDsCtaLabel)})]})}const nt=(0,i.memo)(it),ot=(0,p.vU)({title:{id:"IdCapture.SuccessView.title",defaultMessage:"Identity verified"},subtitle:{id:"IdCapture.SuccessView.subtitleText",defaultMessage:"Congrats! Your identity has been successfully verified."},continueAction:{id:"IdCapture.SuccessView.continueAction",defaultMessage:"Continue"}});function at({onContinue:e}){B("verify_document_viewed_success",{action:u.Us.render,componentType:u.re.page});const t=(0,f.Z)().formatMessage;return(0,o.jsx)(C.Box,{alignContent:"center",justifyContent:"center",testID:"idv-success-view",width:"100%",children:(0,o.jsx)(a.C,{title:t(ot.title),subtitle:t(ot.subtitle),image:(0,o.jsx)(S.Pictogram,{name:"checkmark",dimension:"48x48",scaleMultiplier:2}),children:(0,o.jsx)(C.Box,{spacingTop:2,children:(0,o.jsx)(_.Button,{onPress:e,block:!0,children:t(ot.continueAction)})})})})}const st=(0,i.memo)(at)},2301:(e,t,r)=>{r.r(t),r.d(t,{default:()=>et});var i=r(0),n=r(7),o=r(784),a=r(2412),s=r(11),c=r(9),d=r(35),u=r(340),l=r(19),p=r(52),f=r(2),m=r(1557),y=r(212),g=r(4),_=r(1396),h=r(82),b=r(61),v=r(14);r(292),r(1321),r(33),r(462);const k=["selectedIdType","setApplicationId","facematchType","onSubmitIdvProfile","isIdBackSideRequired"];function w(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],c=!0,d=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}const T=void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};var j=[],A=[],P="undefined"!=typeof Uint8Array?Uint8Array:Array,O=!1;function D(){O=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)j[t]=e[t],A[e.charCodeAt(t)]=t;A["-".charCodeAt(0)]=62,A["_".charCodeAt(0)]=63}function M(e,t,r){for(var i,n,o=[],a=t;a<r;a+=3)i=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(j[(n=i)>>18&63]+j[n>>12&63]+j[n>>6&63]+j[63&n]);return o.join("")}function B(e){var t;O||D();for(var r=e.length,i=r%3,n="",o=[],a=16383,s=0,c=r-i;s<c;s+=a)o.push(M(e,s,s+a>c?c:s+a));return 1===i?(t=e[r-1],n+=j[t>>2],n+=j[t<<4&63],n+="=="):2===i&&(t=(e[r-2]<<8)+e[r-1],n+=j[t>>10],n+=j[t>>4&63],n+=j[t<<2&63],n+="="),o.push(n),o.join("")}function N(e,t,r,i,n){var o,a,s=8*n-i-1,c=(1<<s)-1,d=c>>1,u=-7,l=r?n-1:0,p=r?-1:1,f=e[t+l];for(l+=p,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+l],l+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+l],l+=p,u-=8);if(0===o)o=1-d;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=d}return(f?-1:1)*a*Math.pow(2,o-i)}function R(e,t,r,i,n,o){var a,s,c,d=8*o-n-1,u=(1<<d)-1,l=u>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,m=i?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+l>=1?p/c:p*Math.pow(2,1-l))*c>=2&&(a++,c/=2),a+l>=u?(s=0,a=u):a+l>=1?(s=(t*c-1)*Math.pow(2,n),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,n),a=0));n>=8;e[r+f]=255&s,f+=m,s/=256,n-=8);for(a=a<<n|s,d+=n;d>0;e[r+f]=255&a,f+=m,a/=256,d-=8);e[r+f-m]|=128*y}var U={}.toString,q=Array.isArray||function(e){return"[object Array]"==U.call(e)};function L(){return V.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function F(e,t){if(L()<t)throw new RangeError("Invalid typed array length");return V.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=V.prototype:(null===e&&(e=new V(t)),e.length=t),e}function V(e,t,r){if(!(V.TYPED_ARRAY_SUPPORT||this instanceof V))return new V(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return z(this,e)}return H(this,e,t,r)}function H(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i);V.TYPED_ARRAY_SUPPORT?(e=t).__proto__=V.prototype:e=G(e,t);return e}(e,t,r,i):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!V.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|K(t,r);e=F(e,i);var n=e.write(t,r);n!==i&&(e=e.slice(0,n));return e}(e,t,r):function(e,t){if(Y(t)){var r=0|Z(t.length);return 0===(e=F(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?F(e,0):G(e,t);if("Buffer"===t.type&&q(t.data))return G(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function W(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function z(e,t){if(W(t),e=F(e,t<0?0:0|Z(t)),!V.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function G(e,t){var r=t.length<0?0:0|Z(t.length);e=F(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function Z(e){if(e>=L())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L().toString(16)+" bytes");return 0|e}function Y(e){return!(null==e||!e._isBuffer)}function K(e,t){if(Y(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return we(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Ce(e).length;default:if(i)return we(e).length;t=(""+t).toLowerCase(),i=!0}}function $(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return le(this,t,r);case"utf8":case"utf-8":return se(this,t,r);case"ascii":return de(this,t,r);case"latin1":case"binary":return ue(this,t,r);case"base64":return ae(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function J(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function Q(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=V.from(t,i)),Y(t))return 0===t.length?-1:X(e,t,r,i,n);if("number"==typeof t)return t&=255,V.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):X(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function X(e,t,r,i,n){var o,a=1,s=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,r/=2}function d(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){var u=-1;for(o=r;o<s;o++)if(d(e,o)===d(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(r+c>s&&(r=s-c),o=r;o>=0;o--){for(var l=!0,p=0;p<c;p++)if(d(e,o+p)!==d(t,p)){l=!1;break}if(l)return o}return-1}function ee(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function te(e,t,r,i){return xe(we(t,e.length-r),e,r,i)}function re(e,t,r,i){return xe(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function ie(e,t,r,i){return re(e,t,r,i)}function ne(e,t,r,i){return xe(Ce(t),e,r,i)}function oe(e,t,r,i){return xe(function(e,t){for(var r,i,n,o=[],a=0;a<e.length&&!((t-=2)<0);++a)i=(r=e.charCodeAt(a))>>8,n=r%256,o.push(n),o.push(i);return o}(t,e.length-r),e,r,i)}function ae(e,t,r){return 0===t&&r===e.length?B(e):B(e.slice(t,r))}function se(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var o,a,s,c,d=e[n],u=null,l=d>239?4:d>223?3:d>191?2:1;if(n+l<=r)switch(l){case 1:d<128&&(u=d);break;case 2:128==(192&(o=e[n+1]))&&(c=(31&d)<<6|63&o)>127&&(u=c);break;case 3:o=e[n+1],a=e[n+2],128==(192&o)&&128==(192&a)&&(c=(15&d)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[n+1],a=e[n+2],s=e[n+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&d)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,l=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),n+=l}return function(e){var t=e.length;if(t<=ce)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=ce));return r}(i)}V.TYPED_ARRAY_SUPPORT=void 0===T.TYPED_ARRAY_SUPPORT||T.TYPED_ARRAY_SUPPORT,L(),V.poolSize=8192,V._augment=function(e){return e.__proto__=V.prototype,e},V.from=function(e,t,r){return H(null,e,t,r)},V.TYPED_ARRAY_SUPPORT&&(V.prototype.__proto__=Uint8Array.prototype,V.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&V[Symbol.species]),V.alloc=function(e,t,r){return function(e,t,r,i){return W(t),t<=0?F(e,t):void 0!==r?"string"==typeof i?F(e,t).fill(r,i):F(e,t).fill(r):F(e,t)}(null,e,t,r)},V.allocUnsafe=function(e){return z(null,e)},V.allocUnsafeSlow=function(e){return z(null,e)},V.isBuffer=function(e){return null!=e&&(!!e._isBuffer||Se(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Se(e.slice(0,0))}(e))},V.compare=function(e,t){if(!Y(e)||!Y(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},V.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},V.concat=function(e,t){if(!q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return V.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=V.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(!Y(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},V.byteLength=K,V.prototype._isBuffer=!0,V.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)J(this,t,t+1);return this},V.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)J(this,t,t+3),J(this,t+1,t+2);return this},V.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)J(this,t,t+7),J(this,t+1,t+6),J(this,t+2,t+5),J(this,t+3,t+4);return this},V.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?se(this,0,e):$.apply(this,arguments)},V.prototype.equals=function(e){if(!Y(e))throw new TypeError("Argument must be a Buffer");return this===e||0===V.compare(this,e)},V.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},V.prototype.compare=function(e,t,r,i,n){if(!Y(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(n>>>=0)-(i>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(i,n),d=e.slice(t,r),u=0;u<s;++u)if(c[u]!==d[u]){o=c[u],a=d[u];break}return o<a?-1:a<o?1:0},V.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},V.prototype.indexOf=function(e,t,r){return Q(this,e,t,r,!0)},V.prototype.lastIndexOf=function(e,t,r){return Q(this,e,t,r,!1)},V.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return ee(this,e,t,r);case"utf8":case"utf-8":return te(this,e,t,r);case"ascii":return re(this,e,t,r);case"latin1":case"binary":return ie(this,e,t,r);case"base64":return ne(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},V.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ce=4096;function de(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function ue(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function le(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=t;o<r;++o)n+=ke(e[o]);return n}function pe(e,t,r){for(var i=e.slice(t,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function fe(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function me(e,t,r,i,n,o){if(!Y(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function ye(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,o=Math.min(e.length-r,2);n<o;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function ge(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,o=Math.min(e.length-r,4);n<o;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function _e(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function he(e,t,r,i,n){return n||_e(e,0,r,4),R(e,t,r,i,23,4),r+4}function be(e,t,r,i,n){return n||_e(e,0,r,8),R(e,t,r,i,52,8),r+8}V.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),V.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=V.prototype;else{var n=t-e;r=new V(n,void 0);for(var o=0;o<n;++o)r[o]=this[o+e]}return r},V.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||fe(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i},V.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||fe(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},V.prototype.readUInt8=function(e,t){return t||fe(e,1,this.length),this[e]},V.prototype.readUInt16LE=function(e,t){return t||fe(e,2,this.length),this[e]|this[e+1]<<8},V.prototype.readUInt16BE=function(e,t){return t||fe(e,2,this.length),this[e]<<8|this[e+1]},V.prototype.readUInt32LE=function(e,t){return t||fe(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},V.prototype.readUInt32BE=function(e,t){return t||fe(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},V.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||fe(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},V.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||fe(e,t,this.length);for(var i=t,n=1,o=this[e+--i];i>0&&(n*=256);)o+=this[e+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*t)),o},V.prototype.readInt8=function(e,t){return t||fe(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},V.prototype.readInt16LE=function(e,t){t||fe(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},V.prototype.readInt16BE=function(e,t){t||fe(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},V.prototype.readInt32LE=function(e,t){return t||fe(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},V.prototype.readInt32BE=function(e,t){return t||fe(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},V.prototype.readFloatLE=function(e,t){return t||fe(e,4,this.length),N(this,e,!0,23,4)},V.prototype.readFloatBE=function(e,t){return t||fe(e,4,this.length),N(this,e,!1,23,4)},V.prototype.readDoubleLE=function(e,t){return t||fe(e,8,this.length),N(this,e,!0,52,8)},V.prototype.readDoubleBE=function(e,t){return t||fe(e,8,this.length),N(this,e,!1,52,8)},V.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||me(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},V.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||me(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},V.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||me(this,e,t,1,255,0),V.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},V.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||me(this,e,t,2,65535,0),V.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):ye(this,e,t,!0),t+2},V.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||me(this,e,t,2,65535,0),V.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):ye(this,e,t,!1),t+2},V.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||me(this,e,t,4,4294967295,0),V.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):ge(this,e,t,!0),t+4},V.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||me(this,e,t,4,4294967295,0),V.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):ge(this,e,t,!1),t+4},V.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);me(this,e,t,r,n-1,-n)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},V.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);me(this,e,t,r,n-1,-n)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},V.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||me(this,e,t,1,127,-128),V.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},V.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||me(this,e,t,2,32767,-32768),V.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):ye(this,e,t,!0),t+2},V.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||me(this,e,t,2,32767,-32768),V.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):ye(this,e,t,!1),t+2},V.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||me(this,e,t,4,2147483647,-2147483648),V.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):ge(this,e,t,!0),t+4},V.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||me(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),V.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):ge(this,e,t,!1),t+4},V.prototype.writeFloatLE=function(e,t,r){return he(this,e,t,!0,r)},V.prototype.writeFloatBE=function(e,t,r){return he(this,e,t,!1,r)},V.prototype.writeDoubleLE=function(e,t,r){return be(this,e,t,!0,r)},V.prototype.writeDoubleBE=function(e,t,r){return be(this,e,t,!1,r)},V.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,o=i-r;if(this===e&&r<t&&t<i)for(n=o-1;n>=0;--n)e[n+t]=this[n+r];else if(o<1e3||!V.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},V.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!V.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=Y(e)?e:we(new V(e,i).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var ve=/[^+\/0-9A-Za-z-_]/g;function ke(e){return e<16?"0"+e.toString(16):e.toString(16)}function we(e,t){var r;t=t||1/0;for(var i=e.length,n=null,o=[],a=0;a<i;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Ce(e){return function(e){var t,r,i,n,o,a;O||D();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[s-2]?2:"="===e[s-1]?1:0,a=new P(3*s/4-o),i=o>0?s-4:s;var c=0;for(t=0,r=0;t<i;t+=4,r+=3)n=A[e.charCodeAt(t)]<<18|A[e.charCodeAt(t+1)]<<12|A[e.charCodeAt(t+2)]<<6|A[e.charCodeAt(t+3)],a[c++]=n>>16&255,a[c++]=n>>8&255,a[c++]=255&n;return 2===o?(n=A[e.charCodeAt(t)]<<2|A[e.charCodeAt(t+1)]>>4,a[c++]=255&n):1===o&&(n=A[e.charCodeAt(t)]<<10|A[e.charCodeAt(t+1)]<<4|A[e.charCodeAt(t+2)]>>2,a[c++]=n>>8&255,a[c++]=255&n),a}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(ve,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function xe(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function Se(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}const Ie=1e4,Ee="/v3/coinbase.vendor_onfido.PublicService/GetSession";async function Te({client:e,onError:t,onLoading:r,onSuccess:i,applicationId:n}){try{r?.(!0);let a=Ee;if(n){const e=V.from(JSON.stringify({application_id:n})).toString("base64");a=`${Ee}?q=${e}`}const s=await e.get(a,void 0,{"Content-Type":"application/json"});if(!s?.status){const e={name:"SessionStatusMissing",message:`response returned null by API ${Ee}`};return t?.(e),void o.e.getSession(e)}i(s.status)}catch(e){const r={name:e?.name||"ApiFailed",message:e.message};t?.(r),o.e.getSession(r)}finally{r?.(!1)}}function je(){const e=(0,i.useRef)(0),t=(0,i.useRef)(),r=(0,i.useRef)(),n=(0,o.u)().client,a=(0,i.useCallback)((()=>{t.current&&(clearInterval(t.current),t.current=void 0)}),[]),s=async i=>{r.current||(e.current+=1,r.current=!0,(async e=>{const i=e.onSuccess,o=e.onError,c=e.applicationId;await Te({client:n,applicationId:c,onError:e=>{r.current=!1,a(),o?.(e)},onSuccess:n=>{switch(r.current=!1,n){case"created":case"submitted":case"fulfilled":t.current=setTimeout((()=>s(e)),Ie);break;case"propagated":case"notified":a()}i(n)}})})(i))};return{pollCounter:e.current,poller:s,retryPolling:i=>{e.current=0,r.current=!1,t.current&&a(),s(i)},clearPoller:a}}const Ae="TIPS_UPLOAD_ID",Pe=(0,s.vU)({buttonA11yLabel:{id:"BackButton.buttonA11yLabel",defaultMessage:"Go back to previous step"}});function Oe({children:e,noMinWidth:t,pendingVerificationId:r,hideInstructions:n,skipCheckPreviousSession:a=!1}){const s=n?"SELECT_ID_TYPE":Ae,m=I((0,i.useState)([s]),2),y=m[0],g=m[1],_=(0,u.useBreakpoints)().isPhone,h=(0,c.Z)().formatMessage,b=(0,o.u)().client,v=I((0,i.useState)(!0),2),k=v[0],w=v[1],C=(0,i.useRef)(),x=(0,i.useCallback)(((e,t=!0)=>{g((r=>[...t?[]:r,e]))}),[g]),S=(0,i.useCallback)(((e=!0)=>{g((t=>{const r=t.length>1?t[t.length-1]:s,i=t.length>1?t.slice(0,t.length-1):t;return e?[r]:i}))}),[g,s]),E=(0,i.useMemo)((()=>(0===y.length&&o.e.idCaptureLogAnomaly({name:"incorrect_steps",message:"steps length is 0"}),y[y.length-1])),[y]);(0,i.useEffect)((()=>{if(!C.current)return C.current=!0,r?(g(["PENDING"]),void w(!1)):a?(g([s]),void w(!1)):void Te({client:b,onLoading:w,onError:()=>{E!==s&&g([s])},onSuccess:e=>{switch(e){case"propagated":case"notified":g(["PENDING"]);break;case"created":case"fulfilled":case"submitted":g(["POLL_SESSION_STATUS"]);break;default:E!==s&&g([s])}}})}),[]);const T=(0,i.useMemo)((()=>y?.length&&y.length>1),[y]),j=(0,i.useMemo)((()=>_||t?"100%":"456px"),[_,t]),A=_||t;return(0,f.jsx)(o.S.Provider,{value:{firstStep:s,goToStep:x,goBack:S,step:E},children:(0,f.jsx)(p.VStack,{minWidth:j,flexGrow:1,maxWidth:"100%",children:k?(0,f.jsx)(o.L,{width:"100%",justifyContent:"center"}):T?(0,f.jsxs)(l.Box,{flexDirection:A?"column":"row",children:[(0,f.jsx)(l.Box,{testID:"id-capture-back-button",spacingBottom:2,spacingTop:1,children:(0,f.jsx)(d.IconButton,{name:"backArrow",onPress:()=>S(!1),variant:"secondary",accessibilityLabel:h(Pe.buttonA11yLabel)})}),(0,f.jsx)(l.Box,{width:j,spacingStart:0,responsiveConfig:A?void 0:{desktop:{spacingStart:3},tablet:{spacingStart:3}},flexGrow:1,children:e})]}):(0,f.jsx)(l.Box,{width:j,children:e})})})}function De(){const e=I((0,i.useState)(),2),t=e[0],r=e[1],a=(0,o.a)().goToStep,s=(0,o.u)().track,c=(0,i.useCallback)((e=>{if(["notified","propagated"].includes(e))return a("PENDING")}),[a]),d=je(),u=d.retryPolling,l=d.poller,p=d.clearPoller;(0,i.useEffect)((()=>(l({onError:r,onSuccess:c}),s("verify_document_verification_pending",{action:n.Us.view,componentType:n.re.page,polling_method:"GetSession"}),p)),[]);const m=(0,i.useCallback)((()=>{r(void 0),u({onError:r,onSuccess:c})}),[u,c]);return t?(0,f.jsx)(o.R,{error:t,isGenericApiError:!0,onRetry:m}):(0,f.jsx)(o.P,{})}const Me="/v3/coinbase.vendor_onfido.PublicService/CreateSession";function Be({allowCountryChange:e=!1,legalNameChange:t=!1,isKycFallback:r=!1,countryCode:n,client:s}){const c=I((0,i.useState)(),2),d=c[0],u=c[1];return{postIdvProfile:async function({idFrontSideFileData:i,idBackSideFileData:c,faceImageFileData:d,isBackSideRequired:l,selectedIdType:p,isFacematchRequired:f}){u({isLoading:!0,error:null,data:null});const m=new FormData;m.append("capture_method","file"),m.append("country_code",n),m.append("id_type",p),t&&m.append("legal_name_changed","true"),e&&m.append("allow_country_change","true"),m.append("is_kyc_fallback",String(r)),m.append("creation_type",function(e){return e?"face_match":"api_netverify"}(f)),m.append(...i),l&&(c?m.append(...c):o.e.idCaptureLogAnomaly({name:"back side is missing",message:"ID back side is required but back is not captured"})),f&&(d?m.append(...d):o.e.idCaptureLogAnomaly({name:"face image is missing",message:"facematch is required but face is not captured"}));try{const e=await async function(e,t){return(0,a.w)({shouldRetry:(e,t)=>(0,a.i)(e)&&"generic-error"===e.apiClientErrorId&&t<3})((()=>e.post("/v2/jumio-profiles",t)))()}(s,m);return u({isLoading:!1,data:e.data,error:null}),e.data}catch(e){(e=>{o.e.idvSubmit(e,{context:"onboarding",statusCode:(0,a.i)(e)?e.statusCode:void 0,rawResponse:(0,a.i)(e)?String(e.response):void 0}),u({isLoading:!1,data:null,error:{name:"submitImagesError",message:"object"==typeof e&&e&&"message"in e&&e.message?e.message:"failed to create IDV profile"}})})(e)}},isLoading:!!d?.isLoading,error:d?.error||null}}const Ne="/v3/coinbase.vendor_onfido.PublicService/SubmitSession";function Re({title:e,subtitle:t,tips:r,ctaLabel:i,onPressCta:n,testID:o}){return(0,f.jsxs)(g.VStack,{gap:4,testID:o,children:[(0,f.jsxs)(g.VStack,{gap:.5,children:[(0,f.jsx)(v.TextDisplay3,{as:"h1",children:e}),(0,f.jsx)(v.TextBody,{as:"p",color:"foregroundMuted",children:t})]}),(0,f.jsx)(g.VStack,{children:r.map(((e,t)=>(0,f.jsxs)(g.HStack,{responsiveConfig:{phone:{spacingHorizontal:1,spacingVertical:2},desktop:{spacingHorizontal:2,spacingVertical:3},tablet:{spacingHorizontal:2,spacingVertical:3}},alignItems:"center",children:[(0,f.jsx)(b.Pictogram,{name:e.iconName,dimension:"48x48"}),(0,f.jsxs)(g.VStack,{spacingStart:2,children:[(0,f.jsx)(v.TextHeadline,{as:"p",children:e.title}),(0,f.jsx)(v.TextBody,{as:"p",color:"foregroundMuted",children:e.description})]})]},`tip-${t}`)))}),(0,f.jsx)(h.Button,{onPress:n,block:!0,children:i})]})}const Ue=(0,s.vU)({title:{id:"UploadIdTips.title",defaultMessage:"Take a photo of your ID"},subtitle:{id:"UploadIdTips.subtitle",defaultMessage:"Upload a photo using your phone’s camera"},prepareDocsTipTile:{id:"UploadIdTips.prepareDocsTipTile",defaultMessage:"Prepare your document"},prepareDocsTipDescription:{id:"UploadIdTips.prepareDocsTipDescription",defaultMessage:"Make sure your ID is valid and doesn’t expire within the next 3 months"},checkYourEnvTipTile:{id:"UploadIdTips.checkYourEnvTipTile",defaultMessage:"Check your environment"},checkYourEnvTipDescription:{id:"UploadIdTips.checkYourEnvTipDescription",defaultMessage:"Make sure you are in a well-lit environment"},makeSureIdIsVisibleTipTitle:{id:"UploadIdTips.makeSureIdIsVisibleTipTitle",defaultMessage:"Make sure your details are visible"},makeSureIdIsVisibleTipDescription:{id:"UploadIdTips.makeSureIdIsVisibleTipDescription",defaultMessage:"Your first name, last name, birthdate, and address should be clearly visible"},continue:{id:"UploadIdTips.continue",defaultMessage:"Continue"}});function qe(){const e=(0,o.a)().goToStep,t=(0,o.u)().track,r=(0,c.Z)().formatMessage;(0,i.useEffect)((()=>{t("verify_upload_id_tips_viewed",{action:n.Us.render,componentType:n.re.page})}),[]);const a=(0,i.useCallback)((()=>{t("verify_upload_id_tips_tapped_continue",{action:n.Us.click,componentType:n.re.button}),e("SELECT_ID_TYPE",!1)}),[t,e]);return(0,f.jsx)(Re,{title:r(Ue.title),subtitle:r(Ue.subtitle),tips:[{iconName:"identityCard",title:r(Ue.prepareDocsTipTile),description:r(Ue.prepareDocsTipDescription)},{iconName:"learn",title:r(Ue.checkYourEnvTipTile),description:r(Ue.checkYourEnvTipDescription)},{iconName:"idVerification",title:r(Ue.makeSureIdIsVisibleTipTitle),description:r(Ue.makeSureIdIsVisibleTipDescription)}],ctaLabel:r(Ue.continue),onPressCta:a})}const Le=(0,i.memo)(qe),Fe=(0,s.vU)({photoTitle:{id:"FacematchTips.photoTitle",defaultMessage:"Take a photo of your face"},videoTitle:{id:"FacematchTips.videoTitle",defaultMessage:"Record a video"},photoSubtitle:{id:"FacematchTips.photoSubtitle",defaultMessage:"Now, take a picture of yourself. Your selfie will be used to verify your photo ID."},videoSubtitle:{id:"FacematchTips.videoSubtitle",defaultMessage:"Record a video with your face. This is to verify that you’re a real person"},photoTip1Heading:{id:"FacematchTips.photoTip1Heading",defaultMessage:"Take a picture with a neutral expression"},photoTip1Description:{id:"FacematchTips.photoTip1Description",defaultMessage:"Face forward and make sure your eyes are visible. Please remove glasses if they hide your eyes."},videoTip1Heading:{id:"FacematchTips.videoTip1Heading",defaultMessage:"Follow the instructions to move or speak"},videoTip1Description:{id:"FacematchTips.videoTip1Description",defaultMessage:"Allow access to your microphone. You will have 20 seconds to record your video."},tip2Heading:{id:"FacematchTips.tip2Heading",defaultMessage:"Show your face"},tip2Description:{id:"FacematchTips.tip2Description",defaultMessage:"Do not hide or alter parts of your face (no hats or headgear or heavy makeup)"},continue:{id:"FacematchTips.continue",defaultMessage:"Continue"}});function Ve({facematch:e,onContinue:t}){const r=(0,o.u)().track,a=(0,c.Z)().formatMessage;(0,i.useEffect)((()=>{r("verify_facematch_tips_viewed",{action:n.Us.render,componentType:n.re.page})}),[]);const s=(0,i.useCallback)((()=>{r("verify_facematch_tips_tapped_continue",{action:n.Us.click,componentType:n.re.button}),t()}),[r,t]),d=(0,i.useMemo)((()=>{switch(e){case"video":return{title:Fe.videoTitle,subtitle:Fe.videoSubtitle,tip1Heading:Fe.videoTip1Heading,tip1Description:Fe.videoTip1Description};case"face":case"standard":return{title:Fe.photoTitle,subtitle:Fe.photoSubtitle,tip1Heading:Fe.photoTip1Heading,tip1Description:Fe.photoTip1Description}}}),[e]);return(0,f.jsx)(Re,{title:a(d.title),subtitle:a(d.subtitle),tips:[{iconName:"agent",title:a(d.tip1Heading),description:a(d.tip1Description)},{iconName:"learn",title:a(Fe.tip2Heading),description:a(Fe.tip2Description)}],ctaLabel:a(Fe.continue),onPressCta:s})}const He=(0,i.memo)(Ve),We=["ar","hy","bg","zh_CN","zh_TW","hr","cs","da","nl","en","en_GB","en_US","et","fi","fr","fr_CA","de","el","he","hi","hu","id_ID","it","ja","ko","lv","lt","ms","no","fa","pl","pt","pt_BR","ro","ru","sr","sk","sl","es","es_419","sv","th","tr","uk","vi"];function ze(e){if(We.includes(e))return e;switch(e){case"id":case"id_ID":return"id_ID";case"es_LA":return"es_419";default:return"en_US"}}const Ge=(0,s.vU)({crossDeviceProdLabel:{id:"Onfido.crossDeviceProdLabel",defaultMessage:"for Coinbase"}});function Ze({token:e,onComplete:t,facematchType:r,selectedIdType:a,restartSession:s,onfidoStep:d,onSubmitDocument:l,onSubmitFacematch:p,canUseCustomCallback:h,sdkHandle:b,setSdkHandle:v}){const k=(0,u.useBreakpoints)().isPhone,w=I((0,i.useState)(),2),C=w[0],S=w[1],E=I((0,i.useState)(),2),T=E[0],j=E[1],A=(0,o.u)(),P=A.locale,O=A.track,D=A.forceCrossDevice,M=A.countryCode,B=A.noMinWidth,N=(0,y.useSpectrum)(),R=(0,c.Z)().formatMessage,U=(0,i.useCallback)((e=>{!function(e,t){const r=e.detail||{},i=r.eventName,o=r.properties,a={action:n.Us.click,componentType:n.re.button,sdk_vendor:"onfido"};switch(i){case"DOCUMENT_CAPTURE_FRONT":return t("verify_document_file_upload_tapped_front",x({},a));case"DOCUMENT_CAPTURE_BACK":return t("verify_document_file_upload_tapped_back",x({},a));case"DOCUMENT_CAPTURE_CONFIRMATION_FRONT":return t("verify_document_file_upload_front_confirm",x({},a));case"DOCUMENT_CAPTURE_CONFIRMATION_BACK":return t("verify_document_file_upload_back_confirm",x({},a));case"VIDEO_FACIAL_INTRO":return t("verify_document_facematch_intro_viewed",x(x({},a),{},{action:n.Us.render,componentType:n.re.page}));case"VIDEO_FACIAL_CAPTURE_STEP_1":return t("verify_document_facematch_take_video_step_one",x(x({},a),{},{action:n.Us.render,componentType:n.re.page,challenge_type:o.challenge_type}));case"VIDEO_FACIAL_CAPTURE_STEP_2":return t("verify_document_facematch_take_video_step_two",x(x({},a),{},{action:n.Us.render,componentType:n.re.page,challenge_type:o.challenge_type}));case"UPLOAD":return t("verify_document_upload_attempt",x(x({},a),{},{upload_with_onfido:!0}));case"CROSS_DEVICE_INTRO":return t("verify_document_cross_device_capture_intro",x(x({},a),{},{action:n.Us.render,componentType:n.re.page}));case"CROSS_DEVICE_GET_LINK":return t("verify_document_cross_device_capture_get_link",x(x({},a),{},{action:n.Us.render,componentType:n.re.page}));case"CROSS_DEVICE_START":return t("verify_document_cross_device_capture_started",x(x({},a),{},{action:n.Us.render,componentType:n.re.page}));case"USER_CONSENT":t("verify_document_take_user_consent_intro",x(x({},a),{},{action:n.Us.render,componentType:n.re.page}))}}(e,O)}),[O]);(0,i.useLayoutEffect)((()=>(addEventListener("userAnalyticsEvent",U),()=>{removeEventListener("userAnalyticsEvent",U)})),[]);const q=(0,i.useCallback)((e=>{const t={side:"",file:null};for(const i of e.entries()){var r=I(i,2);const e=r[0],n=r[1];"side"===e&&(t.side=n),"file"===e&&(t.file=n)}return l(t),Promise.resolve({continueWithOnfidoSubmission:!0})}),[l]),L=(0,i.useCallback)((e=>{for(const r of e.entries()){var t=I(r,2);const e=t[0],i=t[1];if("file"===e){p(i);break}}return Promise.resolve({continueWithOnfidoSubmission:!0})}),[p]),F=(0,i.useMemo)((()=>{const t=function({onfidoStep:e,facematchType:t,selectedIdType:r,forceCrossDevice:i}){return"document"===e?[{type:"document",options:{hideCountrySelection:!0,forceCrossDevice:i,disableCrossDevice:!1===i,documentTypes:{driving_licence:"drivers_licence"===r,national_identity_card:"id_card"===r,passport:"passport"===r}}}]:"face"===e&&"none"!==t?[{type:"face",options:{recordMotionAudio:"video"===t,requestedVariant:t,showIntro:!1}}]:void 0}({onfidoStep:d,facematchType:r,selectedIdType:a,forceCrossDevice:!!D});if(t)return{useModal:!1,token:e,steps:t,language:ze(P),customUI:(0,_.g)("dark"===N),onError:e=>{const t={name:e.type,message:e.message};j(t),o.e.onfidoSdkError(t)},onUserExit:e=>{S(e||"UNKNOWN")},enterpriseFeatures:{hideOnfidoLogo:!0,useCustomizedApiRequests:h,onSubmitDocument:q,onSubmitSelfie:L},crossDeviceClientIntroProductLogoSrc:"https://static-assets.coinbase.com/idv/CrossDeviceSession.png",crossDeviceClientIntroProductName:R(Ge.crossDeviceProdLabel),smsNumberCountryCode:M};j({name:"incorrectStepsReturned",message:"steps should have either documents or facematch configuration"})}),[r,a,e,N,M,P,h,L,q,d,D,R]);return(0,i.useEffect)((()=>{if(F)if(b)b.setOptions(x(x({},F),{},{onComplete:t}));else{const e=(0,m.init)(x(x({},F),{},{onComplete:t}));v(e)}}),[F,b,t]),C?(0,f.jsx)(o.R,{error:"USER_CONSENT_DENIED"===C?{name:"PermissionDeniedError",message:"user refused to consent to use camera"}:null,onRetry:s}):T?(0,f.jsx)(o.R,{showTipsErrorView:!0,error:T,hideRetryButton:"sdk_version_insufficient"===T.name,onRetry:s}):(0,f.jsx)(g.Box,{height:k?"var(--full-view-height, 100vh)":void 0,id:_.O,width:k||B?"100%":"460px",position:"relative"})}function Ye(e){let t=e.selectedIdType,r=e.setApplicationId,s=e.facematchType,c=e.onSubmitIdvProfile,d=e.isIdBackSideRequired,u=w(e,k);const l=(0,o.a)().goToStep,p=I((0,i.useState)(),2),m=p[0],y=p[1],g=I((0,i.useState)("document"),2),_=g[0],h=g[1],b=I((0,i.useState)(!1),2),v=b[0],C=b[1],S=I((0,i.useState)(),2),E=S[0],T=S[1],j=(0,o.u)(),A=j.track,P=j.client,O=j.forceCrossDevice,D=j.countryCode,M=j.hideInstructions,B=I((0,i.useState)(),2),N=B[0],R=B[1],U=function({onComplete:e}){const t=(0,o.u)().client,r=(0,i.useRef)(),n=I((0,i.useState)({loading:!0,error:null,sessionData:null}),2),a=n[0],s=n[1],c=(0,i.useCallback)((e=>{o.e.createSession(e),s({loading:!1,sessionData:null,error:e})}),[]),d=(0,i.useCallback)((async t=>{if(!r.current){r.current=!0;try{s({loading:!0,sessionData:null,error:null});const r=await t.post(Me);return r?.token?(s({loading:!1,sessionData:r,error:null}),e(r)):c({name:"TokenMissingError",message:`response was returned null by ${Me}`})}catch(e){return c({name:e?.name||"ApiFailed",message:e?.message})}finally{r.current=!1}}}),[c,e]);return(0,i.useEffect)((()=>{d(t)}),[d]),{isLoading:a.loading,error:a.error,sessionData:a.sessionData,retry:async()=>{await d(t)}}}({onComplete:(0,i.useCallback)((e=>{r(e.applicationId)}),[r])}),q=U.isLoading,L=U.error,F=U.retry,V=U.sessionData,H=Be(x(x({},u),{},{countryCode:D,client:P})),W=H.postIdvProfile,z=H.isLoading,G=H.error,Z=function(){const e=(0,o.u)().client,t=I((0,i.useState)(!1),2),r=t[0],n=t[1],a=I((0,i.useState)(),2),s=a[0],c=a[1],d=(0,i.useCallback)((e=>{n(!1),o.e.submitSession(e),c(e)}),[]),u=(0,i.useCallback)((async({applicationId:t})=>{try{n(!0);const r=await e.post(Ne,{application_id:t});return r?.status&&"success"===r.status?(n(!1),r):d({name:"SubmitSessionFailed",message:`response was returned null by ${Ne}`})}catch(e){return d({name:e?.name||"ApiFailed",message:e?.message})}}),[d,e]);return{isLoading:r,error:s,submitSession:u}}(),Y=Z.isLoading,K=Z.submitSession,$=Z.error,J=(0,i.useCallback)((async e=>{await(N?.safeTearDown()),l(e)}),[l,N]),Q=(0,i.useMemo)((()=>"video"!==s&&!O),[O,s]);t||J("SELECT_ID_TYPE");const X=(0,i.useCallback)((async()=>{if(V?.applicationId)if(Q){(0,n.KQ)("submit_idv"),A("verify_document_create_idv_profile_attempted",{action:n.Us.click,componentType:n.re.button});const e=await W({faceImageFileData:E?.face,idFrontSideFileData:E?.id_front,idBackSideFileData:E?.id_back,selectedIdType:t,isBackSideRequired:d,isFacematchRequired:"standard"===s});e&&((0,n.KQ)("idv_submitted"),A("verify_document_uploaded_success",{method:"file",status:e.status,action:n.Us.measurement,componentType:n.re.content_script}),c(e),await J("PENDING"))}else{const e=await K({applicationId:V?.applicationId});e?.status&&(A("verify_document_session_submitted",{action:n.Us.measurement,componentType:n.re.content_script}),c({status:"created",id:e.idvProfileId}),await J("POLL_SESSION_STATUS"))}else y({name:"applicationIdMissing",message:"applicationId is undefined"})}),[K,V?.applicationId,J,A,c,d,E,s,W,t,Q]),ee=(0,i.useCallback)((async()=>{"document"===_&&s&&"none"!==s?(await(N?.safeTearDown()),R(void 0),M?h("face"):C(!0)):X()}),[X,_,s,N,M]),te=()=>{$&&V?.applicationId?(A("verify_document_retry_session_submitted",{action:n.Us.click,componentType:n.re.button}),K({applicationId:V.applicationId})):F()},re=(0,i.useCallback)((e=>{T((t=>x(x({},t),{},{id_front:"front"===e.side?["front_image",e.file]:t?.id_front,id_back:"back"===e.side?["back_image",e.file]:t?.id_back})))}),[]),ie=(0,i.useCallback)((e=>{T((t=>x(x({},t),{},{face:["face_image",e]})))}),[]);if(q||Y||z)return(0,f.jsx)(o.L,{width:"100%",justifyContent:"center"});if(G)return(0,f.jsx)(a.S,{error:G,onRetry:()=>J("SELECT_ID_TYPE")});if(L||m||!V?.token||$){const e=L||m||$;return(0,f.jsx)(o.R,{isGenericApiError:!0,error:e,onRetry:te})}return v?(0,f.jsx)(He,{facematch:s,onContinue:()=>{h("face"),C(!1)}}):(0,f.jsx)(Ze,x(x({},u),{},{token:V.token,onComplete:ee,selectedIdType:t,restartSession:F,facematchType:s,onfidoStep:_,onSubmitDocument:re,onSubmitFacematch:ie,canUseCustomCallback:Q,sdkHandle:N,setSdkHandle:R}))}const Ke="/v2/jumio-profiles/supported-documents";function $e(e){const t=function(e){const t=I((0,i.useState)({loading:!0,error:null,docs:null}),2),r=t[0],n=t[1],s=(0,o.u)()||{},c=s.client,d=s.applicationContext,u=(0,i.useCallback)((e=>{o.e.supportedDocs(e),n({loading:!1,error:e,docs:null})}),[]),l=(0,i.useCallback)((e=>{const t=(0,a.c)(e);n({loading:!1,error:null,docs:t?.supportedIdTypes})}),[]),p=(0,i.useCallback)((async(e,t)=>{n({loading:!0,error:null,docs:null});const r=d?`application_context=${"two-factor-web"===d?"account_recovery":d}`:"";try{const i=await e.get(`${Ke}/${t}?${r}`);if(!i?.data)return u({name:"MissingDataError",message:`response was returned null by ${Ke}/${t}`});l(i.data)}catch(i){try{const i=await e.get(`${Ke}?${r}`),n=i.data?i.data.find((e=>e.country.code===t)):void 0;if(!n)return u({name:"MissingDataError",message:`response was returned null by ${Ke}`});l(n)}catch(e){return u({name:"FetchAPIFailed",message:e.message})}}}),[u,d,l]);return(0,i.useEffect)((()=>{p(c,e)}),[p]),{isLoading:r.loading,error:r.error,supportedDocs:r.docs,refetch:(0,i.useCallback)((()=>{p(c,e)}),[c,e,p])}}(e.country),r=t.isLoading,n=t.error,s=t.supportedDocs,d=t.refetch,u=(0,c.Z)().formatMessage;return r?(0,f.jsx)(o.L,{width:"100%",justifyContent:"center"}):n?"MissingDataError"===n?.name?(0,f.jsx)(a.V,{title:u(o.m.errorTitleIdType),errorMessages:u(o.m.errorMessageIdType),actions:(0,f.jsx)("div",{})}):(0,f.jsx)(o.R,{error:n,isGenericApiError:!!n,onRetry:d}):s?(0,f.jsx)(a.a,x(x({},e),{},{supportedDocTypes:s})):(0,f.jsx)(o.R,{error:{name:"MissingDataError",message:"Failed to fetch supported documents"},isGenericApiError:!0,onRetry:d})}const Je=(0,i.memo)($e);function Qe(e){switch(e){case"face":return"standard";case"video":return"video";default:return"none"}}function Xe({selectedIdType:e,setSelectedIdType:t,setApplicationId:r,forceFacematchType:s,onContinue:c,skipSuccessViewAndDo:d,onRetry:u,failureViewTitle:l,pendingVerificationId:p,onPendingResponse:m,skipPendingViewAndDo:y,legalNameChange:g,allowCountryChange:_,isKycFallback:h,applicationId:b}){const v=(0,o.a)(),k=v.step,w=v.goToStep,C=v.firstStep,x=(0,o.u)(),S=x.track,E=x.countryCode,T=I((0,i.useState)(),2),j=T[0],A=T[1];(0,i.useEffect)((()=>{d&&"SUCCESS"===k&&d()}),[d,k]),(0,i.useEffect)((()=>{y&&["POLL_SESSION_STATUS","PENDING"].includes(k)&&y()}),[y,k]);const P=(0,i.useCallback)((e=>{S("verify_document_tapped_document_type",{document_type:e.type,action:n.Us.click,componentType:n.re.button}),t(e),w("ONFIDO_CAPTURE")}),[S,t,w]),O=(0,i.useCallback)((e=>{A(e),m?.(e)}),[m]);switch(k){case"TIPS_UPLOAD_ID":return(0,f.jsx)(Le,{});case"SELECT_ID_TYPE":return(0,f.jsx)(Je,{country:E,onSelectId:P});case"ONFIDO_CAPTURE":return(0,f.jsx)(Ye,{selectedIdType:e?.type,facematchType:Qe(s),setApplicationId:r,onSubmitIdvProfile:O,isIdBackSideRequired:!!e?.backsideImageRequired,legalNameChange:g,allowCountryChange:_,isKycFallback:h});case"POLL_SESSION_STATUS":return y?null:(0,f.jsx)(De,{});case"FAILURE":return(0,f.jsx)(o.R,{error:null,onRetry:()=>w(C)});case"PENDING":return y?null:(0,f.jsx)(o.b,{onRetryFailure:u,failureViewTitle:l,pendingVerificationId:p||j?.id,applicationId:b});case"SUCCESS":return d?null:(S("verify_document_viewed_success",{action:n.Us.render,componentType:n.re.page}),(0,f.jsx)(a.b,{onContinue:c}));default:return(0,f.jsx)(o.L,{width:"100%",justifyContent:"center"})}}function et(e){const t=e.noMinWidth,r=e.pendingVerificationId,n=e.hideInstructions,o=e.skipCheckPreviousSession,s=I((0,i.useState)(),2),c=s[0],d=s[1],u=I((0,i.useState)(),2),l=u[0],p=u[1];return(0,f.jsx)(a.I,x(x({},e),{},{children:(0,f.jsx)(Oe,{noMinWidth:t,pendingVerificationId:r??void 0,hideInstructions:n,skipCheckPreviousSession:o,children:(0,f.jsx)(Xe,x(x({},e),{},{selectedIdType:c,setSelectedIdType:d,applicationId:l,setApplicationId:p}))})}))}},2303:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var i=r(0),n=r(1557),o=r(212),a=r(1396),s=r(2);r(462);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],c=!0,d=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function u({token:e}){const t=c((0,i.useState)(),2),r=t[0],d=t[1],u=(0,o.useSpectrum)();return(0,i.useEffect)((()=>()=>{r&&r.tearDown()}),[]),(0,i.useEffect)((()=>{if(r||!e)return;const t=(0,n.init)({mobileFlow:!0,customUI:(0,a.g)("dark"===u),roomId:e.substring(2)});d(t)}),[e]),(0,s.jsx)("div",{id:a.O})}},784:(e,t,r)=>{r.d(t,{C:()=>K,I:()=>oe,L:()=>$,P:()=>ne,R:()=>_e,S:()=>ce,V:()=>re,a:()=>de,b:()=>he,c:()=>M,e:()=>P,m:()=>Z,u:()=>ae});r(292);var i=r(0),n=r(7),o=r(2),a=r(11),s=r(9),c=r(61),d=r(528),u=r(4),l=r(10),p=r(19),f=r(54),m=r(227),y=r(98),g=r(14),_=r(337),h=r(82),b=r(340),v=r(55);const k=["context","statusCode","rawResponse"],w=["size"];function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],c=!0,d=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function S(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){return function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)?e.message:"unknown-error"}function A(e){return(t,r)=>{(0,n.Kz)(e,E({componentType:n.re.content_script,action:n.Us.measurement,error:j(t),application_context:"not_set"},r))}}const P={idvSubmit:(e,t)=>{let r=t.context,i=t.statusCode,n=t.rawResponse,o=S(t,k);return A("verify_document_error")(e,E(E({},o),{},{context:r,status_code:i,raw_response:n}))},idvProfilePoll:(e,t)=>A("verify_document_polling_error")(e,{is_nullish:t}),supportedDocs:e=>A("supported_docs_fetch_error")(e),idvProfiles:e=>A("idv_profiles_fetch_error")(e),idCaptureLogAnomaly:e=>A("id_capture_flow_anomaly")(e),createSession:e=>A("id_capture_create_session_error")(e),getSession:e=>A("id_capture_get_session_error")(e),submitSession:e=>A("id_capture_submit_session_error")(e),onfidoSdkError:e=>A("id_capture_onfido-sdk-error")(e)},O=(0,i.lazy)((()=>Promise.all([r.e(0),r.e(13),r.e(30),r.e(41),r.e(121),r.e(2149)]).then(r.bind(r,2301)))),D=(0,i.lazy)((()=>Promise.all([r.e(0),r.e(13),r.e(121),r.e(2150),r.e(2914)]).then(r.bind(r,2302))));function M(e){const t=e.forceFacematchType;if(e.onfido)return(0,o.jsx)(O,E({},e));const r=t&&"face"!==t;return r&&P.idCaptureLogAnomaly({name:"invalidProps",message:`invalid value is set for props forceFacematchType - ${t}`}),(0,o.jsx)(D,E(E({},e),{},{forceFacematchType:r?void 0:t}))}var B,N,R="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},U={exports:{}};B=U,N=U.exports,function(e){var t=N,r=B&&B.exports==t&&B,i="object"==typeof R&&R;i.global!==i&&i.window!==i||(e=i);var n=function(e){this.message=e};(n.prototype=new Error).name="InvalidCharacterError";var o=function(e){throw new n(e)},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=/[\t\n\f\r ]/g,c={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&o("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,i,n,s=e.length%3,c="",d=-1,u=e.length-s;++d<u;)t=e.charCodeAt(d)<<16,r=e.charCodeAt(++d)<<8,i=e.charCodeAt(++d),c+=a.charAt((n=t+r+i)>>18&63)+a.charAt(n>>12&63)+a.charAt(n>>6&63)+a.charAt(63&n);return 2==s?(t=e.charCodeAt(d)<<8,r=e.charCodeAt(++d),c+=a.charAt((n=t+r)>>10)+a.charAt(n>>4&63)+a.charAt(n<<2&63)+"="):1==s&&(n=e.charCodeAt(d),c+=a.charAt(n>>2)+a.charAt(n<<4&63)+"=="),c},decode:function(e){var t=(e=String(e).replace(s,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&o("Invalid character: the string to be decoded is not correctly encoded.");for(var r,i,n=0,c="",d=-1;++d<t;)i=a.indexOf(e.charAt(d)),r=n%4?64*r+i:i,n++%4&&(c+=String.fromCharCode(255&r>>(-2*n&6)));return c},version:"1.0.0"};if(t&&!t.nodeType)if(r)r.exports=c;else for(var d in c)c.hasOwnProperty(d)&&(t[d]=c[d]);else e.base64=c}(R);const q=i;let L=function(e){return e.unknown="unknown",e.web="web",e.android="android",e.ios="ios",e.mobile_web="mobile_web",e.tablet_web="tablet_web",e.server="server",e.windows="windows",e.macos="macos",e.extension="extension",e}({}),F=function(e){return e.count="count",e.rate="rate",e.gauge="gauge",e.distribution="distribution",e.histogram="histogram",e}({});const V={default:{disabled:!1,serviceUrl:"",scope:"",platform:L.unknown,version:""}},H={default:{}},W=q.createContext({scope:"default",clientKillSwitchConfig:{},setKillSwitchConfig(){V.default.contextErrorHandler&&V.default.contextErrorHandler()}});var z=function(e){const t=q.useRef(!1),r=q.useContext(W),i=r.scope;if(null===e)return!1;const n=e;if(!(n in H[i])){const e="default"===i?`You are using the ${n} kill switch outside of the ClientKillSwitchProvider.`:`${n} is not in the ${i}'s client kill switch object.`;return console.error(e),!1}if(r.clientKillSwitchConfig){const e=r.clientKillSwitchConfig[n]||!1,o=!(e===t.current);return V[i]?.logger?.enableLogging&&e&&o&&(V[i]?.logger?.logMetric({metricName:"kill_switches_enabled",metricType:F.count,value:1,tags:{kill_switch:n}}),t.current=e),e}return V[i]?.hookErrorHandler&&V[i].hookErrorHandler?.(),!1};const G=(0,a.vU)({delayWarningDays:{id:"UseIdvDegradationWarningMessage.delayWarningDays",defaultMessage:"Due to high demand, it may take a day or two to verify your ID."},delayWarningHours:{id:"UseIdvDegradationWarningMessage.delayWarningHours",defaultMessage:"Due to high demand, it may take a few hours to verify your ID."}}),Z=(0,a.vU)({frontSide:{id:"IdCapture.capture.frontSide",defaultMessage:"front"},backSide:{id:"IdCapture.capture.backSide",defaultMessage:"back"},faceSide:{id:"IdCapture.capture.faceSide",defaultMessage:"face"},driversLicence:{id:"IdCapture.type.capture.driversLicence",defaultMessage:"driver’s license"},idCard:{id:"IdCapture.type.capture.idCard",defaultMessage:"ID card"},faceCapture:{id:"IdCapture.capture.face",defaultMessage:"Take a picture of yourself"},holdStillCapture:{id:"IdCapture.capture.holdStill",defaultMessage:"Hold still..."},enableWebcamCapture:{id:"IdCapture.capture.enableWebcam",defaultMessage:"Please enable your webcam"},contentLayoutactionGoBack:{id:"IdCapture.contentLayout.actionGoBack",defaultMessage:"Go back"},titleFailureView:{id:"IdCapture.failureView.title",defaultMessage:"We couldn’t verify your ID"},subtitleFailureView:{id:"IdCapture.failureView.subtitle",defaultMessage:"Be sure to use a valid, government-issued ID. Also, be sure the photos of your ID are unobscured and easy to read."},titleExperimentFailureView:{id:"IdCapture.failureView.titleExperiment",defaultMessage:"Let's try again"},subtitleExperimentFailureView:{id:"IdCapture.failureView.subtitleExperiment",defaultMessage:"We were unable to verify your identity."},errorTitleExperimentFailureView:{id:"IdCapture.failureView.errorTitleExperiment",defaultMessage:"⚠️ Make sure to do the following."},nameErrorExperimentFailureView:{id:"IdCapture.failureView.nameErrorExperiment",defaultMessage:"You must use your full, legal name as it appears on government-issued identification."},addressErrorExperimentFailureView:{id:"IdCapture.failureView.addressErrorExperiment",defaultMessage:"You must not use a PO box or business address."},ssnErrorExperimentFailureView:{id:"IdCapture.failureView.ssnErrorExperiment",defaultMessage:"Double-check your Social Security number to ensure it is entered correctly."},retryMessageExperiment:{id:"IdCapture.failureView.retryMessageExperiment",defaultMessage:"When you try again, be sure to use your legal name and your home address. Also, double-check your Social Security number."},stillHavingIssues:{id:"IdCapture.failureView.stillHavingIssues",defaultMessage:"Still having issues? {troubleShootingTipsLink}"},troubleShootingTipsLinkFailureView:{id:"IdCapture.failureView.troubleShootingTipsLink",defaultMessage:"Try these tips"},tryAgainFailureView:{id:"IdCapture.failureView.tryAgain",defaultMessage:"Try again"},PermissionDeniedError:{id:"IdCapture.failureView.permissionDeniedError",defaultMessage:"Permission to use webcam denied by browser. Please click try again and allow webcam access."},NotAllowedError:{id:"IdCapture.failureView.notAllowedError",defaultMessage:"Permission to use webcam denied by browser. Please click try again and allow webcam access."},NotReadableError:{id:"IdCapture.failureView.notReadableError",defaultMessage:"Unfortunately, your ID was unreadable. Please follow these guidelines and try again."},DevicesNotFoundError:{id:"IdCapture.failureView.devicesNotFoundError",defaultMessage:"Webcam device was not found. Please click try again and use a non-webcam verification method."},errorHasOccurred:{id:"IdCapture.failureView.errorHasOccurred",defaultMessage:"An error has occurred."},id_card:{id:"IdCapture.idType.idCard",defaultMessage:"Photo ID"},drivers_licence:{id:"IdCapture.idType.driversLicense",defaultMessage:"Driver’s License"},passport:{id:"IdCapture.idType.passport",defaultMessage:"Passport"},errorTitleIdType:{id:"IdCapture.idType.errorTitle",defaultMessage:"Unsupported country"},errorMessageIdType:{id:"IdCapture.idType.errorMessage",defaultMessage:"Unfortunately identity verification isn't available for your region"},mobileUploadTitle:{id:"IdCapture.mobileUpload.title",defaultMessage:"Upload from your mobile phone"},mobileUploadSubtitle:{id:"IdCapture.mobileUpload.subtitle",defaultMessage:"Click the link we just sent to {number} and upload photos of your {idType}."},mobileUploadWait:{id:"IdCapture.mobileUpload.wait",defaultMessage:"Please do not leave this page until you are done uploading."},titleVerification:{id:"IdCapture.verification.title",defaultMessage:"We’re verifying your ID"},subtitleSlowVerification:{id:"IdCapture.verification.subtitleSlow",defaultMessage:"Your identity is being verified. We will email you once your verification has completed."},fallbackTitleVerification:{id:"IdCapture.verification.fallbacktitle",defaultMessage:"Verification still processing"},fallbackSubtitleVerification:{id:"IdCapture.verification.fallbackSubtitle",defaultMessage:"Your ID requires additional verification. We will email you once verification has been completed."},fallbackWarningVerification:{id:"IdCapture.verification.fallbackWarning",defaultMessage:"Due to high demand, it may take a day or two to verify your ID."},frontBackTitle:{id:"IdCapture.ImageUpload.frontBackTitle",defaultMessage:"Upload images"},faceTitle:{id:"IdCapture.ImageUpload.faceTitle",defaultMessage:"Take a selfie"},frontBackSubtitle:{id:"IdCapture.ImageUpload.frontBackSubtitle",defaultMessage:"Upload pictures of your {idType} (JPEG or PNG)."},faceSubtitle:{id:"IdCapture.ImageUpload.faceSubtitle",defaultMessage:"Center your face clearly in the frame."},textSubtitle:{id:"IdCapture.ImageUpload.textSubtitle",defaultMessage:"Follow the instructions below to verify your identity."},dropzone:{id:"IdCapture.ImageUpload.dropzone",defaultMessage:"Drag & drop or click to upload"},continueAction:{id:"IdCapture.ImageUpload.continueAction",defaultMessage:"Continue"},uploadAction:{id:"IdCapture.ImageUpload.uploadAction",defaultMessage:"Upload"},front:{id:"IdCapture.ImageUpload.front",defaultMessage:"Front"},back:{id:"IdCapture.ImageUpload.back",defaultMessage:"Back"},face:{id:"IdCapture.ImageUpload.face",defaultMessage:"Lastly, take a selfie"},instructions:{id:"IdCapture.ImageUpload.instructions",defaultMessage:"Please do not redact, watermark or otherwise obscure any part of your ID. This will help ensure we can verify your identity document as quickly and accurately as possible."},blurryImageWarningFront:{id:"IdCapture.ImageUpload.blurryImageWarningFront",defaultMessage:"The front image looks too blurry"},blurryImageWarningBack:{id:"IdCapture.ImageUpload.blurryImageWarningBack",defaultMessage:"The back image looks too blurry"},blurryImageWarningBoth:{id:"IdCapture.ImageUpload.blurryImageWarningBoth",defaultMessage:"Both images look too blurry"},blurryImageWarningOneSided:{id:"IdCapture.ImageUpload.blurryImageWarningOneSided",defaultMessage:"This image looks too blurry"},blurryImageWarningText:{id:"IdCapture.ImageUpload.blurryImageWarningText",defaultMessage:"We recommend uploading a new picture. Be sure not too get too close or the camera can't focus. Turning up the lights may help too."},titleUploadMethod:{id:"IdCapture.uploadMethod.title",defaultMessage:"Choose an upload method"},webcam:{id:"IdCapture.uploadMethod.title.webcam",defaultMessage:"Webcam"},file:{id:"IdCapture.uploadMethod.title.file",defaultMessage:"File Upload"},mobile:{id:"IdCapture.uploadMethod.title.mobile",defaultMessage:"Mobile Camera"},noSupportedUploadTypes:{id:"IdCapture.uploadMethod.noSupportedUploadTypes",defaultMessage:"Unsupported browser"},noSupportedUploadTypesMessage:{id:"IdCapture.uploadMethod.noSupportedUploadTypesMessage",defaultMessage:"Your browser does not support ID verification. Please go to Settings > Identity Verifications on iOS or Android or use the latest version of Chrome on a computer with a webcam."},webcamDisabled:{id:"IdCapture.uploadMethod.webcamDisabled",defaultMessage:"Need to enable your webcam?"},webcamHelpText:{id:"IdCapture.uploadMethod.webcamHelpText",defaultMessage:"Learn more"},scamWarningTitle:{id:"IdCapture.scamWarningTitle",defaultMessage:"Scam warning"},scamWarningText:{id:"IdCapture.scamWarningText",defaultMessage:"If you’re signing up at the request of someone else, stop immediately and read our article about avoiding"},scamWarningArticleLinkName:{id:"IdCapture.scamWarningArticleLinkName",defaultMessage:"cryptocurrency scams"},cutOffHint:{id:"IdCapture.cutoffHint",defaultMessage:"{frame}, not cut off on any side"},lightingHint:{id:"IdCapture.brightness",defaultMessage:"Turn up your brightness"},glareHint:{id:"IdCapture.glareHint",defaultMessage:"{lighting} and avoid glare"},cameraAccessHint:{id:"IdCapture.cameraAccessHint",defaultMessage:"{clickAllow} if your browser asks to use your camera"},nameHint:{id:"IdCapture.nameHint",defaultMessage:"{firstName} and {lastName} clearly visible"},firstName:{id:"IdCapture.firstName",defaultMessage:"First name"},lastName:{id:"IdCapture.lastName",defaultMessage:"last name"},dobHint:{id:"IdCapture.dobHint",defaultMessage:"{dob} clearly visible"},dob:{id:"IdCapture.dob",defaultMessage:"Date of birth"},idNumberHint:{id:"IdCapture.idNumberHint",defaultMessage:"{id} clearly visible"},idNumber:{id:"IdCapture.idNumber",defaultMessage:"ID number"},frame:{id:"IdCapture.frame",defaultMessage:"Fully in frame"},clickAllow:{id:"IdCapture.clickAllow",defaultMessage:'Click "Allow"'},example:{id:"IdCapture.example",defaultMessage:"Example"},ready:{id:"IdCapture.ready",defaultMessage:"I’m ready"},takePhoto:{id:"IdCapture.takePhoto",defaultMessage:"Take photo"},retake:{id:"IdCapture.retake",defaultMessage:"Retake"},continue:{id:"IdCapture.continue",defaultMessage:"Next"},processing:{id:"IdCapture.processing",defaultMessage:"Processing..."},guideTitleFirst:{id:"IdCapture.guideTitleFirst",defaultMessage:"First, we need a picture of the front of your {idType}"},guideTitleBack:{id:"IdCapture.guideTitleBack",defaultMessage:"Next, we need a picture of the back of your {idType}"},guideTitleFace:{id:"IdCapture.guideTitleFace",defaultMessage:"Finally, lets take a selfie of you to verify your identity"},blurryImageWarningHeader:{id:"IdCapture.blurryImageWarningHeader",defaultMessage:"This image looks too blurry"},blurryImageWarningMessage:{id:"IdCapture.blurryImageWarningMessage",defaultMessage:"Be sure not too get too close or the camera can't focus. Turning up the lights may help too."},blurryContinueAnyway:{id:"IdCapture.blurryContinueAnyway",defaultMessage:"Continue Anyway"},captureTitle:{id:"IdCapture.captureTitle",defaultMessage:"Position the {side} of your {idType} in the frame below"},frontBackAccountRecoveryTitle:{id:"IdCapture.frontBackAccountRecoveryTitle",defaultMessage:"{idType} Verification"},rejectionReason:{id:"IdCapture.rejectionReason",defaultMessage:"Please select a JPEG or PNG image no larger than 15MB and no smaller than 5KB in size."},accountRecoveryDropzone:{id:"IdCapture.accountRecoveryDropzone",defaultMessage:"Tap to capture {side} of ID"}});function Y({actions:e,children:t,image:r,onGoBack:i,actionsSubtitle:n,subtitle:a,title:c,testID:d,maintainHeight:l}){const f=(0,s.Z)().formatMessage;return(0,o.jsxs)(p.Box,{flexDirection:"column",justifyContent:"space-between",width:"100%",testID:d,minHeight:l?"450px":void 0,children:[r&&(0,o.jsx)(p.Box,{spacingBottom:4,justifyContent:"center",children:r}),(c||a)&&(0,o.jsxs)(p.Box,{flexDirection:"column",spacingBottom:3,children:[c&&(0,o.jsx)(g.TextDisplay3,{as:"h1",spacingBottom:2,align:r?"center":"start",children:c}),a&&(0,o.jsx)(g.TextBody,{as:"p",color:"foregroundMuted",align:r?"center":"start",children:a})]}),t,e||i?(0,o.jsxs)(u.VStack,{gap:1,spacingVertical:1,alignItems:"center",width:"100%",children:[e,i&&(0,o.jsx)(p.Box,{spacingVertical:1,children:(0,o.jsx)(_.Link,{onPress:i,variant:"body",children:f(Z.contentLayoutactionGoBack)})})]}):null,n&&(0,o.jsx)(g.TextBody,{as:"p",align:"center",spacingTop:4,children:n})]})}const K=(0,i.memo)(Y),$=(0,i.memo)((function(e){let t=e.size,r=void 0===t?150:t,i=S(e,w);return(0,o.jsx)(u.Box,E(E({flexGrow:1,alignItems:"center",justifyContent:"center"},i),{},{testID:"id-capture-loader",children:(0,o.jsx)(d.LottieStatusAnimation,{width:r,status:"loading"})}))}));function J({title:e,subtitle:t}){const r=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(m.TextLabel1,{as:"p",color:"negativeForeground",children:e}),(0,o.jsx)(y.TextLabel2,{as:"p",children:t})]});return(0,o.jsxs)(p.Box,{alignItems:"center",justifyContent:"center",spacing:2,bordered:!0,borderRadius:"rounded",background:"negative",children:[(0,o.jsx)(Q,{}),(0,o.jsx)(f.HStack,{alignContent:"center",alignItems:"center",flexWrap:"wrap",children:(0,o.jsx)(X,{children:r})})]})}const Q=(0,l.ZP)((function(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 50 50",children:(0,o.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#FFF",strokeLinecap:"square",strokeWidth:"2",transform:"translate(1 1)",children:[(0,o.jsx)("circle",{cx:"24",cy:"24",r:"24"}),(0,o.jsx)("path",{d:"M33 15L15 33M33 33L15 15"})]})})})).withConfig({displayName:"bundle-d07ce215__ErrorIconStyled",componentId:"sc-1a0ejye-0"})(["flex-shrink:0;width:32px;height:32px;margin-right:16px;fill:",";"],(({theme:e})=>e.color.white)),X=l.ZP.div.withConfig({displayName:"bundle-d07ce215__WordBreak",componentId:"sc-1a0ejye-1"})(["word-break:break-all;color:",";"],(({theme:e})=>e.color.white));function ee(){return(0,o.jsx)(c.HeroSquare,{name:"openEmail"})}function te({fallback:e=!1,logger:t}){const r=t??n.Kz;(0,i.useEffect)((()=>{e?r("verify_document_viewed_fallback",{action:n.Us.render,componentType:n.re.page}):r("verify_document_verification_pending",{action:n.Us.view,componentType:n.re.page})}),[e,r]);const a=(0,s.Z)().formatMessage,c=(()=>{const e=(0,s.Z)().formatMessage,t=z("enable_idv_degradation_warning_hours"),r=z("enable_idv_degradation_warning_days");return t?e(G.delayWarningHours):r?e(G.delayWarningDays):null})();return(0,o.jsxs)(K,{title:a(e?Z.fallbackTitleVerification:Z.titleVerification),subtitle:a(e?Z.fallbackSubtitleVerification:Z.subtitleSlowVerification),image:e&&(0,o.jsx)(ee,{}),testID:"idv-pending-view",children:[!e&&(0,o.jsx)($,{size:240}),e&&c&&(0,o.jsx)(J,{title:c})]})}const re=(0,i.memo)(te),ie=(0,a.vU)({title:{id:"Pending.title",defaultMessage:"We’re verifying your identity"},description:{id:"Pending.description",defaultMessage:"You can close this page. This should take up to 10 minutes, we’ll email you when we’re done."}});function ne(){const e=(0,s.Z)().formatMessage;return(0,o.jsxs)(u.VStack,{children:[(0,o.jsx)($,{size:"240"}),(0,o.jsxs)(u.VStack,{gap:2,alignItems:"center",flexWrap:"wrap",children:[(0,o.jsx)(g.TextDisplay3,{as:"h1",align:"center",children:e(ie.title)}),(0,o.jsx)(g.TextBody,{as:"p",align:"center",color:"foregroundMuted",children:e(ie.description)})]})]})}const oe=(0,i.createContext)(void 0);function ae(){const e=(0,i.useContext)(oe);if(!e)throw new Error("useIdCapture must be used within a IdCaptureProvider");return e}const se=()=>{},ce=(0,i.createContext)({step:"TIPS_UPLOAD_ID",goToStep:se,goBack:se,firstStep:"TIPS_UPLOAD_ID"});function de(){return(0,i.useContext)(ce)}const ue=1e4,le="/v2/jumio-profiles";function pe(){const e=(0,i.useRef)(0),t=(0,i.useRef)(),r=(0,i.useRef)(),n=ae().client,o=(0,i.useCallback)((()=>{t.current&&(clearInterval(t.current),t.current=void 0)}),[]),a=async e=>{const i=e.onSuccess,a=e.onError,c=e.pendingVerificationId,d={client:n,onError:e=>{r.current=!1,o(),a?.(e)},onSuccess:n=>{switch(r.current=!1,n.status){case"completed":case"success_pending_choice":case"failed":o(),i(n);break;default:t.current=setTimeout((()=>s(e)),ue)}}};c?await async function({jumioProfileId:e,client:t,onError:r,onLoading:i,onSuccess:n}){try{i?.(!0);const o=`${le}/${e}`,a=await t.get(o);if(!a?.data){const e={name:"JumioProfileInvalid",message:`Incorrect response returned by API ${o}`};return r?.(e),void P.idvProfiles(e)}n(a?.data)}catch(e){const t={name:e?.name||"ApiFailed",message:e.message};r?.(t),P.idvProfiles(t)}finally{i?.(!1)}}(E(E({},d),{},{jumioProfileId:c})):await async function({client:e,onError:t,onLoading:r,onSuccess:i}){try{r?.(!0);const n=await e.get(le),o=n?.data?.[0];if(!o){const e={name:"JumioProfileInvalid",message:`Incorrect response returned by API ${le}`};return t?.(e),void P.idvProfiles(e)}i(o)}catch(e){const r={name:e?.name||"ApiFailed",message:e.message};t?.(r),P.idvProfiles(r)}finally{r?.(!1)}}(d)},s=async t=>{r.current||(e.current+=1,r.current=!0,a(t))};return{pollCounter:e.current,poller:s,retryPolling:i=>{e.current=0,r.current=!1,t.current&&o(),s(i)},clearPoller:o}}const fe=(0,a.vU)({title:{id:"FailureView.title",defaultMessage:"Verification Failed"},altTitle:{id:"FailureView.altTitle",defaultMessage:"We couldn’t verify your identity"},subtitle:{id:"FailureView.subtitle",defaultMessage:"There are a few common issues we can help you fix. Make sure that:"},genericErrorMessage:{id:"FailureView.genericErrorMessage",defaultMessage:"Something went wrong. Please try uploading your photo ID again."},troubleShootingTip1:{id:"FailureView.troubleShootingTip1",defaultMessage:"Your ID is valid and doesn’t expire within the next 3 months"},troubleShootingTip2:{id:"FailureView.troubleShootingTip2",defaultMessage:"Your first name, last name, birthdate, and address should be clearly visible"},troubleShootingTip3:{id:"FailureView.troubleShootingTip3",defaultMessage:"You place your ID on a flat surface with a solid and plain background"},troubleShootingSummary:{id:"FailureView.troubleShootingSummary",defaultMessage:"If the problem continues, try using another form of identification."},tryAgain:{id:"FailureView.tryAgain",defaultMessage:"Try again"},needHelp:{id:"FailureView.needHelp",defaultMessage:"Need help?"},permissionDeniedError:{id:"FailureView.permissionDeniedError",defaultMessage:"Permission to use webcam denied by browser. Please click try again and allow webcam access."},NotReadableError:{id:"FailureView.notReadableError",defaultMessage:"Unfortunately, your ID was unreadable. Please follow these guidelines and try again."},DevicesNotFoundError:{id:"FailureView.devicesNotFoundError",defaultMessage:"Webcam device was not found. Please click try again and use a non-webcam verification method."},genericVerificationFailed:{id:"FailureView.genericVerificationFailed",defaultMessage:"Please try again using your actual, real-world ID and not a digital copy."},errorHasOccurred:{id:"FailureView.errorHasOccurred",defaultMessage:"An error has occurred."}}),me="https://help.coinbase.com/en/coinbase/getting-started/getting-started-with-coinbase/id-doc-verification";function ye({action:e,title:t}){const r=(0,s.Z)().formatMessage;return(0,o.jsxs)(u.VStack,{gap:4,children:[(0,o.jsxs)(u.VStack,{gap:.5,children:[(0,o.jsx)(u.Box,{spacingBottom:2,children:(0,o.jsx)(c.Pictogram,{name:"warning",dimension:"64x64"})}),(0,o.jsx)(g.TextDisplay3,{as:"h1",children:t||r(fe.altTitle)}),(0,o.jsx)(g.TextBody,{as:"p",color:"foregroundMuted",children:r(fe.subtitle)})]}),(0,o.jsx)(u.VStack,{gap:3,children:[fe.troubleShootingTip1,fe.troubleShootingTip2,fe.troubleShootingTip3].map(((e,t)=>(0,o.jsxs)(u.HStack,{gap:2,alignItems:"center",children:[(0,o.jsx)(v.Icon,{name:"info",size:"s",color:"foreground"}),(0,o.jsx)(g.TextBody,{as:"p",children:r(e)})]},`idv-failure-tip-${t}`)))}),(0,o.jsx)(g.TextBody,{as:"p",children:r(fe.troubleShootingSummary)}),e]})}function ge({action:e,error:t,title:r,isGenericApiError:n=!1,isVerificationFailed:a=!1}){const d=(0,b.useBreakpoints)().isPhone,l=(0,s.Z)().formatMessage,p=(0,i.useMemo)((()=>n?l(fe.genericErrorMessage):t||a?function(e,t,r){const i=e.name;return"PermissionDeniedError"===i||"NotAllowedError"===i?t(fe.permissionDeniedError):"string"==typeof i&&i in fe?t(fe[i]):!e.message&&r?t(fe.genericVerificationFailed):e.message}(t,l,a):""),[n,t,l,a]);return(0,o.jsxs)(u.VStack,{gap:2,testID:"id-capture-reskinned-failure-view",children:[(0,o.jsxs)(u.VStack,{alignItems:"center",gap:3,children:[(0,o.jsx)(c.HeroSquare,{name:"idIssue",dimension:d?"200x200":"240x240"}),(0,o.jsx)(g.TextDisplay3,{as:"h1",align:"center",children:r||l(fe.title)})]}),(0,o.jsx)(u.VStack,{spacingBottom:2,children:(0,o.jsx)(g.TextBody,{as:"p",color:"foregroundMuted",align:"center",children:p})}),e]})}function _e(e){const t=e.hideRetryButton,r=void 0!==t&&t,a=e.onRetry,c=e.error,d=e.title,l=e.isVerificationFailed,p=void 0!==l&&l,f=e.showTipsErrorView,m=void 0!==f&&f,y=e.isGenericApiError,_=void 0!==y&&y,b=ae(),v=b.track,k=b.onApiError,w=(0,s.Z)().formatMessage;(0,i.useEffect)((()=>{const e=C(p?["verify_document_viewed_failure","bde8f8a1-6b57-4e1d-95ac-e7a9ba29890e"]:["verify_document_viewed_error","f7773e4a-577d-4362-894b-bca71c1cbb10"],1)[0];if(v(e,{action:n.Us.render,componentType:n.re.page,error:c?c.name:"No reason given"}),k&&!p){const e=c?`${c.name}: ${c.message}`:"No reason given";k(new Error(e))}}),[]);const x=(0,i.useCallback)((()=>{!r&&a&&(v("verify_document_retry_tapped",{action:n.Us.click,componentType:n.re.button}),a())}),[a,r,v]),S=(0,i.useMemo)((()=>(0,o.jsxs)(u.VStack,{gap:r?0:2,children:[r?null:(0,o.jsx)(h.Button,{onPress:x,block:!0,children:w(fe.tryAgain)}),(0,o.jsx)(h.Button,{variant:"secondary",to:me,target:"_blank",children:(0,o.jsx)(g.TextHeadline,{as:"span",underline:!0,children:w(fe.needHelp)})})]})),[r,x,w]);return _||!m&&c?(0,o.jsx)(ge,E({action:S},e)):(0,o.jsx)(ye,{action:S,title:d})}function he({onRetryFailure:e,failureViewTitle:t,pendingVerificationId:r,applicationId:a}){const s=C((0,i.useState)(),2),c=s[0],d=s[1],u=C((0,i.useState)(),2),l=u[0],p=u[1],f=pe(),m=f.poller,y=f.retryPolling,g=f.clearPoller,_=de(),h=_.goToStep,b=_.firstStep,v=ae(),k=v.track,w=v.resetIDVIfPrevIDVSucceed,x=e=>{"completed"===e.status?h(!w||r||a?"SUCCESS":b):"failed"===e.status&&d(e)};(0,i.useEffect)((()=>(m({pendingVerificationId:r,onError:p,onSuccess:x}),k("verify_document_verification_pending",{action:n.Us.view,componentType:n.re.page,polling_method:"JumioProfiles"}),g)),[]);const S=(0,i.useCallback)((()=>{e?.(c?.failureCode)||h(b)}),[e,c,h,b]);return l?(0,o.jsx)(_e,{error:l,isGenericApiError:!0,onRetry:()=>y({onError:p,onSuccess:x,pendingVerificationId:r})}):c?(0,o.jsx)(_e,{error:{name:c?.failureCode||"VerificationFailed",message:c?.failureDescription?.hint||c?.failureReason||""},isVerificationFailed:!0,title:t?t(c.failureCode):void 0,onRetry:S}):(0,o.jsx)(ne,{})}},1321:(e,t,r)=>{function i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]=r[i]}return e}r.d(t,{Z:()=>o});var n=function e(t,r){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=i({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in o)o[s]&&(a+="; "+s,!0!==o[s]&&(a+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+a}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],i={},n=0;n<r.length;n++){var o=r[n].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(i[s]=t.read(a,s),e===s)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){n(e,"",i({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,i({},this.attributes,t))},withConverter:function(t){return e(i({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const o=n}}]);
//# sourceMappingURL=libs-2c35a68730dc9eb9.js.map